
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="naver-site-verification" content="a37ea649edf26e70c3de94f9cb034f9d6e11de3f" />
    <meta name="generator" content="Yun Blog">
    <title>Spring Batch CSV Reader &amp; Writer - Yun Blog</title>
    <meta name="author" content="Yun">
    
        <meta name="keywords" content="Node,Spring,Spring Boot,Spring Batch,Kotlin,기술 블로그,JPA,Mongo,MySQL,OOP,">
    
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg"},"articleBody":"Spring Batch를 이용해서 데이터베이스에 저장되어 있는 정보를 CSV file로 저장을 하는 방법에 대해서 작성해보겠습니다.\nCSV Writer#\n데이터 흐름#\npayment#\n\ncsv#\n\n데이터의 흐름은 간단합니다. payment table -&gt; payment.csv으로 변경됩니다. payment table의 불필요한 칼럼 id, created_ay, updated_at은 빼고 amount, order_id만 CSV에 저장하겠습니다.\nBatch Code#\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960@Configurationclass CsvWriterJobConfiguration(    private val jobBuilderFactory: JobBuilderFactory,    private val jobDataSetUpListener: JobDataSetUpListener,    entityManagerFactory: EntityManagerFactory) &#123;    private val CHUNK_SIZE = 10    @Bean    fun csvWriterJob(        csvWriterStep: Step    ): Job =        jobBuilderFactory[&quot;csvWriterJob&quot;]            .incrementer(RunIdIncrementer())            .listener(jobDataSetUpListener)            .start(csvWriterStep)            .build()    @Bean    @JobScope    fun csvWriterStep(        stepBuilderFactory: StepBuilderFactory    ): Step =        stepBuilderFactory[&quot;csvWriterStep&quot;]            .chunk&lt;Payment, PaymentCsv&gt;(CHUNK_SIZE)            .reader(reader)            .writer(writer)            .build()    private val reader: JpaPagingItemReader&lt;Payment&gt; =        JpaPagingItemReaderBuilder&lt;Payment&gt;()            .queryString(&quot;SELECT p FROM Payment p&quot;)            .entityManagerFactory(entityManagerFactory)            .name(&quot;readerPayment&quot;)            .build()    private val writer: FlatFileItemWriter&lt;PaymentCsv&gt; =        FlatFileItemWriterBuilder&lt;PaymentCsv&gt;()            .name(&quot;writerPayment&quot;)            .resource(FileSystemResource(&quot;src/main/resources/payment.csv&quot;))            .append(true)            .lineAggregator(PaymentCsvMapper().delimitedLineAggregator())            .headerCallback &#123;                it.write(PaymentCsvMapper().headerNames.joinToString(&quot;,&quot;))            &#125;            .encoding(StandardCharsets.UTF_8.name())            .build()&#125;data class PaymentCsv(    val amount: BigDecimal,    val orderId: Long)class PaymentCsvMapper :    CsvLineAggregator&lt;PaymentCsv&gt; &#123;    override val headerNames: Array&lt;String&gt; = arrayOf(        &quot;amount&quot;, &quot;orderId&quot;    )&#125;\nJob#\n123456789@Beanfun csvWriterJob(    csvWriterStep: Step): Job =    jobBuilderFactory[&quot;csvWriterJob&quot;]        .incrementer(RunIdIncrementer()) // (1)        .listener(jobDataSetUpListener) // (2)        .start(csvWriterStep) // (3)        .build()\n\n(1): 동일한 job parameter으로 여러 번 job을 실행시켜도 문제없게 run.id를 증가시킵니다.\n(2): beforeJob payment 100 rows를 insert 합니다.\n(3): csvWriterStep 해당 step을 실생 시킵니다.\n\nStep#\n1234567891011121314151617@Bean@JobScopefun csvWriterStep(    stepBuilderFactory: StepBuilderFactory): Step =    stepBuilderFactory[&quot;csvWriterStep&quot;]        .chunk&lt;Payment, PaymentCsv&gt;(CHUNK_SIZE) // (1)        .reader(reader) // (2)        .writer(writer) // (3)        .build()private val reader: JpaPagingItemReader&lt;Payment&gt; =    JpaPagingItemReaderBuilder&lt;Payment&gt;()        .queryString(&quot;SELECT p FROM Payment p&quot;)        .entityManagerFactory(entityManagerFactory)        .name(&quot;readerPayment&quot;)        .build()\n\n(1): chunk size 및, inout, output 클래스 지정합니다.\n(2): readerPayment는 전체를 조회합니다. (chuk size 별로 limit ?, ? query가 발생합니다. 한 번에 모두 가져오는 구조는 아닙니다.)\n(3): writerPayment FlatFileItemWriterBuilder 기반으로 Writer을 진행할 CSV에 대한 정보를 생성합니다.\n\nwriterPayment#\n12345678910111213141516171819202122232425262728293031private val writer: FlatFileItemWriter&lt;PaymentCsv&gt; =    FlatFileItemWriterBuilder&lt;PaymentCsv&gt;()        .name(&quot;writerPayment&quot;)        .resource(FileSystemResource(&quot;src/main/resources/payment.csv&quot;)) // (1)        .append(true) // (2)        .lineAggregator(PaymentCsvMapper().delimitedLineAggregator()) // (3)        .headerCallback &#123; // (4)            it.write(PaymentCsvMapper().headerNames.joinToString(&quot;,&quot;))        &#125;        .encoding(StandardCharsets.UTF_8.name())        .build()interface CsvLineAggregator&lt;T&gt; &#123;    val headerNames: Array&lt;String&gt;    fun delimitedLineAggregator(        delimiter: String = &quot;,&quot;    ) =        object : DelimitedLineAggregator&lt;T&gt;() &#123;            init &#123;                setDelimiter(delimiter) // 3-1                setFieldExtractor(                    object : BeanWrapperFieldExtractor&lt;T&gt;() &#123;                        init &#123;                            setNames(headerNames) // // 3-2                        &#125;                    &#125;                )            &#125;        &#125;\n\n(1): output을 사용할 Resource을 지정합니다.\n(2): ture을 지정하면 해당 경로에 이미 파일이 있으면 파일을 추가합니다.\n(3): csv 파일에 집계할 방식에 대해서 작성합니다. CsvLineAggregator 인터페이스를 기준으로 진행됩니다. csv 필드에 대한 구분은 ,을 사용하며, PaymentCsvMapper 기반으로 필드 순서가 결정됩니다.\n(4): csv 파일에 header 정보를 입력합니다. PaymentCsvMapper에 headNames를 사용해서 (3)에서 사용한 필드 순서와 동일하게 지정합니다.\n\nCsvLineAggregator, PaymentCsvMapper를 사용하지 않아도 문제는 없지만 Spring Batch에서 지원하는 lineAggregator, headerCallback 사용법을 단순화 시켰습니다. 프레임 워크에서는 상대적으로 저수준의 기능을 제공해주기 때문에 각 서비스에서 고수준으로 변경해서 사용하는 방법을 고려해서 개발하는 것도 개발자에게 중요한 스킬이라고 생각합니다.\n실행 결과#\n1java -jar build/libs/study-0.0.1-SNAPSHOT.jar --job.name=csvWriterJob\n해당 테스트는 docker-compose.yaml 기반 mysql 5.7 기반으로 동작 됩니다.\n1234567891011121314151617181920212223amount,orderId1.00,12.00,23.00,34.00,45.00,56.00,67.00,78.00,89.00,910.00,1011.00,1112.00,1213.00,1314.00,1415.00,1516.00,1617.00,1718.00,1819.00,1920.00,2021.00,21...\namount, orderId header 정보 및 데이터가 정상적으로 저장돼있는 것을 확인할 수 있습니다.\nIntelliJ Plugins#\n\n\nIntelliJ 사용한다면 위 두 개의 CSV 플러그인을 추천드립니다.\nCSV Reader#\nSpring Batch를 이용해서 CSV 파일을 읽어 데이터베이스에 저장하는 방법에 대해서 작성해보겠습니다.\n데이터 흐름#\n123456789101112131415161718amount,orderId1.00,12.00,23.00,34.00,45.00,56.00,67.00,78.00,89.00,910.00,1011.00,1112.00,1213.00,1314.00,1415.00,1516.00,1617.00,17\n위 CSV 파일을 읽어 데이터베이스에 저장합니다.\nBatch Code#\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354@Configurationclass CsvReaderJobConfiguration(    private val jobBuilderFactory: JobBuilderFactory,    private val stepBuilderFactory: StepBuilderFactory,    entityManagerFactory: EntityManagerFactory) &#123;    private val CHUNK_SIZE = 10    @Bean    fun csvReaderJob(        csvReaderStep: Step    ): Job = jobBuilderFactory[&quot;csvReaderJob&quot;]        .incrementer(RunIdIncrementer()) // (1)        .listener(JobReportListener()) // (2)        .start(csvReaderStep)        .build()    @Bean    @JobScope    fun csvReaderStep(): Step =        stepBuilderFactory[&quot;csvReaderStep&quot;]            .chunk&lt;PaymentCsv, Payment&gt;(CHUNK_SIZE) // (3)            .reader(reader) // (4)            .processor(processor) // (5)            .writer(writer) // (6)            .build()    private val processor: ItemProcessor&lt;in PaymentCsv, out Payment&gt; =        ItemProcessor &#123;            it.toEntity()        &#125;    private val reader: FlatFileItemReader&lt;PaymentCsv&gt; =        FlatFileItemReaderBuilder&lt;PaymentCsv&gt;()            .name(&quot;paymentCsv&quot;)            .resource(ClassPathResource(&quot;/payment.csv&quot;)) // (7)            .linesToSkip(1) // (8)            .delimited()            .delimiter(DelimitedLineTokenizer.DELIMITER_COMMA) // (9)            .names(&quot;amount&quot;, &quot;orderId&quot;) // (10)            .fieldSetMapper &#123; // 11                PaymentCsv(                    amount = it.readBigDecimal(&quot;amount&quot;),                    orderId = it.readLong(&quot;orderId&quot;)                )            &#125;            .build()    // (12)    private val writer: JpaItemWriter&lt;Payment&gt; =        JpaItemWriterBuilder&lt;Payment&gt;()            .entityManagerFactory(entityManagerFactory)            .build()&#125;\nJob#\n\n(1): 동일한 job parameter으로 여러 번 job을 실행시켜도 문제없게 run.id를 증가시킵니다.\n(3): csvReaderStep 해당 step을 실생 시킵니다.\n\nStep#\n\n(3): chunk size 및, inout, output 클래스 지정합니다.\n(4): readerPayment CSV 파일을 라인별로 읽습니다.\n(5): processor 읽은 CSV 파일을 Entity POJO 객체를 생성해서 넘겨줍니다.\n(6): writer JpaItemWriterBuilder를 이용해서 Enttiy를 데이터베이스에 저장합니다.\n(7): ClassPathResource를 이용해서 해당 CSV 파일의 리소스를 지정합니다. classpath 기준으로 resources/payment.csv에 위치한 파일을 읽습니다.\n(8): linesToSkip(1) 첫 번째 라인은 header로 해당 데이터를 skip 합니다.\n(9): DelimitedLineTokenizer.DELIMITER_COMMA은 문자열 &quot;,&quot; 으로 CSV 파일에 대한 구분자 값 문자열을 지정합니다.\n(10): CSV 파일에 필드명을 지정합니다.\n(11): CSV의 DTO객체인 PaymentCsv에 어떻게 바인딩 시킬지 지정합니다.\n(12): entityManagerFactory 기반으로 해당 엔티티를 영속화 합니다.\n\n결과#\n12$ ./gradlew bootJar$ java -jar build/libs/study-0.0.1-SNAPSHOT.jar --job.name=csvReaderJob  \n\n해당 데이터가 모두 저장되이 었는것을 확인 할 수 있습니다.\n","dateCreated":"2020-12-19T00:00:00+09:00","dateModified":"2025-01-31T20:24:39+09:00","datePublished":"2020-12-19T00:00:00+09:00","description":"Spring Batch를 이용해서 데이터베이스에 저장되어 있는 정보를 CSV file로 저장을 하는 방법에 대해서 작성해보겠습니다.","headline":"Spring Batch CSV Reader & Writer","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://cheese10yun.github.io/spring-batch-writer-csv/"},"publisher":{"@type":"Organization","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg","logo":{"@type":"ImageObject","url":"yun-icon.jpg"}},"url":"https://cheese10yun.github.io/spring-batch-writer-csv/","keywords":"Spring Batch"}</script>
    <meta name="description" content="Spring Batch를 이용해서 데이터베이스에 저장되어 있는 정보를 CSV file로 저장을 하는 방법에 대해서 작성해보겠습니다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Spring Batch CSV Reader &amp; Writer">
<meta property="og:url" content="https://cheese10yun.github.io/spring-batch-writer-csv/index.html">
<meta property="og:site_name" content="Yun Blog">
<meta property="og:description" content="Spring Batch를 이용해서 데이터베이스에 저장되어 있는 정보를 CSV file로 저장을 하는 방법에 대해서 작성해보겠습니다.">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/table_payment.png">
<meta property="og:image" content="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/csv-format.png">
<meta property="og:image" content="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/csv-rainbow.png">
<meta property="og:image" content="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/csv-plugin.png">
<meta property="og:image" content="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/csv_reader_result.png">
<meta property="article:published_time" content="2020-12-18T15:00:00.000Z">
<meta property="article:modified_time" content="2025-01-31T11:24:39.891Z">
<meta property="article:author" content="Yun">
<meta property="article:tag" content="Spring Batch">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/table_payment.png">
    
    
        
    
    
        <meta property="og:image" content="https://cheese10yun.github.io/assets/images/yun-icon.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90907312-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90907312-1');
    </script>


    

    
        
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5813739623204880" crossorigin="anonymous"></script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Yun Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="저자에 대해 더 알아보기"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
                </a>
                <h4 class="sidebar-profile-name">Yun</h4>
                
                    <h5 class="sidebar-profile-bio"><p>기술 블로그</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/cheese10yun"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/rss2.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Spring Batch CSV Reader &amp; Writer
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-12-19T00:00:00+09:00">
	
		    2020/12/19
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>Spring Batch를 이용해서 데이터베이스에 저장되어 있는 정보를 CSV file로 저장을 하는 방법에 대해서 작성해보겠습니다.</p>
<h1><span id="csv-writer">CSV Writer</span><a href="#csv-writer" class="header-anchor">#</a></h1>
<h2><span id="deiteo-heureum">데이터 흐름</span><a href="#deiteo-heureum" class="header-anchor">#</a></h2>
<h3><span id="payment">payment</span><a href="#payment" class="header-anchor">#</a></h3>
<p><img src="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/table_payment.png" alt></p>
<h3><span id="csv">csv</span><a href="#csv" class="header-anchor">#</a></h3>
<p><img src="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/csv-format.png" alt></p>
<p>데이터의 흐름은 간단합니다. payment table -&gt; <code>payment.csv</code>으로 변경됩니다. payment table의 불필요한 칼럼 id, <code>created_ay</code>, <code>updated_at은</code> 빼고 <code>amount</code>, <code>order_id</code>만 CSV에 저장하겠습니다.</p>
<h2><span id="batch-code">Batch Code</span><a href="#batch-code" class="header-anchor">#</a></h2>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CsvWriterJobConfiguration</span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> jobBuilderFactory: JobBuilderFactory,</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> jobDataSetUpListener: JobDataSetUpListener,</span><br><span class="line">    entityManagerFactory: EntityManagerFactory</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> CHUNK_SIZE = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">csvWriterJob</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        csvWriterStep: <span class="type">Step</span></span></span></span><br><span class="line"><span class="params"><span class="function">    )</span></span>: Job =</span><br><span class="line">        jobBuilderFactory[<span class="string">&quot;csvWriterJob&quot;</span>]</span><br><span class="line">            .incrementer(RunIdIncrementer())</span><br><span class="line">            .listener(jobDataSetUpListener)</span><br><span class="line">            .start(csvWriterStep)</span><br><span class="line">            .build()</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@JobScope</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">csvWriterStep</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        stepBuilderFactory: <span class="type">StepBuilderFactory</span></span></span></span><br><span class="line"><span class="params"><span class="function">    )</span></span>: Step =</span><br><span class="line">        stepBuilderFactory[<span class="string">&quot;csvWriterStep&quot;</span>]</span><br><span class="line">            .chunk&lt;Payment, PaymentCsv&gt;(CHUNK_SIZE)</span><br><span class="line">            .reader(reader)</span><br><span class="line">            .writer(writer)</span><br><span class="line">            .build()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> reader: JpaPagingItemReader&lt;Payment&gt; =</span><br><span class="line">        JpaPagingItemReaderBuilder&lt;Payment&gt;()</span><br><span class="line">            .queryString(<span class="string">&quot;SELECT p FROM Payment p&quot;</span>)</span><br><span class="line">            .entityManagerFactory(entityManagerFactory)</span><br><span class="line">            .name(<span class="string">&quot;readerPayment&quot;</span>)</span><br><span class="line">            .build()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> writer: FlatFileItemWriter&lt;PaymentCsv&gt; =</span><br><span class="line">        FlatFileItemWriterBuilder&lt;PaymentCsv&gt;()</span><br><span class="line">            .name(<span class="string">&quot;writerPayment&quot;</span>)</span><br><span class="line">            .resource(FileSystemResource(<span class="string">&quot;src/main/resources/payment.csv&quot;</span>))</span><br><span class="line">            .append(<span class="literal">true</span>)</span><br><span class="line">            .lineAggregator(PaymentCsvMapper().delimitedLineAggregator())</span><br><span class="line">            .headerCallback &#123;</span><br><span class="line">                it.write(PaymentCsvMapper().headerNames.joinToString(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">            &#125;</span><br><span class="line">            .encoding(StandardCharsets.UTF_8.name())</span><br><span class="line">            .build()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">PaymentCsv</span>(</span><br><span class="line">    <span class="keyword">val</span> amount: BigDecimal,</span><br><span class="line">    <span class="keyword">val</span> orderId: <span class="built_in">Long</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PaymentCsvMapper</span> :</span><br><span class="line">    <span class="type">CsvLineAggregator</span>&lt;<span class="type">PaymentCsv</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> headerNames: Array&lt;String&gt; = arrayOf(</span><br><span class="line">        <span class="string">&quot;amount&quot;</span>, <span class="string">&quot;orderId&quot;</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="job">Job</span><a href="#job" class="header-anchor">#</a></h3>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">csvWriterJob</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    csvWriterStep: <span class="type">Step</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>: Job =</span><br><span class="line">    jobBuilderFactory[<span class="string">&quot;csvWriterJob&quot;</span>]</span><br><span class="line">        .incrementer(RunIdIncrementer()) <span class="comment">// (1)</span></span><br><span class="line">        .listener(jobDataSetUpListener) <span class="comment">// (2)</span></span><br><span class="line">        .start(csvWriterStep) <span class="comment">// (3)</span></span><br><span class="line">        .build()</span><br></pre></td></tr></table></figure>
<ul>
<li>(1): 동일한 job parameter으로 여러 번 job을 실행시켜도 문제없게 <code>run.id</code>를 증가시킵니다.</li>
<li>(2): <code>beforeJob</code> payment 100 rows를 insert 합니다.</li>
<li>(3): <code>csvWriterStep</code> 해당 step을 실생 시킵니다.</li>
</ul>
<h3><span id="step">Step</span><a href="#step" class="header-anchor">#</a></h3>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@JobScope</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">csvWriterStep</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    stepBuilderFactory: <span class="type">StepBuilderFactory</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>: Step =</span><br><span class="line">    stepBuilderFactory[<span class="string">&quot;csvWriterStep&quot;</span>]</span><br><span class="line">        .chunk&lt;Payment, PaymentCsv&gt;(CHUNK_SIZE) <span class="comment">// (1)</span></span><br><span class="line">        .reader(reader) <span class="comment">// (2)</span></span><br><span class="line">        .writer(writer) <span class="comment">// (3)</span></span><br><span class="line">        .build()</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">val</span> reader: JpaPagingItemReader&lt;Payment&gt; =</span><br><span class="line">    JpaPagingItemReaderBuilder&lt;Payment&gt;()</span><br><span class="line">        .queryString(<span class="string">&quot;SELECT p FROM Payment p&quot;</span>)</span><br><span class="line">        .entityManagerFactory(entityManagerFactory)</span><br><span class="line">        .name(<span class="string">&quot;readerPayment&quot;</span>)</span><br><span class="line">        .build()</span><br></pre></td></tr></table></figure>
<ul>
<li>(1): chunk size 및, inout, output 클래스 지정합니다.</li>
<li>(2): <code>readerPayment</code>는 전체를 조회합니다. (chuk size 별로 limit ?, ? query가 발생합니다. 한 번에 모두 가져오는 구조는 아닙니다.)</li>
<li>(3): <code>writerPayment</code> FlatFileItemWriterBuilder 기반으로 Writer을 진행할 CSV에 대한 정보를 생성합니다.</li>
</ul>
<h3><span id="writerpayment">writerPayment</span><a href="#writerpayment" class="header-anchor">#</a></h3>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">val</span> writer: FlatFileItemWriter&lt;PaymentCsv&gt; =</span><br><span class="line">    FlatFileItemWriterBuilder&lt;PaymentCsv&gt;()</span><br><span class="line">        .name(<span class="string">&quot;writerPayment&quot;</span>)</span><br><span class="line">        .resource(FileSystemResource(<span class="string">&quot;src/main/resources/payment.csv&quot;</span>)) <span class="comment">// (1)</span></span><br><span class="line">        .append(<span class="literal">true</span>) <span class="comment">// (2)</span></span><br><span class="line">        .lineAggregator(PaymentCsvMapper().delimitedLineAggregator()) <span class="comment">// (3)</span></span><br><span class="line">        .headerCallback &#123; <span class="comment">// (4)</span></span><br><span class="line">            it.write(PaymentCsvMapper().headerNames.joinToString(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">        &#125;</span><br><span class="line">        .encoding(StandardCharsets.UTF_8.name())</span><br><span class="line">        .build()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CsvLineAggregator</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> headerNames: Array&lt;String&gt;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">delimitedLineAggregator</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        delimiter: <span class="type">String</span> = <span class="string">&quot;,&quot;</span></span></span></span><br><span class="line"><span class="params"><span class="function">    )</span></span> =</span><br><span class="line">        <span class="keyword">object</span> : DelimitedLineAggregator&lt;T&gt;() &#123;</span><br><span class="line">            <span class="keyword">init</span> &#123;</span><br><span class="line">                setDelimiter(delimiter) <span class="comment">// 3-1</span></span><br><span class="line">                setFieldExtractor(</span><br><span class="line">                    <span class="keyword">object</span> : BeanWrapperFieldExtractor&lt;T&gt;() &#123;</span><br><span class="line">                        <span class="keyword">init</span> &#123;</span><br><span class="line">                            setNames(headerNames) <span class="comment">// // 3-2</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>(1): <code>output</code>을 사용할 <code>Resource</code>을 지정합니다.</li>
<li>(2): <code>ture</code>을 지정하면 해당 경로에 이미 파일이 있으면 파일을 추가합니다.</li>
<li>(3): csv 파일에 집계할 방식에 대해서 작성합니다. <code>CsvLineAggregator</code> 인터페이스를 기준으로 진행됩니다. csv 필드에 대한 구분은 <code>,</code>을 사용하며, <code>PaymentCsvMapper</code> 기반으로 필드 순서가 결정됩니다.</li>
<li>(4): csv 파일에 header 정보를 입력합니다. <code>PaymentCsvMapper</code>에 headNames를 사용해서 (3)에서 사용한 필드 순서와 동일하게 지정합니다.</li>
</ul>
<p><code>CsvLineAggregator</code>, <code>PaymentCsvMapper</code>를 사용하지 않아도 문제는 없지만 Spring Batch에서 지원하는 <code>lineAggregator</code>, <code>headerCallback</code> 사용법을 단순화 시켰습니다. 프레임 워크에서는 상대적으로 저수준의 기능을 제공해주기 때문에 각 서비스에서 고수준으로 변경해서 사용하는 방법을 고려해서 개발하는 것도 개발자에게 중요한 스킬이라고 생각합니다.</p>
<h2><span id="silhaeng-gyeolgwa">실행 결과</span><a href="#silhaeng-gyeolgwa" class="header-anchor">#</a></h2>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar build/libs/study-<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT.jar --job.name=csvWriterJob</span><br></pre></td></tr></table></figure>
<p>해당 테스트는 <code>docker-compose.yaml</code> 기반 mysql 5.7 기반으로 동작 됩니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">amount,orderId</span><br><span class="line">1.00,1</span><br><span class="line">2.00,2</span><br><span class="line">3.00,3</span><br><span class="line">4.00,4</span><br><span class="line">5.00,5</span><br><span class="line">6.00,6</span><br><span class="line">7.00,7</span><br><span class="line">8.00,8</span><br><span class="line">9.00,9</span><br><span class="line">10.00,10</span><br><span class="line">11.00,11</span><br><span class="line">12.00,12</span><br><span class="line">13.00,13</span><br><span class="line">14.00,14</span><br><span class="line">15.00,15</span><br><span class="line">16.00,16</span><br><span class="line">17.00,17</span><br><span class="line">18.00,18</span><br><span class="line">19.00,19</span><br><span class="line">20.00,20</span><br><span class="line">21.00,21</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><code>amount, orderId</code> header 정보 및 데이터가 정상적으로 저장돼있는 것을 확인할 수 있습니다.</p>
<h2><span id="intellij-plugins">IntelliJ Plugins</span><a href="#intellij-plugins" class="header-anchor">#</a></h2>
<p><img src="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/csv-rainbow.png" alt><br>
<img src="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/csv-plugin.png" alt></p>
<p>IntelliJ 사용한다면 위 두 개의 CSV 플러그인을 추천드립니다.</p>
<h1><span id="csv-reader">CSV Reader</span><a href="#csv-reader" class="header-anchor">#</a></h1>
<p>Spring Batch를 이용해서 CSV 파일을 읽어 데이터베이스에 저장하는 방법에 대해서 작성해보겠습니다.</p>
<h2><span id="deiteo-heureum">데이터 흐름</span><a href="#deiteo-heureum" class="header-anchor">#</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">amount,orderId</span><br><span class="line">1.00,1</span><br><span class="line">2.00,2</span><br><span class="line">3.00,3</span><br><span class="line">4.00,4</span><br><span class="line">5.00,5</span><br><span class="line">6.00,6</span><br><span class="line">7.00,7</span><br><span class="line">8.00,8</span><br><span class="line">9.00,9</span><br><span class="line">10.00,10</span><br><span class="line">11.00,11</span><br><span class="line">12.00,12</span><br><span class="line">13.00,13</span><br><span class="line">14.00,14</span><br><span class="line">15.00,15</span><br><span class="line">16.00,16</span><br><span class="line">17.00,17</span><br></pre></td></tr></table></figure>
<p>위 CSV 파일을 읽어 데이터베이스에 저장합니다.</p>
<h2><span id="batch-code">Batch Code</span><a href="#batch-code" class="header-anchor">#</a></h2>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CsvReaderJobConfiguration</span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> jobBuilderFactory: JobBuilderFactory,</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> stepBuilderFactory: StepBuilderFactory,</span><br><span class="line">    entityManagerFactory: EntityManagerFactory</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> CHUNK_SIZE = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">csvReaderJob</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        csvReaderStep: <span class="type">Step</span></span></span></span><br><span class="line"><span class="params"><span class="function">    )</span></span>: Job = jobBuilderFactory[<span class="string">&quot;csvReaderJob&quot;</span>]</span><br><span class="line">        .incrementer(RunIdIncrementer()) <span class="comment">// (1)</span></span><br><span class="line">        .listener(JobReportListener()) <span class="comment">// (2)</span></span><br><span class="line">        .start(csvReaderStep)</span><br><span class="line">        .build()</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@JobScope</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">csvReaderStep</span><span class="params">()</span></span>: Step =</span><br><span class="line">        stepBuilderFactory[<span class="string">&quot;csvReaderStep&quot;</span>]</span><br><span class="line">            .chunk&lt;PaymentCsv, Payment&gt;(CHUNK_SIZE) <span class="comment">// (3)</span></span><br><span class="line">            .reader(reader) <span class="comment">// (4)</span></span><br><span class="line">            .processor(processor) <span class="comment">// (5)</span></span><br><span class="line">            .writer(writer) <span class="comment">// (6)</span></span><br><span class="line">            .build()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> processor: ItemProcessor&lt;<span class="keyword">in</span> PaymentCsv, <span class="keyword">out</span> Payment&gt; =</span><br><span class="line">        ItemProcessor &#123;</span><br><span class="line">            it.toEntity()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> reader: FlatFileItemReader&lt;PaymentCsv&gt; =</span><br><span class="line">        FlatFileItemReaderBuilder&lt;PaymentCsv&gt;()</span><br><span class="line">            .name(<span class="string">&quot;paymentCsv&quot;</span>)</span><br><span class="line">            .resource(ClassPathResource(<span class="string">&quot;/payment.csv&quot;</span>)) <span class="comment">// (7)</span></span><br><span class="line">            .linesToSkip(<span class="number">1</span>) <span class="comment">// (8)</span></span><br><span class="line">            .delimited()</span><br><span class="line">            .delimiter(DelimitedLineTokenizer.DELIMITER_COMMA) <span class="comment">// (9)</span></span><br><span class="line">            .names(<span class="string">&quot;amount&quot;</span>, <span class="string">&quot;orderId&quot;</span>) <span class="comment">// (10)</span></span><br><span class="line">            .fieldSetMapper &#123; <span class="comment">// 11</span></span><br><span class="line">                PaymentCsv(</span><br><span class="line">                    amount = it.readBigDecimal(<span class="string">&quot;amount&quot;</span>),</span><br><span class="line">                    orderId = it.readLong(<span class="string">&quot;orderId&quot;</span>)</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">            .build()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// (12)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> writer: JpaItemWriter&lt;Payment&gt; =</span><br><span class="line">        JpaItemWriterBuilder&lt;Payment&gt;()</span><br><span class="line">            .entityManagerFactory(entityManagerFactory)</span><br><span class="line">            .build()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="job">Job</span><a href="#job" class="header-anchor">#</a></h3>
<ul>
<li>(1): 동일한 job parameter으로 여러 번 job을 실행시켜도 문제없게 <code>run.id</code>를 증가시킵니다.</li>
<li>(3): <code>csvReaderStep</code> 해당 step을 실생 시킵니다.</li>
</ul>
<h3><span id="step">Step</span><a href="#step" class="header-anchor">#</a></h3>
<ul>
<li>(3): chunk size 및, inout, output 클래스 지정합니다.</li>
<li>(4): <code>readerPayment</code> CSV 파일을 라인별로 읽습니다.</li>
<li>(5): <code>processor</code> 읽은 CSV 파일을 Entity POJO 객체를 생성해서 넘겨줍니다.</li>
<li>(6): <code>writer</code> JpaItemWriterBuilder를 이용해서 Enttiy를 데이터베이스에 저장합니다.</li>
<li>(7): <code>ClassPathResource</code>를 이용해서 해당 CSV 파일의 리소스를 지정합니다. classpath 기준으로 <code>resources/payment.csv</code>에 위치한 파일을 읽습니다.</li>
<li>(8): <code>linesToSkip(1)</code> 첫 번째 라인은 header로 해당 데이터를 skip 합니다.</li>
<li>(9): <code>DelimitedLineTokenizer.DELIMITER_COMMA</code>은 문자열 <code>&quot;,&quot;</code> 으로 CSV 파일에 대한 구분자 값 문자열을 지정합니다.</li>
<li>(10): CSV 파일에 필드명을 지정합니다.</li>
<li>(11): CSV의 DTO객체인 <code>PaymentCsv</code>에 어떻게 바인딩 시킬지 지정합니다.</li>
<li>(12): <code>entityManagerFactory</code> 기반으로 해당 엔티티를 영속화 합니다.</li>
</ul>
<h2><span id="gyeolgwa">결과</span><a href="#gyeolgwa" class="header-anchor">#</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./gradlew bootJar</span><br><span class="line">$ java -jar build/libs/study-0.0.1-SNAPSHOT.jar --job.name=csvReaderJob  </span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/cheese10yun/blog-sample/raw/master/batch-study/docs/img/csv_reader_result.png" alt><br>
해당 데이터가 모두 저장되이 었는것을 확인 할 수 있습니다.</p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Spring-Batch/" rel="tag">Spring Batch</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/spring-batch-application/"
                    data-tooltip="Spring Batch Application 개발하면서 나름의 고찰 정리"
                    aria-label="이전: Spring Batch Application 개발하면서 나름의 고찰 정리"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/rx-kotlin/"
                    data-tooltip="Rx Kotlin 이용해서 성능 개선"
                    aria-label="다음: Rx Kotlin 이용해서 성능 개선"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-batch-writer-csv/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-batch-writer-csv/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        

                
                    <!--  utteranc comment -->

<script src="https://utteranc.es/client.js"
        repo="cheese10yun/blog-comment"
        issue-term="title"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                

            
        
    </div>
</article>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Yun. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/spring-batch-application/"
                    data-tooltip="Spring Batch Application 개발하면서 나름의 고찰 정리"
                    aria-label="이전: Spring Batch Application 개발하면서 나름의 고찰 정리"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/rx-kotlin/"
                    data-tooltip="Rx Kotlin 이용해서 성능 개선"
                    aria-label="다음: Rx Kotlin 이용해서 성능 개선"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-batch-writer-csv/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-batch-writer-csv/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-batch-writer-csv/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-batch-writer-csv/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
            <h4 id="about-card-name">Yun</h4>
        
            <div id="about-card-bio"><p>기술 블로그</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>

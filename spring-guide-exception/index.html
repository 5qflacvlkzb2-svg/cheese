
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="naver-site-verification" content="a37ea649edf26e70c3de94f9cb034f9d6e11de3f" />
    <meta name="generator" content="Yun Blog">
    <title>Spring Guide - Exception 전략 - Yun Blog</title>
    <meta name="author" content="Yun">
    
        <meta name="keywords" content="Node,Spring,Spring Boot,Spring Batch,Kotlin,기술 블로그,JPA,Mongo,MySQL,OOP,">
    
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg"},"articleBody":"\n해당 코드는 Github를 확인해주세요.\n\nException Guide#스프링은 예외처리를 위해 다양하고 막강한 어노테이션을 제공하고 있습니다. 일관성 있는 코드 스타일을 유지하면서 Exception을 처리하는 방법에 대해서 소개하겠습니다.\n통일된 Error Response 객체#Error Response 객체는 항상 동일한 Error Response를 가져야 합니다. 그렇지 않으면 클라이언트에서 예외 처리를 항상 동일한 로직으로 처리하기 어렵습니다. Error Response 객체를 유연하게 처리하기 위해서 간혹 Map&lt;Key, Value&gt; 형식으로 처리하는데 이는 좋지 않다고 생각합니다. 우선 Map 이라는 친구는 런타입시에 정확한 형태를 갖추기 때문에 객체를 처리하는 개발자들도 정확히 무슨 키에 무슨 데이터가 있는지 확인하기 어렵습니다.\n123456@ExceptionHandler(MethodArgumentNotValidException.class)protected ResponseEntity&lt;ErrorResponse&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException e) &#123;    log.error(&quot;handleMethodArgumentNotValidException&quot;, e);    final ErrorResponse response = ErrorResponse.of(ErrorCode.INVALID_INPUT_VALUE, e.getBindingResult());    return new ResponseEntity&lt;&gt;(response, HttpStatus.BAD_REQUEST);&#125;\n위 예제 코드처럼 리턴 타입이 ResponseEntity&lt;ErrorResponse&gt; 으로 무슨 데이터가 어떻게 있는지 명확하게 추론하기 쉽도록 구성하는 게 바람직합니다.\nError Response JSON#123456789101112131415161718&#123;  &quot;message&quot;: &quot; Invalid Input Value&quot;,  &quot;status&quot;: 400,  // &quot;errors&quot;:[], 비어있을 경우 null 이 아닌 빈 배열을 응답한다.  &quot;errors&quot;: [    &#123;      &quot;field&quot;: &quot;name.last&quot;,      &quot;value&quot;: &quot;&quot;,      &quot;reason&quot;: &quot;must not be empty&quot;    &#125;,    &#123;      &quot;field&quot;: &quot;name.first&quot;,      &quot;value&quot;: &quot;&quot;,      &quot;reason&quot;: &quot;must not be empty&quot;    &#125;  ],  &quot;code&quot;: &quot;C001&quot;&#125;\nErrorResponse 객체의 JSON 입니다.\n\nmessage : 에러에 대한 message를 작성합니다.\nstatus : http status code를 작성합니다. header 정보에도 포함된 정보이니 굳이 추가하지 않아도 됩니다.\nerrors : 요청 값에 대한 field, value, reason 작성합니다. 일반적으로 @Valid 어노테이션으로 JSR 303: Bean Validation에 대한 검증을 진행 합니다.\n만약 errors에 바인인된 결과가 없을 경우 null이 아니라 빈 배열 []을 응답해줍니다. null 객체는 절대 리턴하지 않습니다. null이 의미하는 것이 애매합니다.\n\n\ncode : 에러에 할당되는 유니크한 코드값입니다.\n\nError Response 객체#12345678910111213141516171819@Getter@NoArgsConstructor(access = AccessLevel.PROTECTED)public class ErrorResponse &#123;    private String message;    private int status;    private List&lt;FieldError&gt; errors;    private String code;    ...    @Getter    @NoArgsConstructor(access = AccessLevel.PROTECTED)    public static class FieldError &#123;        private String field;        private String value;        private String reason;        ...    &#125;&#125;\nErrorResponse 객체 입니다. POJO 객체로 관리하면 errorResponse.getXXX(); 이렇게 명확하게 객체에 있는 값을 가져올 수 있습니다. 그 밖에 특정 Exception에 대해서 ErrorResponse 객체를 어떻게 만들 것인가에 대한 책임을 명확하게 갖는 구조로 설계할 수 있습니다. 세부적인 것은 코드를 확인해주세요.\n@ControllerAdvice로 모든 예외를 핸들링#@ControllerAdvice 어노테이션으로 모든 예외를 한 곳에서 처리할 수 있습니다. 해당 코드의 세부적인 것은 중요하지 않으며 가장 기본적이며 필수적으로 처리하는 코드입니다. 코드에 대한 이해보다 아래의 설명을 참고하는 게 좋습니다.\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374@ControllerAdvice@Slf4jpublic class GlobalExceptionHandler &#123;    /**     *  javax.validation.Valid or @Validated 으로 binding error 발생시 발생한다.     *  HttpMessageConverter 에서 등록한 HttpMessageConverter binding 못할경우 발생     *  주로 @RequestBody, @RequestPart 어노테이션에서 발생     */    @ExceptionHandler(MethodArgumentNotValidException.class)    protected ResponseEntity&lt;ErrorResponse&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException e) &#123;        log.error(&quot;handleMethodArgumentNotValidException&quot;, e);        final ErrorResponse response = ErrorResponse.of(ErrorCode.INVALID_INPUT_VALUE, e.getBindingResult());        return new ResponseEntity&lt;&gt;(response, HttpStatus.BAD_REQUEST);    &#125;    /**     * @ModelAttribut 으로 binding error 발생시 BindException 발생한다.     * ref https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-modelattrib-method-args     */    @ExceptionHandler(BindException.class)    protected ResponseEntity&lt;ErrorResponse&gt; handleBindException(BindException e) &#123;        log.error(&quot;handleBindException&quot;, e);        final ErrorResponse response = ErrorResponse.of(ErrorCode.INVALID_INPUT_VALUE, e.getBindingResult());        return new ResponseEntity&lt;&gt;(response, HttpStatus.BAD_REQUEST);    &#125;    /**     * enum type 일치하지 않아 binding 못할 경우 발생     * 주로 @RequestParam enum으로 binding 못했을 경우 발생     */    @ExceptionHandler(MethodArgumentTypeMismatchException.class)    protected ResponseEntity&lt;ErrorResponse&gt; handleMethodArgumentTypeMismatchException(MethodArgumentTypeMismatchException e) &#123;        log.error(&quot;handleMethodArgumentTypeMismatchException&quot;, e);        final ErrorResponse response = ErrorResponse.of(e);        return new ResponseEntity&lt;&gt;(response, HttpStatus.BAD_REQUEST);    &#125;    /**     * 지원하지 않은 HTTP method 호출 할 경우 발생     */    @ExceptionHandler(HttpRequestMethodNotSupportedException.class)    protected ResponseEntity&lt;ErrorResponse&gt; handleHttpRequestMethodNotSupportedException(HttpRequestMethodNotSupportedException e) &#123;        log.error(&quot;handleHttpRequestMethodNotSupportedException&quot;, e);        final ErrorResponse response = ErrorResponse.of(ErrorCode.METHOD_NOT_ALLOWED);        return new ResponseEntity&lt;&gt;(response, HttpStatus.METHOD_NOT_ALLOWED);    &#125;    /**     * Authentication 객체가 필요한 권한을 보유하지 않은 경우 발생합     */    @ExceptionHandler(AccessDeniedException.class)    protected ResponseEntity&lt;ErrorResponse&gt; handleAccessDeniedException(AccessDeniedException e) &#123;        log.error(&quot;handleAccessDeniedException&quot;, e);        final ErrorResponse response = ErrorResponse.of(ErrorCode.HANDLE_ACCESS_DENIED);        return new ResponseEntity&lt;&gt;(response, HttpStatus.valueOf(ErrorCode.HANDLE_ACCESS_DENIED.getStatus()));    &#125;    @ExceptionHandler(BusinessException.class)    protected ResponseEntity&lt;ErrorResponse&gt; handleBusinessException(final BusinessException e) &#123;        log.error(&quot;handleEntityNotFoundException&quot;, e);        final ErrorCode errorCode = e.getErrorCode();        final ErrorResponse response = ErrorResponse.of(errorCode);        return new ResponseEntity&lt;&gt;(response, HttpStatus.valueOf(errorCode.getStatus()));    &#125;    @ExceptionHandler(Exception.class)    protected ResponseEntity&lt;ErrorResponse&gt; handleException(Exception e) &#123;        log.error(&quot;handleEntityNotFoundException&quot;, e);        final ErrorResponse response = ErrorResponse.of(ErrorCode.INTERNAL_SERVER_ERROR);        return new ResponseEntity&lt;&gt;(response, HttpStatus.INTERNAL_SERVER_ERROR);    &#125;&#125;\n\n\nhandleMethodArgumentNotValidException\navax.validation.Valid or @Validated 으로 binding error 발생시 발생한다. )\nHttpMessageConverter 에서 등록한 HttpMessageConverter binding 못할경우 발생 주로 @RequestBody, @RequestPart 어노테이션에서 발생\n\n\nhandleBindException\n@ModelAttribut 으로 binding error 발생시 BindException 발생한다.\n\n\nMethodArgumentTypeMismatchException\nenum type 일치하지 않아 binding 못할 경우 발생\n주로 @RequestParam enum으로 binding 못했을 경우 발생\n\n\nhandleHttpRequestMethodNotSupportedException :\n지원하지 않은 HTTP method 호출 할 경우 발생\n\n\nhandleAccessDeniedException\nAuthentication 객체가 필요한 권한을 보유하지 않은 경우 발생합\nSecurity에서 던지는 예외\n\n\nhandleException\n그 밖에 발생하는 모든 예외 처리, Null Point Exception, 등등\n개발자가 직접 핸들링해서 다른 예외로 던지지 않으면 모두 이곳으로 모인다.\n\n\nhandleBusinessException\n비즈니스 요규사항에 따른 Exception\n아래에서 자세한 설명 진행\n\n\n\n추가로 스프링 및 라이브러리 등 자체적으로 발생하는 예외는 @ExceptionHandler 으로 추가해서 적절한 Error Response를 만들고 비즈니스 요구사항에 예외일 경우 BusinessException 으로 통일성 있게 처리하는 것을 목표로 한다. 추가로 늘어날 수는 있겠지만 그 개수를 최소한으로 하는 노력이 필요합니다.\nError Code 정의#1234567891011121314151617181920212223public enum ErrorCode &#123;    // Common    INVALID_INPUT_VALUE(400, &quot;C001&quot;, &quot; Invalid Input Value&quot;),    METHOD_NOT_ALLOWED(405, &quot;C002&quot;, &quot; Invalid Input Value&quot;),    ....    HANDLE_ACCESS_DENIED(403, &quot;C006&quot;, &quot;Access is Denied&quot;),    // Member    EMAIL_DUPLICATION(400, &quot;M001&quot;, &quot;Email is Duplication&quot;),    LOGIN_INPUT_INVALID(400, &quot;M002&quot;, &quot;Login input is invalid&quot;),    ;    private final String code;    private final String message;    private int status;    ErrorCode(final int status, final String code, final String message) &#123;        this.status = status;        this.message = message;        this.code = code;    &#125;&#125;\n에러 코드는 enum 타입으로 한 곳에서 관리합니다.\n에러 코드가 전체적으로 흩어져있을 경우 코드, 메시지의 중복을 방지하기 어렵고 전체적으로 관리하는 것이 매우 어렵습니다. C001 같은 코드도 동일하게 enum으로 관리 하는 것도 좋습니다. 에러 메시지는 Common과 각 도메인별로 관리하는 것이 효율적일 거 같습니다.\nBusiness Exception 처리#여기서 말하는 Business Exception은 요구사항에 맞지 않을 경우 발생시키는 Exception을 말합니다. 만약 쿠폰을 사용 하려고 하는데 이미 사용한 쿠폰인 경우에는 더 이상 정상적인 흐름을 이어갈수가 없게 됩니다. 이런 경우에는 적절한 Exception을 발생시키고 로직을 종료 시켜야합니다.\n더 쉽게 정리하면 요구사항에 맞게 개발자가 직접 Exception을 발생시키는 것들이 Business Exception 이라고 할수 있습니다.\n유지 보수하기 좋은 코드를 만들기 위해서는 Exception을 발생시켜야 합니다. 쿠폰을 입력해서 상품을 주문했을 경우 상품 계산 로직에서 이미 사용해 버린 쿠폰이면 로직을 이어나가기는 어렵습니다.\n단순히 어려운 것이 아니라 해당 계산 로직의 책임이 증가하게 됩니다. 계산 로직은 특정 공식에 의해서 제품의 가격을 계산하는 것이 책임이지 쿠폰이 이미 사용 해 경우, 쿠폰이 만료되었을 경우, 제품이 매진 됐을 경우 등등의 책임을 갖게 되는 순간 유지 보수하기 어려운 코드가 됩니다. 객체의 적절한 책임을 주기 위해서라도 본인이 처리 못 하는 상황일 경우 적절한 Exception을 발생시켜야 합니다.\n\n클린 코드 : 오류 코드 보다 예외를 사용하라 리팩토링\n\n12345678910111213141516171819202122public class DeviceController &#123;    ...    public void sendShutDown() &#123;        DeviceHandle handle = getHandle(DEV1);        // 디바이스 상태를 점검한다.        if (handle != DeviceHandle.INVALID) &#123;            // 레코드 필드에 디바이스 상태를 저장한다.            retrieveDeviceRecord(handle);            // 디바이스가 일시정지 상태가 아니라면 종료한다.            if (record.getStatus() != DEVICE_SUSPENDED) &#123;                pauseDevice(handle);                clearDeviceWorkQueue(handle);                closeDevice(handle);            &#125; else &#123;                logger.log(&quot;Device suspended. Unable to shut down&quot;);            &#125;        &#125; else &#123;            logger.log(&quot;Invalid handle for: &quot; + DEV1.toString());        &#125;    &#125;    ...&#125;\nif ... else의 반복으로 인해서 sendShutDown 핵심 비즈니스 코드의 이해하기가 어렵습니다.\n12345678910111213141516171819202122232425public class DeviceController &#123;    ...    public void sendShutDown() &#123;        try &#123;            tryToShutDown();        &#125; catch (DeviceShutDownError e) &#123;            logger.log(e);        &#125;    &#125;    private void tryToShutDown() throws DeviceShutDownError &#123;        DeviceHandle handle = getHandle(DEV1);        DeviceRecord record = retrieveDeviceRecord(handle);        pauseDevice(handle);        clearDeviceWorkQueue(handle);        closeDevice(handle);    &#125;    private DeviceHandle getHandle(DeviceID id) &#123;        ...        throw new DeviceShutDownError(&quot;Invalid handle for: &quot; + id.toString());        ...    &#125;    ...&#125;\n객체 본인의 책임 외적인 것들은 DeviceShutDownError 예외를 발생시키고 있습니다. 코드의 가독성과 책임이 분명하게 드러나고 있습니다.\n비즈니스 예외를 위한 최상위 BusinessException 클래스#\n최상위 BusinessException을 상속 받는 InvalidValueException, EntityNotFoundExceptuon 등이 있습니다.\n\nInvalidValueException : 유효하지 않은 값일 경우 예외를 던지는 Excetion\n쿠폰 만료, 이미 사용한 쿠폰 등의 이유로 더이상 진행이 못할경우\n\n\nEntityNotFoundException : 각 엔티티들을 못찾았을 경우\nfindById, findByCode 메서드에서 조회가 안되었을 경우\n\n\n\n최상위 BusinessException을 기준으로 예외를 발생시키면 통일감 있는 예외 처리를 가질 수 있습니다. 비니지스 로직을 수행하는 코드 흐름에서 로직의 흐름을 진행할 수 없는 상태인 경우에는 적절한 BusinessException 중에 하나를 예외를 발생 시키거나 직접 정의하게 됩니다.\n1234567@ExceptionHandler(BusinessException.class)protected ResponseEntity&lt;ErrorResponse&gt; handleBusinessException(final BusinessException e) &#123;    log.error(&quot;handleEntityNotFoundException&quot;, e);    final ErrorCode errorCode = e.getErrorCode();    final ErrorResponse response = ErrorResponse.of(errorCode);    return new ResponseEntity&lt;&gt;(response, HttpStatus.valueOf(errorCode.getStatus()));&#125;\n이렇게 발생하는 모든 예외는 handleBusinessException 에서 동일하게 핸들링 됩니다. 예외 발생시 알람을 받는 등의 추가적인 행위도 손쉽게 가능합니다. 또 BusinessException 클래스의 하위 클래스 중에서 특정 예외에 대해서 다른 알람을 받는 등의 더 디테일한 핸들링도 가능해집니다.\nCoupon Code#123456789101112131415161718public class Coupon &#123;    ...    public void use() &#123;        verifyExpiration();        verifyUsed();        this.used = true;    &#125;    private void verifyUsed() &#123;        if (used) throw new CouponAlreadyUseException();    &#125;    private void verifyExpiration() &#123;        if (LocalDate.now().isAfter(getExpirationDate())) throw new CouponExpireException();    &#125;&#125;\n쿠폰의 use 메서드입니다. 만료일과 사용 여부를 확인하고 예외가 발생하면 적절한 Exception을 발생시킵니다.\n컨트롤러 예외 처리#컨틀롤러에서 모든 요청에 대한 값 검증을 진행하고 이상이 없을 시에 서비스 레이어를 호출해야 합니다. 위에서도 언급했듯이 잘못된 값이 있으면 서비스 레이어에서 정상적인 작업을 진행하기 어렵습니다. 무엇보다 컨틀롤러의 책임을 다하고 있지 않으면 그 책임은 자연스럽게 다른 레이어로 전해지게 되며 이렇게 넘겨받은 책임을 처리하는데 큰 비용과 유지보수 하기 어려워질 수밖에 없습니다.\n컨트롤러의 중요한 책임 중의 하나는 요청에 대한 값 검증이 있습니다. 스프링은 JSR 303 기반 어노테이션으로 값 검증을 쉽고 일관성 있게 처리할 수 있도록 도와줍니다. 모든 예외는 @ControllerAdvice 선언된 객체에서 핸들링 됩니다. 컨트롤러로 본인이 직접 예외까지 처리하지 않고 예외가 발생하면 그냥 던져버리는 패턴으로 일관성 있게 개발할 수 있습니다.\nController#123456789101112@RestController@RequestMapping(&quot;/members&quot;)public class MemberApi &#123;    private final MemberSignUpService memberSignUpService;    @PostMapping    public MemberResponse create(@RequestBody @Valid final SignUpRequest dto) &#123;        final Member member = memberSignUpService.doSignUp(dto);        return new MemberResponse(member);    &#125;&#125;\n123456789101112131415public class SignUpRequest &#123;    @Valid private Email email;    @Valid private Name name;&#125;public class Name &#123;    @NotEmpty private String first;    private String middle;    @NotEmpty private String last;&#125;public class Email &#123;    @javax.validation.constraints.Email    private String value;&#125;\n\n회원 가입 Reuqest Body 중에서 유효하지 않은 값이 있을 때 @Valid 어노테이션으로 예외를 발생시킬 수 있습니다. 이 예외는 @ControllerAdvice에서 적절하게 핸들링 됩니다. @NotEmpty, @Email 외에도 다양한 어노테이션들이 제공됩니다.\nTry Catch 전략#기본적으로 예외가 발생하면 로직의 흐름을 끊고 종료 시켜야 합니다물론 예외도 있지만, 최대한 예외를 발생시켜 종료하는 것을 지향해야 한다고 생각합니다.)\n12345try &#123;    // 비즈니스 로직 수행...&#125;catch (Exception e)&#123;    e.printStackTrace();&#125;\n위 같은 코드는 지양하야 하는 패턴입니다. 최소한의 양심으로 e.printStackTrace(); 로그라도 출력했지만 이미 예외가 발생했음에도 불가하고 다음 로직을 실행하게 됩니다. 이런 식의 try catch를 최대한 지양해야 합니다.\n하지만 Checked Exception 같은 경우에는 예외를 반드시 감싸야 하므로 이러한 경우에는 try catch를 사용해야 합니다.\n123456try &#123;    // 비즈니스 로직 수행...&#125;catch (Exception e)&#123;    e.printStackTrace();    throw new XXX비즈니스로직예외(e);&#125;\ntry catch를 사용해야 하는 경우라면 더 구체적인 예외로 Exception을 발생시키는 것이 좋습니다. 간단하게 정리하면\n\ntry catch를 최대한 지양해라\ntry catch로 에러를 먹고 주는 코드는 지양해라(이런 코드가 있다면 로그라도 추가해주세요…)\ntry catch를 사용하게 된다면 더 구체적인 Exception을 발생시키는 것이 좋다.\n\n","dateCreated":"2019-02-21T02:20:00+09:00","dateModified":"2025-02-02T13:43:50+09:00","datePublished":"2019-02-21T02:20:00+09:00","description":"스프링은 예외처리를 위해 다양하고 막강한 어노테이션을 제공하고 있습니다. 일관성 있는 코드 스타일을 유지하면서 Exception을 처리하는 방법에 대해서 소개하겠습니다.","headline":"Spring Guide - Exception 전략","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://cheese10yun.github.io/spring-guide-exception/"},"publisher":{"@type":"Organization","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg","logo":{"@type":"ImageObject","url":"yun-icon.jpg"}},"url":"https://cheese10yun.github.io/spring-guide-exception/","keywords":"Spring, Exception"}</script>
    <meta name="description" content="스프링은 예외처리를 위해 다양하고 막강한 어노테이션을 제공하고 있습니다. 일관성 있는 코드 스타일을 유지하면서 Exception을 처리하는 방법에 대해서 소개하겠습니다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Spring Guide - Exception 전략">
<meta property="og:url" content="https://cheese10yun.github.io/spring-guide-exception/index.html">
<meta property="og:site_name" content="Yun Blog">
<meta property="og:description" content="스프링은 예외처리를 위해 다양하고 막강한 어노테이션을 제공하고 있습니다. 일관성 있는 코드 스타일을 유지하면서 Exception을 처리하는 방법에 대해서 소개하겠습니다.">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://github.com/cheese10yun/spring-guide/raw/master/docs/imgs/BusinessException-final.png">
<meta property="article:published_time" content="2019-02-20T17:20:00.000Z">
<meta property="article:modified_time" content="2025-02-02T04:43:50.870Z">
<meta property="article:author" content="Yun">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="Exception">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/cheese10yun/spring-guide/raw/master/docs/imgs/BusinessException-final.png">
    
    
        
    
    
        <meta property="og:image" content="https://cheese10yun.github.io/assets/images/yun-icon.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90907312-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90907312-1');
    </script>


    

    
        
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5813739623204880" crossorigin="anonymous"></script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Yun Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="저자에 대해 더 알아보기"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
                </a>
                <h4 class="sidebar-profile-name">Yun</h4>
                
                    <h5 class="sidebar-profile-bio"><p>기술 블로그</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/cheese10yun"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/rss2.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Spring Guide - Exception 전략
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-02-21T02:20:00+09:00">
	
		    2019/02/21
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <blockquote>
<p>해당 코드는 <a target="_blank" rel="noopener" href="https://github.com/cheese10yun/spring-guide">Github</a>를 확인해주세요.</p>
</blockquote>
<h1><span id="exception-guide">Exception Guide</span><a href="#exception-guide" class="header-anchor">#</a></h1><p>스프링은 예외처리를 위해 다양하고 막강한 어노테이션을 제공하고 있습니다. 일관성 있는 코드 스타일을 유지하면서 Exception을 처리하는 방법에 대해서 소개하겠습니다.</p>
<h1><span id="tongildoen-error-response-gaegce">통일된 Error Response 객체</span><a href="#tongildoen-error-response-gaegce" class="header-anchor">#</a></h1><p>Error Response 객체는 항상 동일한 Error Response를 가져야 합니다. 그렇지 않으면 클라이언트에서 예외 처리를 항상 동일한 로직으로 처리하기 어렵습니다. Error Response 객체를 유연하게 처리하기 위해서 간혹 <code>Map&lt;Key, Value&gt;</code> 형식으로 처리하는데 이는 좋지 않다고 생각합니다. 우선 Map 이라는 친구는 런타입시에 정확한 형태를 갖추기 때문에 객체를 처리하는 개발자들도 정확히 무슨 키에 무슨 데이터가 있는지 확인하기 어렵습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line"><span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleMethodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException e)</span> &#123;</span><br><span class="line">    log.error(<span class="string">&quot;handleMethodArgumentNotValidException&quot;</span>, e);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(ErrorCode.INVALID_INPUT_VALUE, e.getBindingResult());</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.BAD_REQUEST);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 예제 코드처럼 리턴 타입이 <code>ResponseEntity&lt;ErrorResponse&gt;</code> 으로 무슨 데이터가 어떻게 있는지 명확하게 추론하기 쉽도록 구성하는 게 바람직합니다.</p>
<h2><span id="error-response-json">Error Response JSON</span><a href="#error-response-json" class="header-anchor">#</a></h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot; Invalid Input Value&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">400</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// &quot;errors&quot;:[], 비어있을 경우 null 이 아닌 빈 배열을 응답한다.</span></span><br><span class="line">  <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;name.last&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;must not be empty&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;name.first&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;must not be empty&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C001&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ErrorResponse 객체의 JSON 입니다.</p>
<ul>
<li>message : 에러에 대한 message를 작성합니다.</li>
<li>status : http status code를 작성합니다. header 정보에도 포함된 정보이니 굳이 추가하지 않아도 됩니다.</li>
<li>errors : 요청 값에 대한 <code>field</code>, <code>value</code>, <code>reason</code> 작성합니다. 일반적으로 <code>@Valid</code> 어노테이션으로 <code>JSR 303: Bean Validation</code>에 대한 검증을 진행 합니다.<ul>
<li>만약 errors에 바인인된 결과가 없을 경우 null이 아니라 빈 배열 <code>[]</code>을 응답해줍니다. null 객체는 절대 리턴하지 않습니다. null이 의미하는 것이 애매합니다.</li>
</ul>
</li>
<li>code : 에러에 할당되는 유니크한 코드값입니다.</li>
</ul>
<h2><span id="error-response-gaegce">Error Response 객체</span><a href="#error-response-gaegce" class="header-anchor">#</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@NoArgsConstructor(access = AccessLevel.PROTECTED)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ErrorResponse</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> status;</span><br><span class="line">    <span class="keyword">private</span> List&lt;FieldError&gt; errors;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="meta">@NoArgsConstructor(access = AccessLevel.PROTECTED)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">FieldError</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String field;</span><br><span class="line">        <span class="keyword">private</span> String value;</span><br><span class="line">        <span class="keyword">private</span> String reason;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ErrorResponse 객체 입니다. POJO 객체로 관리하면 <code>errorResponse.getXXX();</code> 이렇게 명확하게 객체에 있는 값을 가져올 수 있습니다. 그 밖에 특정 Exception에 대해서 ErrorResponse 객체를 어떻게 만들 것인가에 대한 책임을 명확하게 갖는 구조로 설계할 수 있습니다. 세부적인 것은 코드를 확인해주세요.</p>
<h1><span id="controlleradvicero-modeun-yeoereul-haendeulring">@ControllerAdvice로 모든 예외를 핸들링</span><a href="#controlleradvicero-modeun-yeoereul-haendeulring" class="header-anchor">#</a></h1><p><code>@ControllerAdvice</code> 어노테이션으로 모든 예외를 한 곳에서 처리할 수 있습니다. 해당 코드의 세부적인 것은 중요하지 않으며 가장 기본적이며 필수적으로 처리하는 코드입니다. 코드에 대한 이해보다 아래의 설명을 참고하는 게 좋습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  javax.validation.Valid or <span class="doctag">@Validated</span> 으로 binding error 발생시 발생한다.</span></span><br><span class="line"><span class="comment">     *  HttpMessageConverter 에서 등록한 HttpMessageConverter binding 못할경우 발생</span></span><br><span class="line"><span class="comment">     *  주로 <span class="doctag">@RequestBody</span>, <span class="doctag">@RequestPart</span> 어노테이션에서 발생</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line">    <span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleMethodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;handleMethodArgumentNotValidException&quot;</span>, e);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(ErrorCode.INVALID_INPUT_VALUE, e.getBindingResult());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.BAD_REQUEST);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@ModelAttribut</span> 으로 binding error 발생시 BindException 발생한다.</span></span><br><span class="line"><span class="comment">     * ref https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-modelattrib-method-args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(BindException.class)</span></span><br><span class="line">    <span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleBindException</span><span class="params">(BindException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;handleBindException&quot;</span>, e);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(ErrorCode.INVALID_INPUT_VALUE, e.getBindingResult());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.BAD_REQUEST);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * enum type 일치하지 않아 binding 못할 경우 발생</span></span><br><span class="line"><span class="comment">     * 주로 <span class="doctag">@RequestParam</span> enum으로 binding 못했을 경우 발생</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(MethodArgumentTypeMismatchException.class)</span></span><br><span class="line">    <span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleMethodArgumentTypeMismatchException</span><span class="params">(MethodArgumentTypeMismatchException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;handleMethodArgumentTypeMismatchException&quot;</span>, e);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(e);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.BAD_REQUEST);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 지원하지 않은 HTTP method 호출 할 경우 발생</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(HttpRequestMethodNotSupportedException.class)</span></span><br><span class="line">    <span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleHttpRequestMethodNotSupportedException</span><span class="params">(HttpRequestMethodNotSupportedException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;handleHttpRequestMethodNotSupportedException&quot;</span>, e);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(ErrorCode.METHOD_NOT_ALLOWED);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.METHOD_NOT_ALLOWED);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Authentication 객체가 필요한 권한을 보유하지 않은 경우 발생합</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(AccessDeniedException.class)</span></span><br><span class="line">    <span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleAccessDeniedException</span><span class="params">(AccessDeniedException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;handleAccessDeniedException&quot;</span>, e);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(ErrorCode.HANDLE_ACCESS_DENIED);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.valueOf(ErrorCode.HANDLE_ACCESS_DENIED.getStatus()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line">    <span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleBusinessException</span><span class="params">(<span class="keyword">final</span> BusinessException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;handleEntityNotFoundException&quot;</span>, e);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ErrorCode</span> <span class="variable">errorCode</span> <span class="operator">=</span> e.getErrorCode();</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(errorCode);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.valueOf(errorCode.getStatus()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleException</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;handleEntityNotFoundException&quot;</span>, e);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(ErrorCode.INTERNAL_SERVER_ERROR);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.INTERNAL_SERVER_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>handleMethodArgumentNotValidException<ul>
<li>avax.validation.Valid or @Validated 으로 binding error 발생시 발생한다. )</li>
<li>HttpMessageConverter 에서 등록한 HttpMessageConverter binding 못할경우 발생 주로 @RequestBody, @RequestPart 어노테이션에서 발생</li>
</ul>
</li>
<li>handleBindException<ul>
<li>@ModelAttribut 으로 binding error 발생시 BindException 발생한다.</li>
</ul>
</li>
<li>MethodArgumentTypeMismatchException<ul>
<li>enum type 일치하지 않아 binding 못할 경우 발생</li>
<li>주로 @RequestParam enum으로 binding 못했을 경우 발생</li>
</ul>
</li>
<li>handleHttpRequestMethodNotSupportedException :<ul>
<li>지원하지 않은 HTTP method 호출 할 경우 발생</li>
</ul>
</li>
<li>handleAccessDeniedException<ul>
<li>Authentication 객체가 필요한 권한을 보유하지 않은 경우 발생합</li>
<li>Security에서 던지는 예외</li>
</ul>
</li>
<li>handleException<ul>
<li>그 밖에 발생하는 모든 예외 처리, Null Point Exception, 등등</li>
<li>개발자가 직접 핸들링해서 다른 예외로 던지지 않으면 모두 이곳으로 모인다.</li>
</ul>
</li>
<li>handleBusinessException<ul>
<li>비즈니스 요규사항에 따른 Exception</li>
<li>아래에서 자세한 설명 진행</li>
</ul>
</li>
</ul>
<p>추가로 스프링 및 라이브러리 등 자체적으로 발생하는 예외는 <code>@ExceptionHandler</code> 으로 추가해서 적절한 Error Response를 만들고 <strong>비즈니스 요구사항에 예외일 경우 <code>BusinessException</code> 으로 통일성 있게 처리하는 것을 목표로 한다. 추가로 늘어날 수는 있겠지만 그 개수를 최소한으로 하는 노력이 필요합니다.</strong></p>
<h1><span id="error-code-jeongyi">Error Code 정의</span><a href="#error-code-jeongyi" class="header-anchor">#</a></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ErrorCode</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Common</span></span><br><span class="line">    INVALID_INPUT_VALUE(<span class="number">400</span>, <span class="string">&quot;C001&quot;</span>, <span class="string">&quot; Invalid Input Value&quot;</span>),</span><br><span class="line">    METHOD_NOT_ALLOWED(<span class="number">405</span>, <span class="string">&quot;C002&quot;</span>, <span class="string">&quot; Invalid Input Value&quot;</span>),</span><br><span class="line">    ....</span><br><span class="line">    HANDLE_ACCESS_DENIED(<span class="number">403</span>, <span class="string">&quot;C006&quot;</span>, <span class="string">&quot;Access is Denied&quot;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Member</span></span><br><span class="line">    EMAIL_DUPLICATION(<span class="number">400</span>, <span class="string">&quot;M001&quot;</span>, <span class="string">&quot;Email is Duplication&quot;</span>),</span><br><span class="line">    LOGIN_INPUT_INVALID(<span class="number">400</span>, <span class="string">&quot;M002&quot;</span>, <span class="string">&quot;Login input is invalid&quot;</span>),</span><br><span class="line"></span><br><span class="line">    ;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String code;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String message;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> status;</span><br><span class="line"></span><br><span class="line">    ErrorCode(<span class="keyword">final</span> <span class="type">int</span> status, <span class="keyword">final</span> String code, <span class="keyword">final</span> String message) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>에러 코드는 enum 타입으로 한 곳에서 관리합니다.</p>
<p>에러 코드가 전체적으로 흩어져있을 경우 코드, 메시지의 중복을 방지하기 어렵고 전체적으로 관리하는 것이 매우 어렵습니다. <code>C001</code> 같은 코드도 동일하게 enum으로 관리 하는 것도 좋습니다. 에러 메시지는 Common과 각 도메인별로 관리하는 것이 효율적일 거 같습니다.</p>
<h1><span id="business-exception-ceori">Business Exception 처리</span><a href="#business-exception-ceori" class="header-anchor">#</a></h1><p>여기서 말하는 Business Exception은 요구사항에 맞지 않을 경우 발생시키는 Exception을 말합니다. 만약 쿠폰을 사용 하려고 하는데 이미 사용한 쿠폰인 경우에는 더 이상 정상적인 흐름을 이어갈수가 없게 됩니다. 이런 경우에는 적절한 Exception을 발생시키고 로직을 종료 시켜야합니다.</p>
<p>더 쉽게 정리하면 요구사항에 맞게 개발자가 직접 Exception을 발생시키는 것들이 Business Exception 이라고 할수 있습니다.</p>
<p>유지 보수하기 좋은 코드를 만들기 위해서는 Exception을 발생시켜야 합니다. 쿠폰을 입력해서 상품을 주문했을 경우 상품 계산 로직에서 이미 사용해 버린 쿠폰이면 로직을 이어나가기는 어렵습니다.</p>
<p>단순히 어려운 것이 아니라 해당 계산 로직의 책임이 증가하게 됩니다. 계산 로직은 특정 공식에 의해서 제품의 가격을 계산하는 것이 책임이지 쿠폰이 이미 사용 해 경우, 쿠폰이 만료되었을 경우, 제품이 매진 됐을 경우 등등의 책임을 갖게 되는 순간 유지 보수하기 어려운 코드가 됩니다. 객체의 적절한 책임을 주기 위해서라도 본인이 처리 못 하는 상황일 경우 적절한 Exception을 발생시켜야 합니다.</p>
<blockquote>
<p>클린 코드 : 오류 코드 보다 예외를 사용하라 리팩토링</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeviceController</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendShutDown</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DeviceHandle</span> <span class="variable">handle</span> <span class="operator">=</span> getHandle(DEV1);</span><br><span class="line">        <span class="comment">// 디바이스 상태를 점검한다.</span></span><br><span class="line">        <span class="keyword">if</span> (handle != DeviceHandle.INVALID) &#123;</span><br><span class="line">            <span class="comment">// 레코드 필드에 디바이스 상태를 저장한다.</span></span><br><span class="line">            retrieveDeviceRecord(handle);</span><br><span class="line">            <span class="comment">// 디바이스가 일시정지 상태가 아니라면 종료한다.</span></span><br><span class="line">            <span class="keyword">if</span> (record.getStatus() != DEVICE_SUSPENDED) &#123;</span><br><span class="line">                pauseDevice(handle);</span><br><span class="line">                clearDeviceWorkQueue(handle);</span><br><span class="line">                closeDevice(handle);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                logger.log(<span class="string">&quot;Device suspended. Unable to shut down&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            logger.log(<span class="string">&quot;Invalid handle for: &quot;</span> + DEV1.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>if ... else</code>의 반복으로 인해서 sendShutDown 핵심 비즈니스 코드의 이해하기가 어렵습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeviceController</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendShutDown</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            tryToShutDown();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DeviceShutDownError e) &#123;</span><br><span class="line">            logger.log(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">tryToShutDown</span><span class="params">()</span> <span class="keyword">throws</span> DeviceShutDownError &#123;</span><br><span class="line">        <span class="type">DeviceHandle</span> <span class="variable">handle</span> <span class="operator">=</span> getHandle(DEV1);</span><br><span class="line">        <span class="type">DeviceRecord</span> <span class="variable">record</span> <span class="operator">=</span> retrieveDeviceRecord(handle);</span><br><span class="line">        pauseDevice(handle);</span><br><span class="line">        clearDeviceWorkQueue(handle);</span><br><span class="line">        closeDevice(handle);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DeviceHandle <span class="title function_">getHandle</span><span class="params">(DeviceID id)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeviceShutDownError</span>(<span class="string">&quot;Invalid handle for: &quot;</span> + id.toString());</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>객체 본인의 책임 외적인 것들은 DeviceShutDownError 예외를 발생시키고 있습니다. 코드의 가독성과 책임이 분명하게 드러나고 있습니다.</p>
<h2><span id="bijeuniseu-yeoereul-wihan-coesangwi-businessexception-keulraeseu">비즈니스 예외를 위한 최상위 BusinessException 클래스</span><a href="#bijeuniseu-yeoereul-wihan-coesangwi-businessexception-keulraeseu" class="header-anchor">#</a></h2><p><img src="https://github.com/cheese10yun/spring-guide/raw/master/docs/imgs/BusinessException-final.png"></p>
<p>최상위 BusinessException을 상속 받는 InvalidValueException, EntityNotFoundExceptuon 등이 있습니다.</p>
<ul>
<li>InvalidValueException : 유효하지 않은 값일 경우 예외를 던지는 Excetion<ul>
<li>쿠폰 만료, 이미 사용한 쿠폰 등의 이유로 더이상 진행이 못할경우</li>
</ul>
</li>
<li>EntityNotFoundException : 각 엔티티들을 못찾았을 경우<ul>
<li><code>findById</code>, <code>findByCode</code> 메서드에서 조회가 안되었을 경우</li>
</ul>
</li>
</ul>
<p>최상위 BusinessException을 기준으로 예외를 발생시키면 통일감 있는 예외 처리를 가질 수 있습니다. 비니지스 로직을 수행하는 코드 흐름에서 로직의 흐름을 진행할 수 없는 상태인 경우에는 적절한 BusinessException 중에 하나를 예외를 발생 시키거나 직접 정의하게 됩니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line"><span class="keyword">protected</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title function_">handleBusinessException</span><span class="params">(<span class="keyword">final</span> BusinessException e)</span> &#123;</span><br><span class="line">    log.error(<span class="string">&quot;handleEntityNotFoundException&quot;</span>, e);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">ErrorCode</span> <span class="variable">errorCode</span> <span class="operator">=</span> e.getErrorCode();</span><br><span class="line">    <span class="keyword">final</span> <span class="type">ErrorResponse</span> <span class="variable">response</span> <span class="operator">=</span> ErrorResponse.of(errorCode);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(response, HttpStatus.valueOf(errorCode.getStatus()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이렇게 발생하는 모든 예외는 <code>handleBusinessException</code> 에서 동일하게 핸들링 됩니다. 예외 발생시 알람을 받는 등의 추가적인 행위도 손쉽게 가능합니다. 또 BusinessException 클래스의 하위 클래스 중에서 특정 예외에 대해서 다른 알람을 받는 등의 더 디테일한 핸들링도 가능해집니다.</p>
<h2><span id="coupon-code">Coupon Code</span><a href="#coupon-code" class="header-anchor">#</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Coupon</span> &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">use</span><span class="params">()</span> &#123;</span><br><span class="line">        verifyExpiration();</span><br><span class="line">        verifyUsed();</span><br><span class="line">        <span class="built_in">this</span>.used = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">verifyUsed</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (used) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CouponAlreadyUseException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">verifyExpiration</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (LocalDate.now().isAfter(getExpirationDate())) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CouponExpireException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>쿠폰의 <code>use</code> 메서드입니다. 만료일과 사용 여부를 확인하고 예외가 발생하면 적절한 Exception을 발생시킵니다.</p>
<h1><span id="keonteurolreo-yeoe-ceori">컨트롤러 예외 처리</span><a href="#keonteurolreo-yeoe-ceori" class="header-anchor">#</a></h1><p>컨틀롤러에서 모든 요청에 대한 값 검증을 진행하고 이상이 없을 시에 서비스 레이어를 호출해야 합니다. 위에서도 언급했듯이 잘못된 값이 있으면 서비스 레이어에서 정상적인 작업을 진행하기 어렵습니다. <strong>무엇보다 컨틀롤러의 책임을 다하고 있지 않으면 그 책임은 자연스럽게 다른 레이어로 전해지게 되며 이렇게 넘겨받은 책임을 처리하는데 큰 비용과 유지보수 하기 어려워질 수밖에 없습니다.</strong></p>
<p>컨트롤러의 중요한 책임 중의 하나는 요청에 대한 값 검증이 있습니다. 스프링은 JSR 303 기반 어노테이션으로 값 검증을 쉽고 일관성 있게 처리할 수 있도록 도와줍니다. 모든 예외는 <code>@ControllerAdvice</code> 선언된 객체에서 핸들링 됩니다. 컨트롤러로 본인이 직접 예외까지 처리하지 않고 예외가 발생하면 그냥 던져버리는 패턴으로 일관성 있게 개발할 수 있습니다.</p>
<h2><span id="controller">Controller</span><a href="#controller" class="header-anchor">#</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/members&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberApi</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MemberSignUpService memberSignUpService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> MemberResponse <span class="title function_">create</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> <span class="keyword">final</span> SignUpRequest dto)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Member</span> <span class="variable">member</span> <span class="operator">=</span> memberSignUpService.doSignUp(dto);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MemberResponse</span>(member);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SignUpRequest</span> &#123;</span><br><span class="line">    <span class="meta">@Valid</span> <span class="keyword">private</span> Email email;</span><br><span class="line">    <span class="meta">@Valid</span> <span class="keyword">private</span> Name name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Name</span> &#123;</span><br><span class="line">    <span class="meta">@NotEmpty</span> <span class="keyword">private</span> String first;</span><br><span class="line">    <span class="keyword">private</span> String middle;</span><br><span class="line">    <span class="meta">@NotEmpty</span> <span class="keyword">private</span> String last;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Email</span> &#123;</span><br><span class="line">    <span class="meta">@javax</span>.validation.constraints.Email</span><br><span class="line">    <span class="keyword">private</span> String value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>회원 가입 Reuqest Body 중에서 유효하지 않은 값이 있을 때 <code>@Valid</code> 어노테이션으로 예외를 발생시킬 수 있습니다. 이 예외는 <code>@ControllerAdvice</code>에서 적절하게 핸들링 됩니다. <code>@NotEmpty</code>, <code>@Email</code> 외에도 다양한 어노테이션들이 제공됩니다.</p>
<h1><span id="try-catch-jeonryag">Try Catch 전략</span><a href="#try-catch-jeonryag" class="header-anchor">#</a></h1><p>기본적으로 예외가 발생하면 로직의 흐름을 끊고 종료 시켜야 합니다물론 예외도 있지만, 최대한 예외를 발생시켜 종료하는 것을 지향해야 한다고 생각합니다.)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 비즈니스 로직 수행...</span></span><br><span class="line">&#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 같은 코드는 지양하야 하는 패턴입니다. 최소한의 양심으로 <code>e.printStackTrace();</code> 로그라도 출력했지만 이미 예외가 발생했음에도 불가하고 다음 로직을 실행하게 됩니다. 이런 식의 <code>try catch</code>를 최대한 지양해야 합니다.</p>
<p>하지만 Checked Exception 같은 경우에는 예외를 반드시 감싸야 하므로 이러한 경우에는 <code>try catch</code>를 사용해야 합니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 비즈니스 로직 수행...</span></span><br><span class="line">&#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">XXX</span>비즈니스로직예외(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>try catch</code>를 사용해야 하는 경우라면 더 구체적인 예외로 Exception을 발생시키는 것이 좋습니다. 간단하게 정리하면</p>
<ol>
<li><code>try catch</code>를 최대한 지양해라</li>
<li><code>try catch</code>로 에러를 먹고 주는 코드는 지양해라(이런 코드가 있다면 로그라도 추가해주세요…)</li>
<li><code>try catch</code>를 사용하게 된다면 더 구체적인 Exception을 발생시키는 것이 좋다.</li>
</ol>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Exception/" rel="tag">Exception</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Spring/" rel="tag">Spring</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/intellij-exclude/"
                    data-tooltip="인텔리제이 특정 Import 제외 하기"
                    aria-label="이전: 인텔리제이 특정 Import 제외 하기"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/spring-guide-test-1/"
                    data-tooltip="Spring Guide - 테스트 전략"
                    aria-label="다음: Spring Guide - 테스트 전략"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-guide-exception/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-guide-exception/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        

                
                    <!--  utteranc comment -->

<script src="https://utteranc.es/client.js"
        repo="cheese10yun/blog-comment"
        issue-term="title"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

                

            
        
    </div>
</article>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Yun. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/intellij-exclude/"
                    data-tooltip="인텔리제이 특정 Import 제외 하기"
                    aria-label="이전: 인텔리제이 특정 Import 제외 하기"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/spring-guide-test-1/"
                    data-tooltip="Spring Guide - 테스트 전략"
                    aria-label="다음: Spring Guide - 테스트 전략"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-guide-exception/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-guide-exception/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-guide-exception/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-guide-exception/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
            <h4 id="about-card-name">Yun</h4>
        
            <div id="about-card-bio"><p>기술 블로그</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>

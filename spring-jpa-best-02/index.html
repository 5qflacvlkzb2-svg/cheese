
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Yun Blog">
    <title>Spring-Jpa Best Practices Step-02 - 효과적인 validate, 예외 처리 (1) - Yun Blog</title>
    <meta name="author" content="Yun">
    
        <meta name="keywords" content="Node,Spring,Spring Boot,Spring Batch,Kotlin,기술 블로그,JPA,Mongo,MySQL,OOP,">
    
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg"},"articleBody":"Step-02 효과적인 validate, 예외 처리 (1)API을 개발하다 보면 프런트에서 넘어온 값에 대한 유효성 검사를 수없이 진행하게 됩니다. 이러한 반복적인 작업을 보다 효율적으로 처리하고 정확한 예외 메시지를 프런트엔드에게 전달해주는 것이 목표입니다. 해당 코드는 Github를 확인해주세요.\n중요 포인트\n@Valid를 통한 유효성검사\n@ControllerAdvice를 이용한 Exception 헨들링\nErrorCode 에러 메시지 통합\n\n@Valid 를 통한 유효성검사DTO 유효성 검사 어노테이션 추가1234567891011@Getter@NoArgsConstructor(access = AccessLevel.PROTECTED)public static class SignUpReq &#123;    @Email    private String email;    @NotEmpty    private String fistName;    ...    @NotEmpty    private String zip;&#125;\n이전 단계에서 작성한 회원가입을 위한 SignUpReq.class에 새롭게 추가된 @Email, @NotEmpty 어노테이션을 추가했습니다. 이 밖에 다양한 어노테이션들이 있습니다. 아래의 컨트롤러에서  @Valid 어노테이션을 통해서 유효성 검사 가를 진행하고 유효성 검사를 실패하면 MethodArgumentNotValidException 예외가 발생합니다.\nController에서 유효성 검사12345@RequestMapping(method = RequestMethod.POST)@ResponseStatus(value = HttpStatus.CREATED)public AccountDto.Res signUp(@RequestBody @Valid final AccountDto.SignUpReq dto) &#123;    return new AccountDto.Res(accountService.create(dto));&#125;\n컨트롤러에 @Valid 어노테이션을 추가했습니다. SignUpReq 클래스의 유효성 검사가 실패했을 경우 MethodArgumentNotValidException 예외가 발생하게 됩니다. 프론트에서 넘겨받은 값에 대한 유효성 검사는 엄청난 반복적인 작업이며 실패했을 경우 사용자에게 적절한 Response 값을 리턴해주는 것 또한 중요 비즈니스 로직이 아님에도 불과하고 많은 시간을 할애하게 됩니다. 다음 부분은 MethodArgumentNotValidException 발생시 공통적으로 사용자에게 적절한 Response 값을 리턴해주는 작업을 진행하겠습니다.\n@ControllerAdvice를 이용한 Exception 헨들링12345678@ControllerAdvicepublic class ErrorExceptionController &#123;\t@ExceptionHandler(MethodArgumentNotValidException.class)\t@ResponseStatus(HttpStatus.BAD_REQUEST)\tprotected ErrorResponse handleMethodArgumentNotValidException(MethodArgumentNotValidException e) &#123;\t    retrun errorResponse...\t&#125;&#125;\n@ControllerAdvice 어노테이션을 추가하면 특정 Exception을 핸들링하여 적절한 값을 Response 값으로 리턴해줍니다. 위처럼 별다른 MethodArgumentNotValidException 핸들링을 하지 않으면 스프링 자체의 에러 Response 값을 아래와 같이 리턴해줍니다.\nError Response12345678910111213141516171819202122232425262728293031323334353637383940414243&#123;  &quot;timestamp&quot;: 1525182817519,  &quot;status&quot;: 400,  &quot;error&quot;: &quot;Bad Request&quot;,  &quot;exception&quot;: &quot;org.springframework.web.bind.MethodArgumentNotValidException&quot;,  &quot;errors&quot;: [    &#123;      &quot;codes&quot;: [        &quot;Email.signUpReq.email&quot;,        &quot;Email.email&quot;,        &quot;Email.java.lang.String&quot;,        &quot;Email&quot;      ],      &quot;arguments&quot;: [        &#123;          &quot;codes&quot;: [            &quot;signUpReq.email&quot;,            &quot;email&quot;          ],          &quot;arguments&quot;: null,          &quot;defaultMessage&quot;: &quot;email&quot;,          &quot;code&quot;: &quot;email&quot;        &#125;,        [],        &#123;          &quot;arguments&quot;: null,          &quot;defaultMessage&quot;: &quot;.*&quot;,          &quot;codes&quot;: [            &quot;.*&quot;          ]        &#125;      ],      &quot;defaultMessage&quot;: &quot;이메일 주소가 유효하지 않습니다.&quot;,      &quot;objectName&quot;: &quot;signUpReq&quot;,      &quot;field&quot;: &quot;email&quot;,      &quot;rejectedValue&quot;: &quot;string&quot;,      &quot;bindingFailure&quot;: false,      &quot;code&quot;: &quot;Email&quot;    &#125;  ],  &quot;message&quot;: &quot;Validation failed for object=&#x27;signUpReq&#x27;. Error count: 3&quot;,  &quot;path&quot;: &quot;/accounts&quot;&#125;\n너무나 많은 값을 돌려보내 주고 있으며 시스템 정보에 대한 값들도 포함되고 있어 위처럼 Response 값을 돌려보내는 것은 바람직하지 않습니다. 또 자체적으로 돌려보내 주는 Response 결과를 공통적인 포맷으로 가져가는 것은 최종적으로 프론트 엔드에서 처리해야 하므로 항상 공통적인 Response 포맷일 유지해야 합니다. 아래 Error Response 클래스를 통해서 공통적인 예외 Response 값을 갖도록 하겠습니다.\nMethodArgumentNotValidException의 Response 처리123456789101112131415161718@ExceptionHandler(MethodArgumentNotValidException.class)@ResponseStatus(HttpStatus.BAD_REQUEST)protected ErrorResponse handleMethodArgumentNotValidException(MethodArgumentNotValidException e) &#123;\tlog.error(e.getMessage());\tfinal BindingResult bindingResult = e.getBindingResult();\tfinal List&lt;FieldError&gt; errors = bindingResult.getFieldErrors();\t\treturn buildFieldErrors(\t\t\tErrorCode.INPUT_VALUE_INVALID,\t\t\terrors.parallelStream()\t\t\t\t.map(error -&gt; ErrorResponse.FieldError.builder()\t\t\t\t\t.reason(error.getDefaultMessage())\t\t\t\t\t.field(error.getField())\t\t\t\t\t.value((String) error.getRejectedValue())\t\t\t\t\t.build())\t\t\t\t.collect(Collectors.toList())\t);&#125;\nErrorResponse123456789101112131415161718@Getter@NoArgsConstructor(access = AccessLevel.PROTECTED)public class ErrorResponse &#123;    private String message;    private String code;    private int status;    private List&lt;FieldError&gt; errors;\t\t...    @Getter    @NoArgsConstructor(access = AccessLevel.PROTECTED)    public static class FieldError &#123;        private String field;        private String value;        private String reason;\t\t\t\t...    &#125;&#125;\n\n전체적인 흐름을 보시는 것을 권장합니다. 대충 소스코드의 흐름은 MethodArgumentNotValidException 클래스의 유효성 예외 부분들을 ErrorResponse 클래스의 정보에 알맞게 넣어주는 것입니다.\nErrorResponse :  공통적인 예외 Response12345678910111213141516171819202122&#123;  &quot;message&quot;: &quot;입력값이 올바르지 않습니다.&quot;,  &quot;code&quot;: &quot;???&quot;,  &quot;status&quot;: 400,  &quot;errors&quot;: [    &#123;      &quot;field&quot;: &quot;email&quot;,      &quot;value&quot;: &quot;string&quot;,      &quot;reason&quot;: &quot;이메일 주소가 유효하지 않습니다.&quot;    &#125;,    &#123;      &quot;field&quot;: &quot;lastName&quot;,      &quot;value&quot;: null,      &quot;reason&quot;: &quot;반드시 값이 존재하고 길이 혹은 크기가 0보다 커야 합니다.&quot;    &#125;,    &#123;      &quot;field&quot;: &quot;fistName&quot;,      &quot;value&quot;: null,      &quot;reason&quot;: &quot;반드시 값이 존재하고 길이 혹은 크기가 0보다 커야 합니다.&quot;    &#125;  ]&#125;\n동일한 ErrorResponse 값을 갖게 되었으며 어느 칼럼에서 무슨 무슨 문제들이 발생했는지 알 수 있게 되었습니다. @Valid 어노테이션으로 발생하는 MethodArgumentNotValidException들은 모두 handleMethodArgumentNotValidException 메서드를 통해서 공통된 Response 값을 리턴합니다. 이제부터는 @Valid, 해당 필드에 맞는 어노테이션을 통해서 모든 유효성 검사를 진행할 수 있습니다.\nAccountNotFoundException : 새로운 Exception 정의1234567891011121314public class AccountNotFoundException extends RuntimeException &#123;    private long id;    public AccountNotFoundException(long id) &#123;        this.id = id;    &#125;&#125;public Account findById(long id) &#123;    final Account account = accountRepository.findOne(id);    if (account == null)        throw new AccountNotFoundException(id);    return account;&#125;\n\nhandleAccountNotFoundException : 헨들링123456789@ExceptionHandler(value = &#123;        AccountNotFoundException.class&#125;)@ResponseStatus(HttpStatus.NOT_FOUND)protected ErrorResponse handleAccountNotFoundException(AccountNotFoundException e) &#123;    final ErrorCode accountNotFound = ErrorCode.ACCOUNT_NOT_FOUND;    log.error(accountNotFound.getMessage(), e.getMessage());    return buildError(accountNotFound);&#125;\n\nResponse123456&#123;  &quot;message&quot;: &quot;해당 회원을 찾을 수 없습니다.&quot;,  &quot;code&quot;: &quot;AC_001&quot;,  &quot;status&quot;: 404,  &quot;errors&quot;: []&#125;\n위처럼 새로운 Exception 정의하고 핸들링할 수 있습니다. 이 또 한 공통된 Response 갖게 되며 예외가 발생했을 경우 throw를 통해 해당 Exception 잘 처리해 주는 곳으로 던지게 됨으로써 비즈니스 로직과 예외 처리를 하는 로직이 분리되어 코드 가독성 및 유지 보수에 좋다고 생각합니다.\nErrorCode1234567891011121314151617@Getterpublic enum ErrorCode &#123;    ACCOUNT_NOT_FOUND(&quot;AC_001&quot;, &quot;해당 회원을 찾을 수 없습니다.&quot;, 404),    EMAIL_DUPLICATION(&quot;AC_002&quot;, &quot;이메일이 중복되었습니다.&quot;, 400),    INPUT_VALUE_INVALID(&quot;CM_001&quot;, &quot;입력값이 올바르지 않습니다.&quot;, 400);    private final String code;    private final String message;    private final int status;    ErrorCode(String code, String message, int status) &#123;        this.code = code;        this.message = message;        this.status = status;    &#125;&#125;\n위 방법은 깃허브에서 많은 개발자들이 예외 처리를 하는 방법들의 장점들을 합쳐서 만든 방법이지만 이 에러 코드는 저의 생각으로만 만들어진 방법이라서 효율적인 방법인지는 아직 잘 모르겠습니다. 우선 각각 모두 흩어져있는 예외 메시지들을 한 곳에서 관리하는 것이 바람직하다고 생각합니다. 그 이유는 다음과 같습니다.\n\n중복적으로 작성되는 메시지들이 너무 많습니다.\n예를 들어 해당 회원을 찾을 수 없습니다. 메시지를 로그에 남기는 메시지 형태는 너무나도 많은 형태입니다. 형태는 너무나도 많은 형태입니다.\n\n\n메시지 변경이 힘듭니다.\n메시지가 스트링 형식으로 모든 소스에 흩어져있을 경우 메시지 변경 시에 모든 곳을 다 찾아서 변경해야 합니다.모든 곳을 다 찾아서 변경해야 합니다.\n\n\n\n단점위의 유효성 검사의 단점은 다음과 같습니다.\n\n모든 Request Dto에 대한 반복적인 유효성 검사의 어노테이션이 필요합니다.\n회원 가입, 회원 정보 수정 등등 지속적으로 DTO 클래스가 추가되고 그때마다 반복적으로 어노테이션이 추가됩니다.\n\n\n유효성 검사 로직이 변경되면 모든 곳에 변경이 따른다.\n만약 비밀번호 유효성 검사가 특수문자가 추가된다고 하면 비밀번호 변경에 따른 유효성 검사를 정규 표현식의 변경을 모든 DTO마다 해줘야 합니다.\n\n\n\n이러한 단점들은 다음 step-03 : 효과적인 validate, 예외 처리 처리 (2)에서 다루어 보겠습니다. 지속적으로 포스팅이 어 가겠습니다. 긴 글 읽어주셔서 감사합니다.\n","dateCreated":"2018-05-02T00:00:00+09:00","dateModified":"2025-01-31T04:41:33+09:00","datePublished":"2018-05-02T00:00:00+09:00","description":"API을 개발하다 보면 프런트에서 넘어온 값에 대한 유효성 검사를 수없이 진행하게 됩니다. 이러한 반복적인 작업을 보다 효율적으로 처리하고 정확한 예외 메시지를 프런트엔드에게 전달해주는 것이 목표입니다. 해당 코드는 Github를 확인해주세요.","headline":"Spring-Jpa Best Practices Step-02 - 효과적인 validate, 예외 처리 (1)","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://cheese10yun.github.io/spring-jpa-best-02/"},"publisher":{"@type":"Organization","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg","logo":{"@type":"ImageObject","url":"yun-icon.jpg"}},"url":"https://cheese10yun.github.io/spring-jpa-best-02/","keywords":"Guide, JPA, ORM, Spring"}</script>
    <meta name="description" content="API을 개발하다 보면 프런트에서 넘어온 값에 대한 유효성 검사를 수없이 진행하게 됩니다. 이러한 반복적인 작업을 보다 효율적으로 처리하고 정확한 예외 메시지를 프런트엔드에게 전달해주는 것이 목표입니다. 해당 코드는 Github를 확인해주세요.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Spring-Jpa Best Practices Step-02 - 효과적인 validate, 예외 처리 (1)">
<meta property="og:url" content="https://cheese10yun.github.io/spring-jpa-best-02/index.html">
<meta property="og:site_name" content="Yun Blog">
<meta property="og:description" content="API을 개발하다 보면 프런트에서 넘어온 값에 대한 유효성 검사를 수없이 진행하게 됩니다. 이러한 반복적인 작업을 보다 효율적으로 처리하고 정확한 예외 메시지를 프런트엔드에게 전달해주는 것이 목표입니다. 해당 코드는 Github를 확인해주세요.">
<meta property="og:locale" content="ko_KR">
<meta property="article:published_time" content="2018-05-01T15:00:00.000Z">
<meta property="article:modified_time" content="2025-01-30T19:41:33.873Z">
<meta property="article:author" content="Yun">
<meta property="article:tag" content="Guide">
<meta property="article:tag" content="JPA">
<meta property="article:tag" content="ORM">
<meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://cheese10yun.github.io/assets/images/yun-icon.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90907312-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90907312-1');
    </script>


    

    
        
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5813739623204880" crossorigin="anonymous"></script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Yun Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="저자에 대해 더 알아보기"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
                </a>
                <h4 class="sidebar-profile-name">Yun</h4>
                
                    <h5 class="sidebar-profile-bio"><p>기술 블로그</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="검색"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">검색</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/cheese10yun"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/rss2.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Spring-Jpa Best Practices Step-02 - 효과적인 validate, 예외 처리 (1)
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2018-05-02T00:00:00+09:00">
	
		    2018/05/02
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h2 id="Step-02-효과적인-validate-예외-처리-1"><a href="#Step-02-효과적인-validate-예외-처리-1" class="headerlink" title="Step-02 효과적인 validate, 예외 처리 (1)"></a>Step-02 효과적인 validate, 예외 처리 (1)</h2><p>API을 개발하다 보면 프런트에서 넘어온 값에 대한 유효성 검사를 수없이 진행하게 됩니다. 이러한 <strong>반복적인 작업을 보다 효율적으로 처리하고 정확한 예외 메시지를 프런트엔드에게 전달해주는 것이 목표입니다</strong>. 해당 코드는 <a target="_blank" rel="noopener" href="https://github.com/cheese10yun/spring-jpa-best-practices">Github</a>를 확인해주세요.</p>
<h2 id="중요-포인트"><a href="#중요-포인트" class="headerlink" title="중요 포인트"></a>중요 포인트</h2><ul>
<li><code>@Valid</code>를 통한 유효성검사</li>
<li><code>@ControllerAdvice</code>를 이용한 Exception 헨들링</li>
<li><code>ErrorCode</code> 에러 메시지 통합</li>
</ul>
<h2 id="Valid-를-통한-유효성검사"><a href="#Valid-를-통한-유효성검사" class="headerlink" title="@Valid 를 통한 유효성검사"></a>@Valid 를 통한 유효성검사</h2><h3 id="DTO-유효성-검사-어노테이션-추가"><a href="#DTO-유효성-검사-어노테이션-추가" class="headerlink" title="DTO 유효성 검사 어노테이션 추가"></a>DTO 유효성 검사 어노테이션 추가</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@NoArgsConstructor(access = AccessLevel.PROTECTED)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SignUpReq</span> &#123;</span><br><span class="line">    <span class="meta">@Email</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="meta">@NotEmpty</span></span><br><span class="line">    <span class="keyword">private</span> String fistName;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@NotEmpty</span></span><br><span class="line">    <span class="keyword">private</span> String zip;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이전 단계에서 작성한 회원가입을 위한 SignUpReq.class에 새롭게 추가된 <code>@Email</code>, <code>@NotEmpty</code> 어노테이션을 추가했습니다. 이 밖에 다양한 어노테이션들이 있습니다. 아래의 컨트롤러에서  <code>@Valid</code> 어노테이션을 통해서 유효성 검사 가를 진행하고 유효성 검사를 실패하면 <code>MethodArgumentNotValidException</code> 예외가 발생합니다.</p>
<h3 id="Controller에서-유효성-검사"><a href="#Controller에서-유효성-검사" class="headerlink" title="Controller에서 유효성 검사"></a>Controller에서 유효성 검사</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(method = RequestMethod.POST)</span></span><br><span class="line"><span class="meta">@ResponseStatus(value = HttpStatus.CREATED)</span></span><br><span class="line"><span class="keyword">public</span> AccountDto.Res <span class="title function_">signUp</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> <span class="keyword">final</span> AccountDto.SignUpReq dto)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AccountDto</span>.Res(accountService.create(dto));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>컨트롤러에 <code>@Valid</code> 어노테이션을 추가했습니다. <code>SignUpReq</code> 클래스의 유효성 검사가 실패했을 경우 <code>MethodArgumentNotValidException</code> 예외가 발생하게 됩니다. <strong>프론트에서 넘겨받은 값에 대한 유효성 검사는 엄청난 반복적인 작업이며 실패했을 경우 사용자에게 적절한 Response 값을 리턴해주는 것 또한 중요 비즈니스 로직이 아님에도 불과하고 많은 시간을 할애하게 됩니다.</strong> 다음 부분은 <code>MethodArgumentNotValidException</code> 발생시 공통적으로 <strong>사용자에게 적절한 Response 값을 리턴해주는 작업을 진행하겠습니다.</strong></p>
<h2 id="ControllerAdvice를-이용한-Exception-헨들링"><a href="#ControllerAdvice를-이용한-Exception-헨들링" class="headerlink" title="@ControllerAdvice를 이용한 Exception 헨들링"></a>@ControllerAdvice를 이용한 Exception 헨들링</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ErrorExceptionController</span> &#123;</span><br><span class="line">	<span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line">	<span class="meta">@ResponseStatus(HttpStatus.BAD_REQUEST)</span></span><br><span class="line">	<span class="keyword">protected</span> ErrorResponse <span class="title function_">handleMethodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException e)</span> &#123;</span><br><span class="line">	    retrun errorResponse...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@ControllerAdvice</code> 어노테이션을 추가하면 특정 Exception을 핸들링하여 적절한 값을 Response 값으로 리턴해줍니다. 위처럼 별다른 <code>MethodArgumentNotValidException</code> 핸들링을 하지 않으면 스프링 자체의 에러 Response 값을 아래와 같이 리턴해줍니다.</p>
<h3 id="Error-Response"><a href="#Error-Response" class="headerlink" title="Error Response"></a>Error Response</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1525182817519</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">400</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bad Request&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exception&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.web.bind.MethodArgumentNotValidException&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;codes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;Email.signUpReq.email&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;Email.email&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;Email.java.lang.String&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;Email&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;codes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;signUpReq.email&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;email&quot;</span></span><br><span class="line">          <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;defaultMessage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;email&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;email&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;defaultMessage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.*&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;codes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;.*&quot;</span></span><br><span class="line">          <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;defaultMessage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;이메일 주소가 유효하지 않습니다.&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;objectName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;signUpReq&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;email&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;rejectedValue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;bindingFailure&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Email&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Validation failed for object=&#x27;signUpReq&#x27;. Error count: 3&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/accounts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>너무나 많은 값을 돌려보내 주고 있으며 시스템 정보에 대한 값들도 포함되고 있어 위처럼 Response 값을 돌려보내는 것은 바람직하지 않습니다. 또 자체적으로 돌려보내 주는 Response 결과를 공통적인 포맷으로 가져가는 것은 최종적으로 프론트 엔드에서 처리해야 하므로 항상 공통적인 Response 포맷일 유지해야 합니다. 아래 <code>Error Response</code> 클래스를 통해서 공통적인 예외 Response 값을 갖도록 하겠습니다.</p>
<h3 id="MethodArgumentNotValidException의-Response-처리"><a href="#MethodArgumentNotValidException의-Response-처리" class="headerlink" title="MethodArgumentNotValidException의 Response 처리"></a>MethodArgumentNotValidException의 Response 처리</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line"><span class="meta">@ResponseStatus(HttpStatus.BAD_REQUEST)</span></span><br><span class="line"><span class="keyword">protected</span> ErrorResponse <span class="title function_">handleMethodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException e)</span> &#123;</span><br><span class="line">	log.error(e.getMessage());</span><br><span class="line">	<span class="keyword">final</span> <span class="type">BindingResult</span> <span class="variable">bindingResult</span> <span class="operator">=</span> e.getBindingResult();</span><br><span class="line">	<span class="keyword">final</span> List&lt;FieldError&gt; errors = bindingResult.getFieldErrors();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> buildFieldErrors(</span><br><span class="line">			ErrorCode.INPUT_VALUE_INVALID,</span><br><span class="line">			errors.parallelStream()</span><br><span class="line">				.map(error -&gt; ErrorResponse.FieldError.builder()</span><br><span class="line">					.reason(error.getDefaultMessage())</span><br><span class="line">					.field(error.getField())</span><br><span class="line">					.value((String) error.getRejectedValue())</span><br><span class="line">					.build())</span><br><span class="line">				.collect(Collectors.toList())</span><br><span class="line">	);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ErrorResponse"><a href="#ErrorResponse" class="headerlink" title="ErrorResponse"></a>ErrorResponse</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@NoArgsConstructor(access = AccessLevel.PROTECTED)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ErrorResponse</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> status;</span><br><span class="line">    <span class="keyword">private</span> List&lt;FieldError&gt; errors;</span><br><span class="line">		...</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="meta">@NoArgsConstructor(access = AccessLevel.PROTECTED)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">FieldError</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String field;</span><br><span class="line">        <span class="keyword">private</span> String value;</span><br><span class="line">        <span class="keyword">private</span> String reason;</span><br><span class="line">				...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>전체적인 흐름을 보시는 것을 권장합니다. 대충 소스코드의 흐름은 MethodArgumentNotValidException 클래스의 유효성 예외 부분들을 <code>ErrorResponse</code> 클래스의 정보에 알맞게 넣어주는 것입니다.</p>
<h3 id="ErrorResponse-공통적인-예외-Response"><a href="#ErrorResponse-공통적인-예외-Response" class="headerlink" title="ErrorResponse :  공통적인 예외 Response"></a>ErrorResponse :  공통적인 예외 Response</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;입력값이 올바르지 않습니다.&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;???&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">400</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;email&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;이메일 주소가 유효하지 않습니다.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lastName&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;반드시 값이 존재하고 길이 혹은 크기가 0보다 커야 합니다.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fistName&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;반드시 값이 존재하고 길이 혹은 크기가 0보다 커야 합니다.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>동일한 ErrorResponse 값을 갖게 되었으며 어느 칼럼에서 무슨 무슨 문제들이 발생했는지 알 수 있게 되었습니다. <code>@Valid</code> 어노테이션으로 발생하는 <code>MethodArgumentNotValidException</code>들은 모두 handleMethodArgumentNotValidException 메서드를 통해서 공통된 Response 값을 리턴합니다. <strong>이제부터는 @Valid, 해당 필드에 맞는 어노테이션을 통해서 모든 유효성 검사를 진행할 수 있습니다.</strong></p>
<h3 id="AccountNotFoundException-새로운-Exception-정의"><a href="#AccountNotFoundException-새로운-Exception-정의" class="headerlink" title="AccountNotFoundException : 새로운 Exception 정의"></a>AccountNotFoundException : 새로운 Exception 정의</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountNotFoundException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AccountNotFoundException</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Account <span class="title function_">findById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> accountRepository.findOne(id);</span><br><span class="line">    <span class="keyword">if</span> (account == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AccountNotFoundException</span>(id);</span><br><span class="line">    <span class="keyword">return</span> account;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="handleAccountNotFoundException-헨들링"><a href="#handleAccountNotFoundException-헨들링" class="headerlink" title="handleAccountNotFoundException : 헨들링"></a>handleAccountNotFoundException : 헨들링</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(value = &#123;</span></span><br><span class="line"><span class="meta">        AccountNotFoundException.class</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@ResponseStatus(HttpStatus.NOT_FOUND)</span></span><br><span class="line"><span class="keyword">protected</span> ErrorResponse <span class="title function_">handleAccountNotFoundException</span><span class="params">(AccountNotFoundException e)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">ErrorCode</span> <span class="variable">accountNotFound</span> <span class="operator">=</span> ErrorCode.ACCOUNT_NOT_FOUND;</span><br><span class="line">    log.error(accountNotFound.getMessage(), e.getMessage());</span><br><span class="line">    <span class="keyword">return</span> buildError(accountNotFound);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;해당 회원을 찾을 수 없습니다.&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AC_001&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">404</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>위처럼 새로운 Exception 정의하고 핸들링할 수 있습니다. 이 또 한 공통된 Response 갖게 되며 예외가 발생했을 경우 throw를 통해 해당 Exception 잘 처리해 주는 곳으로 던지게 됨으로써 비즈니스 로직과 예외 처리를 하는 로직이 분리되어 코드 가독성 및 유지 보수에 좋다고 생각합니다.</p>
<h2 id="ErrorCode"><a href="#ErrorCode" class="headerlink" title="ErrorCode"></a>ErrorCode</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ErrorCode</span> &#123;</span><br><span class="line"></span><br><span class="line">    ACCOUNT_NOT_FOUND(<span class="string">&quot;AC_001&quot;</span>, <span class="string">&quot;해당 회원을 찾을 수 없습니다.&quot;</span>, <span class="number">404</span>),</span><br><span class="line">    EMAIL_DUPLICATION(<span class="string">&quot;AC_002&quot;</span>, <span class="string">&quot;이메일이 중복되었습니다.&quot;</span>, <span class="number">400</span>),</span><br><span class="line">    INPUT_VALUE_INVALID(<span class="string">&quot;CM_001&quot;</span>, <span class="string">&quot;입력값이 올바르지 않습니다.&quot;</span>, <span class="number">400</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String code;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String message;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> status;</span><br><span class="line"></span><br><span class="line">    ErrorCode(String code, String message, <span class="type">int</span> status) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 방법은 깃허브에서 많은 개발자들이 예외 처리를 하는 방법들의 장점들을 합쳐서 만든 방법이지만 이 에러 코드는 저의 생각으로만 만들어진 방법이라서 효율적인 방법인지는 아직 잘 모르겠습니다. 우선 각각 모두 흩어져있는 예외 메시지들을 한 곳에서 관리하는 것이 바람직하다고 생각합니다. 그 이유는 다음과 같습니다.</p>
<ol>
<li>중복적으로 작성되는 메시지들이 너무 많습니다.<ul>
<li>예를 들어 <code>해당 회원을 찾을 수 없습니다.</code> 메시지를 로그에 남기는 메시지 형태는 너무나도 많은 형태입니다. 형태는 너무나도 많은 형태입니다.</li>
</ul>
</li>
<li>메시지 변경이 힘듭니다.<ul>
<li>메시지가 스트링 형식으로 모든 소스에 흩어져있을 경우 메시지 변경 시에 모든 곳을 다 찾아서 변경해야 합니다.모든 곳을 다 찾아서 변경해야 합니다.</li>
</ul>
</li>
</ol>
<h2 id="단점"><a href="#단점" class="headerlink" title="단점"></a>단점</h2><p>위의 유효성 검사의 단점은 다음과 같습니다.</p>
<ol>
<li>모든 Request Dto에 대한 반복적인 유효성 검사의 어노테이션이 필요합니다.<ul>
<li>회원 가입, 회원 정보 수정 등등 지속적으로 DTO 클래스가 추가되고 그때마다 반복적으로 어노테이션이 추가됩니다.</li>
</ul>
</li>
<li>유효성 검사 로직이 변경되면 모든 곳에 변경이 따른다.<ul>
<li>만약 비밀번호 유효성 검사가 특수문자가 추가된다고 하면 비밀번호 변경에 따른 유효성 검사를 정규 표현식의 변경을 모든 DTO마다 해줘야 합니다.</li>
</ul>
</li>
</ol>
<p>이러한 단점들은 다음 <code>step-03 : 효과적인 validate, 예외 처리 처리 (2)</code>에서 다루어 보겠습니다. 지속적으로 포스팅이 어 가겠습니다. 긴 글 읽어주셔서 감사합니다.</p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Guide/" rel="tag">Guide</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/JPA/" rel="tag">JPA</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/ORM/" rel="tag">ORM</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Spring/" rel="tag">Spring</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/swagger-tip-01/"
                    data-tooltip="Swagger 날짜 포멧팅"
                    aria-label="이전: Swagger 날짜 포멧팅"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/spring-jpa-best/"
                    data-tooltip="Spring-Jpa Best Practices Step-01 - REST API"
                    aria-label="다음: Spring-Jpa Best Practices Step-01 - REST API"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-jpa-best-02/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-jpa-best-02/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://cheese10yun.github.io/spring-jpa-best-02/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>


<!-- Comment -->
<!--  utteranc comment -->

<script src="https://utteranc.es/client.js"
        repo="cheese10yun/blog-comment"
        issue-term="title"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Yun. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/swagger-tip-01/"
                    data-tooltip="Swagger 날짜 포멧팅"
                    aria-label="이전: Swagger 날짜 포멧팅"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/spring-jpa-best/"
                    data-tooltip="Spring-Jpa Best Practices Step-01 - REST API"
                    aria-label="다음: Spring-Jpa Best Practices Step-01 - REST API"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-jpa-best-02/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-jpa-best-02/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://cheese10yun.github.io/spring-jpa-best-02/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-jpa-best-02/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-jpa-best-02/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://cheese10yun.github.io/spring-jpa-best-02/"
                        aria-label="Google+에 공유하기"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
            <h4 id="about-card-name">Yun</h4>
        
            <div id="about-card-bio"><p>기술 블로그</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>

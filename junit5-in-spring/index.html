
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="naver-site-verification" content="a37ea649edf26e70c3de94f9cb034f9d6e11de3f" />
    <meta name="generator" content="Yun Blog">
    <title>Junit5 with Spring boot - Yun Blog</title>
    <meta name="author" content="Yun">
    
        <meta name="keywords" content="Node,Spring,Spring Boot,Spring Batch,Kotlin,기술 블로그,JPA,Mongo,MySQL,OOP,">
    
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg"},"articleBody":"\n해당 코드는 Github를 확인해주세요.\n\nSpring boot 2.2 버전부터는 Junit5 디펜던시를 기본으로 포함하고 있습니다. Junit5 주요 테스트 어노테이션과 Spring boot에서 활용법을 정리해보았습니다.\n@ValueSource\n@ValueSource어노테이션을 사용하면 배열을 값을 테스트 메서드로 손쉽게 전달할 수 있습니다.\n123456789101112@ParameterizedTest@ValueSource(strings = [&quot;&quot;, &quot; &quot;])internal fun `isBlank `(value: String) &#123;    print(&quot;value: $value &quot;) // value:  value:    assertThat(value.isBlank()).isTrue()&#125;@ParameterizedTest@ValueSource(ints = [1, 2, 3, 4])internal fun `ints values`(value: Int) &#123;    print(&quot;value: $value &quot;) // value: 1 value: 2 value: 3 value: 4&#125;\nInt, String 이 이외에도 기본형 데이터 타입을 지원하고 있습니다.\nEnumSource\n@EnumSource 어노테이션을 통해서 Enum을 효율적으로 테스트 할 수 있습니다.\n123456enum class Quarter(val value: Int, val description: String) &#123;    Q1(1, &quot;1분기&quot;),    Q2(2, &quot;2분기&quot;),    Q3(3, &quot;3분기&quot;),    Q4(4, &quot;4분기&quot;)&#125;\n각 분기를 뜻하는 Enum을 위와 같이 정리했습니다.\n123456@ParameterizedTest@EnumSource(Quarter::class)internal fun `분기의  value 값은 1 ~ 4 값이다`(quarter: Quarter) &#123;    println(quarter.name) // quarter: Q1 quarter: Q2 quarter: Q3 quarter: Q4    assertThat(quarter.value in 1..4).isTrue()&#125;\nenum에 정의된 모든 값들을 출력하는 것을 확인할 수 있습니다. @EnumSource을 사용하면 모든 enum을 iterator 하기 편리합니다.\n123456@ParameterizedTest@EnumSource(value = Quarter::class, names = [&quot;Q1&quot;, &quot;Q2&quot;])internal fun `names을 통해서 특정 enum 값만 가져올 수 있다`(quarter: Quarter) &#123;    print(&quot;$&#123;quarter.name&#125; &quot;) // quarter: Q1 quarter: Q2    assertThat(quarter.value in 1..2).isTrue()&#125;\n특정 enum을 지정해서 가져오고 싶은 경우 names = [&quot;Q1&quot;, &quot;Q2&quot;]을 사용하면 됩니다.\n@CsvSource\n@CsvSource 어노테이션을 통해서 CSV 포멧으로 테스팅을 편리하게 진행 할 수 있습니다.\n12345678910@ParameterizedTest@CsvSource(        &quot;010-1234-1234,01012341234&quot;,        &quot;010-2333-2333,01023332333&quot;,        &quot;02-223-1232,022231232&quot;)internal fun `전화번호는 &#x27;-&#x27;를 제거한다`(value: String, expected: String) &#123;    val valueReplace = value.replace(&quot;-&quot;, &quot;&quot;)    assertThat(valueReplace).isEqualTo(expected)&#125;\n, 단위로 테스트 메서드의 매개변수로 값을 넘길 수 있습니다.\n@MethodSource\n@MethodSource 어노테이션을 통해서 복잡한 객체를 보다 쉽게 생성하고 테스트할 수 있습니다.\n1234567data class Amount(        val price: Int,        val ea: Int) &#123;    val totalPrice: Int        get() = price * ea&#125;\n가격과 수량을 입력하면 totalPrice 계산하는 단순한 객체 입니다. 해당 객체를 @MethodSource를 통해서 테스트를 진행해 보겠습니다.\n123456789101112131415@ParameterizedTest@MethodSource(&quot;providerAmount&quot;)internal fun `amount total price 테스트 `(amount: Amount, expectedTotalPrice: Int) &#123;    assertThat(amount.totalPrice).isEqualTo(expectedTotalPrice)&#125;companion object &#123;    @JvmStatic    fun providerAmount() = listOf(            Arguments.of(Amount(1000, 2), 2000),            Arguments.of(Amount(2000, 5), 10000),            Arguments.of(Amount(4000, 5), 20000),            Arguments.of(Amount(5000, 3), 15000)    )&#125;\n@MethodSource()에 입력하는 문자열과,  값을 지정하는 static 메서드명과 일치해야 합니다. 테스트 하고자 하는 객체와, 예상되는 값을 넘겨받아 다양한 객체의 경우를 쉽게 테스트할 수 있습니다.\nSpring Boot\nJunit5 관련된 내용은 아니지만 Junit5와 Spring Boot 관련 테스트할때 좋은 패턴을 정리했습니다.\n생성자 주입\n@TestConstructor(autowireMode = TestConstructor.AutowireMode.ALL) 어노테이션을 통해서 테스트 코드에서도 생성자 주입이 가능해 졌습니다.\n12345678910111213141516171819@TestConstructor(autowireMode = TestConstructor.AutowireMode.ALL)@ActiveProfiles(&quot;test&quot;)@DataJpaTestinternal class MemberRepositoryTest(val memberRepository: MemberRepository) &#123;    @Test    internal fun `members 조회 테스트`() &#123;        //given        val email = &quot;asd@asd.com&quot;        val name = &quot;name&quot;        //when        val member = memberRepository.save(Member(email, name))        //then        assertThat(member.email).isEqualTo(email)        assertThat(member.name).isEqualTo(name)    &#125;&#125;\nDSL 지원\n123456789101112131415161718192021222324252627282930313233@SpringBootTest@TestConstructor(autowireMode = TestConstructor.AutowireMode.ALL)@ActiveProfiles(&quot;test&quot;)@AutoConfigureMockMvcinternal class MemberApiTest(        val memberRepository: MemberRepository,        val mockMvc: MockMvc) &#123;    @Test    internal fun `test`() &#123;        memberRepository.saveAll(listOf(                Member(&quot;email1@asd.com&quot;, &quot;jin&quot;),                Member(&quot;email2@asd.com&quot;, &quot;yun&quot;),                Member(&quot;email3@asd.com&quot;, &quot;wan&quot;),                Member(&quot;email4@asd.com&quot;, &quot;kong&quot;),                Member(&quot;email5@asd.com&quot;, &quot;joo&quot;)        ))        mockMvc.get(&quot;/members&quot;) &#123;            accept = MediaType.APPLICATION_JSON        &#125;.andExpect &#123;            content &#123; contentType(MediaType.APPLICATION_JSON) &#125;            jsonPath(&quot;$[0].name&quot;) &#123; value(&quot;jin&quot;) &#125;            jsonPath(&quot;$[1].name&quot;) &#123; value(&quot;yun&quot;) &#125;            jsonPath(&quot;$[2].name&quot;) &#123; value(&quot;wan&quot;) &#125;            jsonPath(&quot;$[3].name&quot;) &#123; value(&quot;kong&quot;) &#125;            jsonPath(&quot;$[4].name&quot;) &#123; value(&quot;joo&quot;) &#125;        &#125;.andDo &#123;            print()        &#125;    &#125;&#125;\nWebMvc에서도 DSL 사용을 할 수 있습니다. Web 관련 테스트 코드를 작성하기 더욱 편리해졌습니다.\n@Sql 손쉽게 Data Set up\n*.sql 파일로 손쉽게 데이터를 Set up할 수 있습니다. JPA를 사용중이라면 Given절로 JPA를 만들기가 어렵고 불편한 경우 사용하면 좋을거 같습니다.\n12345678910# member-data-setup.sqlinsert into member (`email`, `name`, `created_at`, `updated_at`)values(&#x27;sample1@asd.com&#x27;, &#x27;name&#x27;, now(), now()),(&#x27;sample2@asd.com&#x27;, &#x27;name&#x27;, now(), now()),(&#x27;sample3@asd.com&#x27;, &#x27;name&#x27;, now(), now()),(&#x27;sample4@asd.com&#x27;, &#x27;name&#x27;, now(), now()),(&#x27;sample5@asd.com&#x27;, &#x27;name&#x27;, now(), now()),(&#x27;sample6@asd.com&#x27;, &#x27;name&#x27;, now(), now()),(&#x27;sample15@asd.com&#x27;, &#x27;name&#x27;, now(), now());\n12345└── test    ├── kotlin    │   └── com    └── resources        └── member-data-setup.sql\n위에서 작성한  *.sql 파일을 test/resources 디렉토리에 위치시킵니다\n123456789101112@Test@Sql(&quot;/member-data-setup.sql&quot;)internal fun name() &#123;    val members = memberRepository.findAll()    then(members).anySatisfy &#123;        then(it.name).isEqualTo(&quot;name&quot;)        then(it.email).contains(&quot;@&quot;)                .startsWith(&quot;sample&quot;)                .endsWith(&quot;com&quot;)    &#125;&#125;\n@Sql 어노테이션을 통헤서 해당 디렉터리의 위치와 파일 이름을 작성합니다. 기본적인 디렉터리를 test/resources을 바라보기 때문에 위와 같은 경우 파일명만 작성합니다.\nAssertJ\nJunit5의 관련된 내용은 아니지만 이번 Spring Boot 2.2 Release에서 AssertJ 관련된 내용이 있어 AssertJ의 사용과 간략한 팁을 정리했습니다.\nAssertJ는 개인적으로 선호하는 Test Matcher입니다. static 메서드로 동작하기 때문에 자동 완성으로 Matcher 기능들을 손쉽게 사용할 수 있고, Matcher에서 지원해주는 기능도 막강합니다. AssertJ에서는 BDD 스타일의 BDDAssertion을 제공해주고 있습니다.\n1234567891011121314151617181920212223@Testinternal fun `member save test`() &#123;    //given    val email = &quot;asd@asd.com&quot;    val name = &quot;name&quot;    //when    val member = memberRepository.save(Member(email, name))    //then        // 기존 사용법 assertThat     assertThat(member.email).isEqualTo(email)    assertThat(member.name).isEqualTo(name)    assertThat(member.createdAt).isBeforeOrEqualTo(LocalDateTime.now())    assertThat(member.updatedAt).isBeforeOrEqualTo(LocalDateTime.now())        // BDD 사용법    then(member.email).isEqualTo(email)    then(member.name).isEqualTo(name)    then(member.createdAt).isBeforeOrEqualTo(LocalDateTime.now())    then(member.updatedAt).isBeforeOrEqualTo(LocalDateTime.now())&#125;\nassertThat -&gt; then 으로 대체되었습니다. 코드도 적어지고 더 직관적으로 되어서 좋아졌습니다.\n1234567@Testinternal fun `문장 검사`() &#123;    then(&quot;AssertJ is best matcher&quot;).isNotNull()            .startsWith(&quot;AssertJ&quot;)            .contains(&quot; &quot;)            .endsWith(&quot;matcher&quot;)&#125;\n위와 같은 형식으로 코드를 연결해서 테스트할 수도 있습니다.\n12345678910111213141516171819@Testinternal fun `findByName test`() &#123;    //given    memberRepository.saveAll(listOf(            Member(&quot;email1@asd.com&quot;, &quot;kim&quot;),            Member(&quot;email2@asd.com&quot;, &quot;kim&quot;),            Member(&quot;email3@asd.com&quot;, &quot;kim&quot;),            Member(&quot;email4@asd.com&quot;, &quot;name&quot;),            Member(&quot;email5@asd.com&quot;, &quot;name&quot;)    ))    //when    val members = memberRepository.findByName(&quot;kim&quot;)    //then    then(members).anySatisfy &#123;        then(it.name).isEqualTo(&quot;kim&quot;)    &#125;&#125;\nanySatisfy 람다 표현식으로 members를 iterator 돌리면서 해당 kim과 일치하는지 편리하게 확인할 수 있습니다. 이 밖에도 다양한 것들을 제공하고 있고 계속 발전하고 있는 AssertJ를 추천드립니다.\nthenThrownBy\nthenThrownBy을 통해서 Exception 테스트를 쉽게 진행할 수 있습니다.\n123456789101112class Member private constructor() &#123;    fun validateBeforeSave() &#123;        fun validate(value: String, fieldName: String) &#123;            if (value.isEmpty()) &#123;                throw IllegalArgumentException(&quot;$id empty $fieldName&quot;)            &#125;        &#125;        validate(email, &quot;email&quot;)        validate(name, &quot;name&quot;)    &#125;&#125;\n빈 문자열인 경우 IllegalArgumentException 예외를 발생시키는 로직을 아래 처럼 테스트할 수 있습니다.\n1234567@Testinternal fun `member 실패`() &#123;    val member = Member(&quot;&quot;, &quot;&quot;)    thenThrownBy &#123; member.validateBeforeSave() &#125;            .isExactlyInstanceOf(IllegalArgumentException::class.java)            .hasMessageContaining(&quot;empty&quot;)&#125;\n특정 예외가 발생하는지, 예외 메시지의 특정한 값이 존재하는지 간단하게 확인할 수 있습니다.\n참고\n\nGuide to JUnit 5 Parameterized Tests\n머루의개발블로그 : Spring 5.2 와 Spring boot 2.2 추가된 Test 기능들\nSpring Boot 2.2 Release Notes\nBaeldung : Guide to JUnit 5 Parameterized Tests\n\n","dateCreated":"2019-11-03T18:11:20+09:00","dateModified":"2025-01-31T20:33:58+09:00","datePublished":"2019-11-03T18:11:20+09:00","description":"Spring boot 2.2 버전부터는 Junit5 디펜던시를 기본으로 포함하고 있습니다. Junit5 주요 테스트 어노테이션과 Spring boot에서 활용법을 정리해보았습니다.","headline":"Junit5 with Spring boot","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://cheese10yun.github.io/junit5-in-spring/"},"publisher":{"@type":"Organization","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg","logo":{"@type":"ImageObject","url":"yun-icon.jpg"}},"url":"https://cheese10yun.github.io/junit5-in-spring/","keywords":"Test"}</script>
    <meta name="description" content="Spring boot 2.2 버전부터는 Junit5 디펜던시를 기본으로 포함하고 있습니다. Junit5 주요 테스트 어노테이션과 Spring boot에서 활용법을 정리해보았습니다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Junit5 with Spring boot">
<meta property="og:url" content="https://cheese10yun.github.io/junit5-in-spring/index.html">
<meta property="og:site_name" content="Yun Blog">
<meta property="og:description" content="Spring boot 2.2 버전부터는 Junit5 디펜던시를 기본으로 포함하고 있습니다. Junit5 주요 테스트 어노테이션과 Spring boot에서 활용법을 정리해보았습니다.">
<meta property="og:locale" content="ko_KR">
<meta property="article:published_time" content="2019-11-03T09:11:20.000Z">
<meta property="article:modified_time" content="2025-01-31T11:33:58.210Z">
<meta property="article:author" content="Yun">
<meta property="article:tag" content="Test">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://cheese10yun.github.io/assets/images/yun-icon.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90907312-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90907312-1');
    </script>


    

    
        
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5813739623204880" crossorigin="anonymous"></script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Yun Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="저자에 대해 더 알아보기"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
                </a>
                <h4 class="sidebar-profile-name">Yun</h4>
                
                    <h5 class="sidebar-profile-bio"><p>기술 블로그</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/cheese10yun"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/rss2.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Junit5 with Spring boot
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-11-03T18:11:20+09:00">
	
		    2019/11/03
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <blockquote>
<p>해당 코드는 <a target="_blank" rel="noopener" href="https://github.com/cheese10yun/blog-sample/tree/master/kotlin-junit5">Github</a>를 확인해주세요.</p>
</blockquote>
<p>Spring boot 2.2 버전부터는 Junit5 디펜던시를 기본으로 포함하고 있습니다. Junit5 주요 테스트 어노테이션과 Spring boot에서 활용법을 정리해보았습니다.</p>
<h2 id="ValueSource">@ValueSource</h2>
<p><code>@ValueSource</code>어노테이션을 사용하면 배열을 값을 테스트 메서드로 손쉽게 전달할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(strings = [<span class="string">&quot;&quot;</span>, <span class="string">&quot; &quot;</span>])</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `isBlank `<span class="params">(value: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    print(<span class="string">&quot;value: <span class="variable">$value</span> &quot;</span>) <span class="comment">// value:  value:</span></span><br><span class="line">    assertThat(value.isBlank()).isTrue()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(ints = [1, 2, 3, 4])</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `ints values`<span class="params">(value: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    print(<span class="string">&quot;value: <span class="variable">$value</span> &quot;</span>) <span class="comment">// value: 1 value: 2 value: 3 value: 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Int, String 이 이외에도 기본형 데이터 타입을 지원하고 있습니다.</p>
<h2 id="EnumSource">EnumSource</h2>
<p><code>@EnumSource</code> 어노테이션을 통해서 Enum을 효율적으로 테스트 할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="title class_">Quarter</span>(<span class="keyword">val</span> value: <span class="built_in">Int</span>, <span class="keyword">val</span> description: String) &#123;</span><br><span class="line">    Q1(<span class="number">1</span>, <span class="string">&quot;1분기&quot;</span>),</span><br><span class="line">    Q2(<span class="number">2</span>, <span class="string">&quot;2분기&quot;</span>),</span><br><span class="line">    Q3(<span class="number">3</span>, <span class="string">&quot;3분기&quot;</span>),</span><br><span class="line">    Q4(<span class="number">4</span>, <span class="string">&quot;4분기&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>각 분기를 뜻하는 Enum을 위와 같이 정리했습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@EnumSource(Quarter::class)</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `분기의  value 값은 1 ~ 4 값이다`<span class="params">(quarter: <span class="type">Quarter</span>)</span></span> &#123;</span><br><span class="line">    println(quarter.name) <span class="comment">// quarter: Q1 quarter: Q2 quarter: Q3 quarter: Q4</span></span><br><span class="line">    assertThat(quarter.value <span class="keyword">in</span> <span class="number">1.</span><span class="number">.4</span>).isTrue()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>enum에 정의된 모든 값들을 출력하는 것을 확인할 수 있습니다. <code>@EnumSource</code>을 사용하면 모든 enum을 iterator 하기 편리합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@EnumSource(value = Quarter::class, names = [<span class="string">&quot;Q1&quot;</span>, <span class="string">&quot;Q2&quot;</span>])</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `names을 통해서 특정 <span class="keyword">enum</span> 값만 가져올 수 있다`<span class="params">(quarter: <span class="type">Quarter</span>)</span></span> &#123;</span><br><span class="line">    print(<span class="string">&quot;<span class="subst">$&#123;quarter.name&#125;</span> &quot;</span>) <span class="comment">// quarter: Q1 quarter: Q2</span></span><br><span class="line">    assertThat(quarter.value <span class="keyword">in</span> <span class="number">1.</span><span class="number">.2</span>).isTrue()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>특정 enum을 지정해서 가져오고 싶은 경우 <code>names = [&quot;Q1&quot;, &quot;Q2&quot;]</code>을 사용하면 됩니다.</p>
<h2 id="CsvSource">@CsvSource</h2>
<p><code>@CsvSource</code> 어노테이션을 통해서 CSV 포멧으로 테스팅을 편리하게 진행 할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@CsvSource(</span></span><br><span class="line"><span class="meta">        <span class="string">&quot;010-1234-1234,01012341234&quot;</span>,</span></span><br><span class="line"><span class="meta">        <span class="string">&quot;010-2333-2333,01023332333&quot;</span>,</span></span><br><span class="line"><span class="meta">        <span class="string">&quot;02-223-1232,022231232&quot;</span></span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `전화번호는 &#x27;-&#x27;를 제거한다`<span class="params">(value: <span class="type">String</span>, expected: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> valueReplace = value.replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    assertThat(valueReplace).isEqualTo(expected)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>,</code> 단위로 테스트 메서드의 매개변수로 값을 넘길 수 있습니다.</p>
<h2 id="MethodSource">@MethodSource</h2>
<p><code>@MethodSource</code> 어노테이션을 통해서 복잡한 객체를 보다 쉽게 생성하고 테스트할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">Amount</span>(</span><br><span class="line">        <span class="keyword">val</span> price: <span class="built_in">Int</span>,</span><br><span class="line">        <span class="keyword">val</span> ea: <span class="built_in">Int</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> totalPrice: <span class="built_in">Int</span></span><br><span class="line">        <span class="keyword">get</span>() = price * ea</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>가격과 수량을 입력하면 totalPrice 계산하는 단순한 객체 입니다. 해당 객체를 <code>@MethodSource</code>를 통해서 테스트를 진행해 보겠습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@MethodSource(<span class="string">&quot;providerAmount&quot;</span>)</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `amount total price 테스트 `<span class="params">(amount: <span class="type">Amount</span>, expectedTotalPrice: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    assertThat(amount.totalPrice).isEqualTo(expectedTotalPrice)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">    <span class="meta">@JvmStatic</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">providerAmount</span><span class="params">()</span></span> = listOf(</span><br><span class="line">            Arguments.of(Amount(<span class="number">1000</span>, <span class="number">2</span>), <span class="number">2000</span>),</span><br><span class="line">            Arguments.of(Amount(<span class="number">2000</span>, <span class="number">5</span>), <span class="number">10000</span>),</span><br><span class="line">            Arguments.of(Amount(<span class="number">4000</span>, <span class="number">5</span>), <span class="number">20000</span>),</span><br><span class="line">            Arguments.of(Amount(<span class="number">5000</span>, <span class="number">3</span>), <span class="number">15000</span>)</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@MethodSource()</code>에 입력하는 문자열과,  값을 지정하는 static 메서드명과 일치해야 합니다. 테스트 하고자 하는 객체와, 예상되는 값을 넘겨받아 다양한 객체의 경우를 쉽게 테스트할 수 있습니다.</p>
<h2 id="Spring-Boot">Spring Boot</h2>
<p>Junit5 관련된 내용은 아니지만 Junit5와 Spring Boot 관련 테스트할때 좋은 패턴을 정리했습니다.</p>
<h3 id="생성자-주입">생성자 주입</h3>
<p><code>@TestConstructor(autowireMode = TestConstructor.AutowireMode.ALL)</code> 어노테이션을 통해서 테스트 코드에서도 생성자 주입이 가능해 졌습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TestConstructor(autowireMode = TestConstructor.AutowireMode.ALL)</span></span><br><span class="line"><span class="meta">@ActiveProfiles(<span class="string">&quot;test&quot;</span>)</span></span><br><span class="line"><span class="meta">@DataJpaTest</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title class_">MemberRepositoryTest</span>(<span class="keyword">val</span> memberRepository: MemberRepository) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `members 조회 테스트`<span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//given</span></span><br><span class="line">        <span class="keyword">val</span> email = <span class="string">&quot;asd@asd.com&quot;</span></span><br><span class="line">        <span class="keyword">val</span> name = <span class="string">&quot;name&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//when</span></span><br><span class="line">        <span class="keyword">val</span> member = memberRepository.save(Member(email, name))</span><br><span class="line"></span><br><span class="line">        <span class="comment">//then</span></span><br><span class="line">        assertThat(member.email).isEqualTo(email)</span><br><span class="line">        assertThat(member.name).isEqualTo(name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DSL-지원">DSL 지원</h3>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@TestConstructor(autowireMode = TestConstructor.AutowireMode.ALL)</span></span><br><span class="line"><span class="meta">@ActiveProfiles(<span class="string">&quot;test&quot;</span>)</span></span><br><span class="line"><span class="meta">@AutoConfigureMockMvc</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title class_">MemberApiTest</span>(</span><br><span class="line">        <span class="keyword">val</span> memberRepository: MemberRepository,</span><br><span class="line">        <span class="keyword">val</span> mockMvc: MockMvc</span><br><span class="line">) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `test`<span class="params">()</span></span> &#123;</span><br><span class="line">        memberRepository.saveAll(listOf(</span><br><span class="line">                Member(<span class="string">&quot;email1@asd.com&quot;</span>, <span class="string">&quot;jin&quot;</span>),</span><br><span class="line">                Member(<span class="string">&quot;email2@asd.com&quot;</span>, <span class="string">&quot;yun&quot;</span>),</span><br><span class="line">                Member(<span class="string">&quot;email3@asd.com&quot;</span>, <span class="string">&quot;wan&quot;</span>),</span><br><span class="line">                Member(<span class="string">&quot;email4@asd.com&quot;</span>, <span class="string">&quot;kong&quot;</span>),</span><br><span class="line">                Member(<span class="string">&quot;email5@asd.com&quot;</span>, <span class="string">&quot;joo&quot;</span>)</span><br><span class="line">        ))</span><br><span class="line"></span><br><span class="line">        mockMvc.<span class="keyword">get</span>(<span class="string">&quot;/members&quot;</span>) &#123;</span><br><span class="line">            accept = MediaType.APPLICATION_JSON</span><br><span class="line">        &#125;.andExpect &#123;</span><br><span class="line">            content &#123; contentType(MediaType.APPLICATION_JSON) &#125;</span><br><span class="line">            jsonPath(<span class="string">&quot;$[0].name&quot;</span>) &#123; value(<span class="string">&quot;jin&quot;</span>) &#125;</span><br><span class="line">            jsonPath(<span class="string">&quot;$[1].name&quot;</span>) &#123; value(<span class="string">&quot;yun&quot;</span>) &#125;</span><br><span class="line">            jsonPath(<span class="string">&quot;$[2].name&quot;</span>) &#123; value(<span class="string">&quot;wan&quot;</span>) &#125;</span><br><span class="line">            jsonPath(<span class="string">&quot;$[3].name&quot;</span>) &#123; value(<span class="string">&quot;kong&quot;</span>) &#125;</span><br><span class="line">            jsonPath(<span class="string">&quot;$[4].name&quot;</span>) &#123; value(<span class="string">&quot;joo&quot;</span>) &#125;</span><br><span class="line">        &#125;.andDo &#123;</span><br><span class="line">            print()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>WebMvc에서도 DSL 사용을 할 수 있습니다. Web 관련 테스트 코드를 작성하기 더욱 편리해졌습니다.</p>
<h3 id="Sql-손쉽게-Data-Set-up">@Sql 손쉽게 Data Set up</h3>
<p><code>*.sql</code> 파일로 손쉽게 데이터를 Set up할 수 있습니다. JPA를 사용중이라면 Given절로 JPA를 만들기가 어렵고 불편한 경우 사용하면 좋을거 같습니다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">member</span><span class="operator">-</span>data<span class="operator">-</span>setup.sql</span><br><span class="line"><span class="keyword">insert into</span> <span class="keyword">member</span> (`email`, `name`, `created_at`, `updated_at`)</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;sample1@asd.com&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, now(), now()),</span><br><span class="line">(<span class="string">&#x27;sample2@asd.com&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, now(), now()),</span><br><span class="line">(<span class="string">&#x27;sample3@asd.com&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, now(), now()),</span><br><span class="line">(<span class="string">&#x27;sample4@asd.com&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, now(), now()),</span><br><span class="line">(<span class="string">&#x27;sample5@asd.com&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, now(), now()),</span><br><span class="line">(<span class="string">&#x27;sample6@asd.com&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, now(), now()),</span><br><span class="line">(<span class="string">&#x27;sample15@asd.com&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, now(), now());</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">└── test</span><br><span class="line">    ├── kotlin</span><br><span class="line">    │   └── com</span><br><span class="line">    └── resources</span><br><span class="line">        └── member-data-setup.sql</span><br></pre></td></tr></table></figure>
<p>위에서 작성한  <code>*.sql</code> 파일을 <code>test/resources</code> 디렉토리에 위치시킵니다</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@Sql(<span class="string">&quot;/member-data-setup.sql&quot;</span>)</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> <span class="title">name</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> members = memberRepository.findAll()</span><br><span class="line"></span><br><span class="line">    then(members).anySatisfy &#123;</span><br><span class="line">        then(it.name).isEqualTo(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        then(it.email).contains(<span class="string">&quot;@&quot;</span>)</span><br><span class="line">                .startsWith(<span class="string">&quot;sample&quot;</span>)</span><br><span class="line">                .endsWith(<span class="string">&quot;com&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Sql</code> 어노테이션을 통헤서 해당 디렉터리의 위치와 파일 이름을 작성합니다. 기본적인 디렉터리를 <code>test/resources</code>을 바라보기 때문에 위와 같은 경우 파일명만 작성합니다.</p>
<h2 id="AssertJ">AssertJ</h2>
<p>Junit5의 관련된 내용은 아니지만 이번 Spring Boot 2.2 Release에서 AssertJ 관련된 내용이 있어 AssertJ의 사용과 간략한 팁을 정리했습니다.</p>
<p><code>AssertJ</code>는 개인적으로 선호하는 Test Matcher입니다. static 메서드로 동작하기 때문에 자동 완성으로 Matcher 기능들을 손쉽게 사용할 수 있고, Matcher에서 지원해주는 기능도 막강합니다. AssertJ에서는 BDD 스타일의 BDDAssertion을 제공해주고 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `member save test`<span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">//given</span></span><br><span class="line">    <span class="keyword">val</span> email = <span class="string">&quot;asd@asd.com&quot;</span></span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">&quot;name&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//when</span></span><br><span class="line">    <span class="keyword">val</span> member = memberRepository.save(Member(email, name))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//then</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 기존 사용법 assertThat </span></span><br><span class="line">    assertThat(member.email).isEqualTo(email)</span><br><span class="line">    assertThat(member.name).isEqualTo(name)</span><br><span class="line">    assertThat(member.createdAt).isBeforeOrEqualTo(LocalDateTime.now())</span><br><span class="line">    assertThat(member.updatedAt).isBeforeOrEqualTo(LocalDateTime.now())</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// BDD 사용법</span></span><br><span class="line">    then(member.email).isEqualTo(email)</span><br><span class="line">    then(member.name).isEqualTo(name)</span><br><span class="line">    then(member.createdAt).isBeforeOrEqualTo(LocalDateTime.now())</span><br><span class="line">    then(member.updatedAt).isBeforeOrEqualTo(LocalDateTime.now())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>assertThat</code> -&gt; <code>then</code> 으로 대체되었습니다. 코드도 적어지고 더 직관적으로 되어서 좋아졌습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `문장 검사`<span class="params">()</span></span> &#123;</span><br><span class="line">    then(<span class="string">&quot;AssertJ is best matcher&quot;</span>).isNotNull()</span><br><span class="line">            .startsWith(<span class="string">&quot;AssertJ&quot;</span>)</span><br><span class="line">            .contains(<span class="string">&quot; &quot;</span>)</span><br><span class="line">            .endsWith(<span class="string">&quot;matcher&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위와 같은 형식으로 코드를 연결해서 테스트할 수도 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `findByName test`<span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">//given</span></span><br><span class="line">    memberRepository.saveAll(listOf(</span><br><span class="line">            Member(<span class="string">&quot;email1@asd.com&quot;</span>, <span class="string">&quot;kim&quot;</span>),</span><br><span class="line">            Member(<span class="string">&quot;email2@asd.com&quot;</span>, <span class="string">&quot;kim&quot;</span>),</span><br><span class="line">            Member(<span class="string">&quot;email3@asd.com&quot;</span>, <span class="string">&quot;kim&quot;</span>),</span><br><span class="line">            Member(<span class="string">&quot;email4@asd.com&quot;</span>, <span class="string">&quot;name&quot;</span>),</span><br><span class="line">            Member(<span class="string">&quot;email5@asd.com&quot;</span>, <span class="string">&quot;name&quot;</span>)</span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//when</span></span><br><span class="line">    <span class="keyword">val</span> members = memberRepository.findByName(<span class="string">&quot;kim&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//then</span></span><br><span class="line">    then(members).anySatisfy &#123;</span><br><span class="line">        then(it.name).isEqualTo(<span class="string">&quot;kim&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>anySatisfy</code> 람다 표현식으로 members를 iterator 돌리면서 해당 <code>kim</code>과 일치하는지 편리하게 확인할 수 있습니다. 이 밖에도 다양한 것들을 제공하고 있고 계속 발전하고 있는 AssertJ를 추천드립니다.</p>
<h3 id="thenThrownBy">thenThrownBy</h3>
<p>thenThrownBy을 통해서 Exception 테스트를 쉽게 진행할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Member</span> <span class="keyword">private</span> <span class="keyword">constructor</span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">validateBeforeSave</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">validate</span><span class="params">(value: <span class="type">String</span>, fieldName: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (value.isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> IllegalArgumentException(<span class="string">&quot;<span class="variable">$id</span> empty <span class="variable">$fieldName</span>&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        validate(email, <span class="string">&quot;email&quot;</span>)</span><br><span class="line">        validate(name, <span class="string">&quot;name&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>빈 문자열인 경우 <code>IllegalArgumentException</code> 예외를 발생시키는 로직을 아래 처럼 테스트할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `member 실패`<span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> member = Member(<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    thenThrownBy &#123; member.validateBeforeSave() &#125;</span><br><span class="line">            .isExactlyInstanceOf(IllegalArgumentException::<span class="keyword">class</span>.java)</span><br><span class="line">            .hasMessageContaining(<span class="string">&quot;empty&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>특정 예외가 발생하는지, 예외 메시지의 특정한 값이 존재하는지 간단하게 확인할 수 있습니다.</p>
<h2 id="참고">참고</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.baeldung.com/parameterized-tests-junit-5">Guide to JUnit 5 Parameterized Tests</a></li>
<li><a target="_blank" rel="noopener" href="http://wonwoo.ml/index.php/post/category/kotlin">머루의개발블로그 : Spring 5.2 와 Spring boot 2.2 추가된 Test 기능들</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2-Release-Notes">Spring Boot 2.2 Release Notes</a></li>
<li><a target="_blank" rel="noopener" href="https://www.baeldung.com/parameterized-tests-junit-5">Baeldung : Guide to JUnit 5 Parameterized Tests</a></li>
</ul>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Test/" rel="tag">Test</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/immutable-properties/"
                    data-tooltip="스프링 Immutable으로 Properties 설정하기"
                    aria-label="이전: 스프링 Immutable으로 Properties 설정하기"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/jpa-nplus-1/"
                    data-tooltip="JPA N+1 발생원인과 해결방법"
                    aria-label="다음: JPA N+1 발생원인과 해결방법"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/junit5-in-spring/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/junit5-in-spring/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://cheese10yun.github.io/junit5-in-spring/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>


<!-- Comment -->
<!--  utteranc comment -->

<script src="https://utteranc.es/client.js"
        repo="cheese10yun/blog-comment"
        issue-term="title"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Yun. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/immutable-properties/"
                    data-tooltip="스프링 Immutable으로 Properties 설정하기"
                    aria-label="이전: 스프링 Immutable으로 Properties 설정하기"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/jpa-nplus-1/"
                    data-tooltip="JPA N+1 발생원인과 해결방법"
                    aria-label="다음: JPA N+1 발생원인과 해결방법"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/junit5-in-spring/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/junit5-in-spring/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://cheese10yun.github.io/junit5-in-spring/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/junit5-in-spring/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/junit5-in-spring/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://cheese10yun.github.io/junit5-in-spring/"
                        aria-label="Google+에 공유하기"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
            <h4 id="about-card-name">Yun</h4>
        
            <div id="about-card-bio"><p>기술 블로그</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>

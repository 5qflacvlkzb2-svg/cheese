
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Yun Blog">
    <title>Node Passport를 이용한 Login + Mysql - Yun Blog</title>
    <meta name="author" content="Yun">
    
        <meta name="keywords" content="Node,Spring,Spring Boot,Spring Batch,Kotlin,기술 블로그,JPA,Mongo,MySQL,OOP,">
    
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg"},"articleBody":"안녕하세요 스타트업에서 근무하고 있는 신입 개발자입니다. 이전 포스팅에서는 데이터베이스 연결 없이 가단 한 문자열로 비교로 Passport를 이용해서 사용자 인증 절차를 진행했었습니다.\n이전에 간략하게 데이터베이스 연동도 포스팅했고, 이제 단순 문자열 비교가 아닌 데이터베이스를 활용하여 Passport Login 포스팅을 진행하겠습니다.\n블로그를 보고 이해가 안 가시면 GitHub Branch develop-passport-mysql를 통해 전체 소스를 보시는 것과 이전 포스팅을 참고하시길 바랍니다.\n이번 포스팅에서 다룰 주제는 다음과 같습니다.\n\nLogin API 설정\nbcrypt를 통한 패스워드 비교\nJQuery Validate를 통한 Valdation 검사\nPassport Login 데이터베이스 비교 로직 추가\n\n필수 모듈 설치12npm install jquery-validation --savenpm install bcrypt --save\n\nAPI 라우터 설정app.js\n12345var api = require(&#x27;./routes/api&#x27;);...app.use(express.static(path.join(__dirname, &#x27;node_modules&#x27;)));...app.use(&#x27;/api/v1&#x27;, api);\n\n새로 생성한  api.js를 라우터에 추가하는 작업을 진행합니다. 해당 파일을 require 시키고 라우터에 대한 URL를 지정합니다. app.use(&#39;/api/v1&#39;, api);  이런 식으로 라우터 설정을 진행하게 되면 /ap/v1 URL로 들어오는 클라이언트의 요청은 이곳으로 들어오게 됩니다.\n다시 말하면&#x2F;ap&#x2F;v1&#x2F;login&#x2F;ap&#x2F;v1&#x2F;user&#x2F;ap&#x2F;v1&#x2F;…  \n위와 같은 클라이언트의 요청은 모두 api.js 라우터에서 처리하게 됩니다.\n필수 모듈 requireapp.js\n12345var express = require(&#x27;express&#x27;);var router = express.Router();var mysql_dbc = require(&#x27;../db/db_con&#x27;)();var connection = mysql_dbc.init();var bcrypt = require(&#x27;bcrypt&#x27;);\n\n필요한 모듈을 require 시킵니다. bcrypt 모듈을 통해서 데이터베이스에 암호와 돼있는 패스워드와 로그인 시 입력한 패스워드를 비교 작업을 진행합니다. bcrypts는 다음 포스팅에서 다루겠습니다. 이번 포스팅에서는 정말 간단하게 설명하고 지나가겠습니다.\nAPI Login 로직api.js\n12345678910111213141516171819202122router.post(&#x27;/login&#x27;, function (req, res, next) &#123;  var    user_id = req.body.username,    password =   req.body.password;  connection.query(&#x27;select *from `user` where `user_id` = ?&#x27;, user_id, function (err, result) &#123;    if (err) &#123;      console.log(&#x27;err :&#x27; + err);    &#125; else &#123;      if (result.length === 0) &#123;        res.json(&#123;success: false, msg: &#x27;해당 유저가 존재하지 않습니다.&#x27;&#125;)      &#125; else &#123;        if (!bcrypt.compareSync(password, result[0].password)) &#123;          res.json(&#123;success: false, msg: &#x27;비밀번호가 일치하지 않습니다.&#x27;&#125;)        &#125; else &#123;          res.json(&#123;success: true&#125;)        &#125;      &#125;    &#125;  &#125;);&#125;);module.exports = router;\n\n라우터의 URL 경로를 보시면 &#x2F;login으로 돼있습니다. 이미 app.js에서 &#x2F;api&#x2F;v1 URL로 지정했으니 &#x2F;api&#x2F;v1는 생략하시고 나머지 URL 경로를 입력하시면 됩니다. 즉 위의 UR 경로는 &#x2F;api&#x2F;v1&#x2F;login입니다.\n위의 로직은 간단합니다. 로그인폼에서 넘어온 유저의 값으로 쿼리를 보내 해당 값을  result에 가져옵니다. result의length 값이  0이면 해당 유저가 존재하지 않으니 json 타입으로 해당 메시지와 로그인에 결과를 반환시킵니다.\nbcrypt의 compareSync 메서드를 통해서 로그인 폼에서 넘어온 패스워드와 데이터베이스의 패스워드가 일치하는지 여부를  판단합니다. 패스워드가 일치하지 않으면 json 타입으로 해당 메시지와 로그인 결과를 반환시킵니다.\n참고로 bcrypt 통해서 패스워드 “qwer1234”를 암호화시켰고 그 암호화된 값은 “$2a$10$gpZRmDYkWIfrKkPDfzPGEO.SB39f6qeFQ036yiZ0rdsQQgWeDudBO” 입니다. compareSync메서드는 위에서 말한 두 개의 문자열 값을 비교합니다. bcrypt에 대한 설명은 다음번에 다루겠습니다.\n마지막으로 위의 로직인 해당 유저가 존재하고, 패스워드가 맞을 경우 json 타입으로 success에 true를 반환시켜줍니다.\n이제 백엔드 작업을 어느 정도 마무리했으니 프런트 엔드 쪽으로 설명하겠습니다.\n이전 포스팅에서 작성한 login.hbs 하단에 아래코드를 붙여넣습니다.12&lt;script src=&quot;jquery-validation/dist/jquery.validate.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;javascripts/login.js&quot;&gt;&lt;/script&gt;\n\n이전 예제에서 설정한 login.hbs 파일에 해당 js를 포함시켜줍니다. validation.js는 npm 모듈로 설치한 validation을 담당해주는 모듈이고 logis.js는 validation를 이용해서 위에서 만든 api.js에게 로그인폼 정보를 넘겨주는 것을 담당합니다.\n해당 뷰 파일과 자바스크립트 파일 이름을 동일하게 하는 것이 관리하기 편해서 같은 네임을 갖는 것을 권장드립니다. 참고로 저런 식으로 npm으로 설치한 모듈에 대한 접근을 하시려면 app.js 파일에 아래의 소스를 반드시 작성해야합니다.\n1app.use(express.static(path.join(__dirname, &#x27;node_modules&#x27;)));\n\nlogin.js\n123456789101112131415161718192021222324252627282930313233$(&#x27;#frm_login&#x27;).validate(&#123;  onkeyup: false,  submitHandler: function () &#123;    return true;  &#125;,  rules: &#123;    username: &#123;      required: true,      minlength: 6    &#125;,    password: &#123;      required: true,      minlength: 8,      remote: &#123;        url: &#x27;/api/v1/login&#x27;,        type: &#x27;post&#x27;,        data: &#123;          username: function () &#123;            return $(&#x27;#username&#x27;).val();          &#125;        &#125;,        dataFilter: function (data) &#123;          var data = JSON.parse(data);          if (data.success) &#123;            return true          &#125; else &#123;            return &quot;\\&quot;&quot; + data.msg + &quot;\\&quot;&quot;;          &#125;        &#125;      &#125;    &#125;  &#125;&#125;);\n\njQuery validate는 많이들 사용하실 거 같으니 간략하게 설명하겠습니다. 사용자의 입력값에 대한 유효성 검사는 반드시 해야 할 작업이지만 상당히 귀찮은 작업입니다. 그런 것을 도와주는 라이브러리라고 생각하시면 됩니다.\n사용법은 간단합니다. rules 객체에 해당  html input name값으로 객체를 만들고 필요한 설정을 이어 나가면 됩니다.\n위에 설정은 username필드는 반드시 입력되어야 하고 최소 길이가 6 이상 이여야 한다는 조건이 설정돼있습니다. 방금 설명한 조건을 만족시키지 않을 경우는 /api/v1/login을 호출하지 않습니다. 이로서 서버는 불필요한 요청을 받지 않아도 되고 클라이언트도 불필요하게 서버에게 요청하지 않고 자신의 username 필드에 제대로 입력하지 않았다는 것을 확인할 수 있습니다.\n\n해당 validation에 통화하지 않으면 각각에 맞는 메시지를 화면에 표시합니다. messsage 객체를 통해서 에러 메시지를 설정할 수도 있습니다. 아무것도 설정하지 않으면 영어로 해당  rules에 맞게 에러 메시지가 출력됩니다\nlogin.js jQeury validate remove1234567891011121314151617remote: &#123;  url: &#x27;/api/v1/login&#x27;,  type: &#x27;post&#x27;,  data: &#123;    username: function () &#123;      return $(&#x27;#username&#x27;).val();    &#125;  &#125;,  dataFilter: function (data) &#123;    var data = JSON.parse(data);    if (data.success) &#123;      return true    &#125; else &#123;      return &quot;\\&quot;&quot; + data.msg + &quot;\\&quot;&quot;;    &#125;  &#125;&#125;\n\npassword의 객체에 remote가 중요합니다. 위의 소스 중에 remote 부분만 따로 설명드리겠습니다.\n패스워드 필드의 rules조건이 충족되면 위에서 만든 api.js의 &#x2F;api&#x2F;v1&#x2F;login URL로 요청을 보내게 됩니다. password 객체에 remote 객체가 있기 때문에 password 값은 자동으로 넘어가게 되고 유저네임의 값은 username 메서드를 통해서 전해지게 됩니다.\n즉 위에서 작성한 router.post(‘&#x2F;login’, function (req, res, next) {…} 라우터로 username, password가 전달됩니다. 전달받은 값을 기준으로 로그인 성공 여부와 그에 따른 메시지를 반환시켜줍니다.\ndataFilter 메서드는 위에서 반환시켜주는 값을 data 파마미터를 통해서 받습니다. JSON.parse 메서드를 통해서 Object로 변환시켜줍니다.\n\n로그인 성공 여부를 판단하고 로그인 실패 시 login api에서 반환시키는 메시지를 출력시킵니다. 로그인이 성공할 경우는 login.hbs의  form action 값인 &#x2F;login으로 전송이 이루어집니다.index.js\n12345678910111213141516171819202122232425262728passport.use(new LocalStrategy(&#123;  usernameField: &#x27;username&#x27;,  passwordField: &#x27;password&#x27;,  passReqToCallback: true //인증을 수행하는 인증 함수로 HTTP request를 그대로  전달할지 여부를 결정한다&#125;, function (req, username, password, done) &#123;  connection.query(&#x27;select *from `user` where `user_id` = ?&#x27;, username, function (err, result) &#123;    if (err) &#123;      console.log(&#x27;err :&#x27; + err);      return done(false, null);    &#125; else &#123;      if (result.length === 0) &#123;        console.log(&#x27;해당 유저가 없습니다&#x27;);        return done(false, null);      &#125; else &#123;        if (!bcrypt.compareSync(password, result[0].password)) &#123;          console.log(&#x27;패스워드가 일치하지 않습니다&#x27;);          return done(false, null);        &#125; else &#123;          console.log(&#x27;로그인 성공&#x27;);          return done(null, &#123;            user_id: result[0].user_id,            nickname: result[0].nickname          &#125;);        &#125;      &#125;    &#125;  &#125;)&#125;));\n\n이전 포스팅에서는 문자열 비교로 passport 인증 부분을 데이터베이스를 통한 인증으로 수정하였습니다. 위에서 설명해드렸던 api login 로직과 크게 다르지 않으며 로그인 성공 시에 user_id, nickname을 세션에 저장시킵니다. 이 전에 포스팅했던 passport 로직이 index에 있어 이 곳에서 동일한 작업을 진행하였습니다.\n\n정리하며…이번 포스팅은 상대적으로 소스 내용이 길어 다들 이해하셨을지 모르겠습니다. 이해가 안 되시면 깃허브에 있는 전체 소스를 보는 것을 추천드립니다. 깃허브에 있는 프로젝트에 해당 branch 마다 기능을 정리하는 방식으로 조금씩 조금씩 기능을 추가할 계획입니다. 기능은 딱히 통일성은 없고 많이 사용하고, 사내에서 만든 기능들을 추가할 거 같습니다. AWS S3 업로드, Passport 소셜 로그인, Redis 등 다소 통일성은 없으나 어디서나 쓸 수 있는 것들을 간단하게 정리해 나아가겠습니다.\n긴 글 읽어주셔서 감사드립니다. 다들 올해도 재미있게 개발할 수 있는 한 해가 되셨으면 합니다.\n","dateCreated":"2017-01-07T00:00:00+09:00","dateModified":"2025-01-31T04:36:07+09:00","datePublished":"2017-01-07T00:00:00+09:00","description":"안녕하세요 스타트업에서 근무하고 있는 신입 개발자입니다. 이전 포스팅에서는 데이터베이스 연결 없이 가단 한 문자열로 비교로 Passport를 이용해서 사용자 인증 절차를 진행했었습니다.","headline":"Node Passport를 이용한 Login + Mysql","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://cheese10yun.github.io/2017/01/07/passport-mysql/"},"publisher":{"@type":"Organization","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg","logo":{"@type":"ImageObject","url":"yun-icon.jpg"}},"url":"https://cheese10yun.github.io/2017/01/07/passport-mysql/","keywords":"Node"}</script>
    <meta name="description" content="안녕하세요 스타트업에서 근무하고 있는 신입 개발자입니다. 이전 포스팅에서는 데이터베이스 연결 없이 가단 한 문자열로 비교로 Passport를 이용해서 사용자 인증 절차를 진행했었습니다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Node Passport를 이용한 Login + Mysql">
<meta property="og:url" content="https://cheese10yun.github.io/2017/01/07/passport-mysql/index.html">
<meta property="og:site_name" content="Yun Blog">
<meta property="og:description" content="안녕하세요 스타트업에서 근무하고 있는 신입 개발자입니다. 이전 포스팅에서는 데이터베이스 연결 없이 가단 한 문자열로 비교로 Passport를 이용해서 사용자 인증 절차를 진행했었습니다.">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://i.imgur.com/2V9a6TK.png">
<meta property="og:image" content="https://i.imgur.com/XKKtAdc.png">
<meta property="og:image" content="https://i.imgur.com/MCCndzb.png">
<meta property="og:image" content="https://i.imgur.com/ZtlY3cK.png">
<meta property="og:image" content="https://i.imgur.com/E3Q7px1.png">
<meta property="article:published_time" content="2017-01-06T15:00:00.000Z">
<meta property="article:modified_time" content="2025-01-30T19:36:07.097Z">
<meta property="article:author" content="Yun">
<meta property="article:tag" content="Node">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/2V9a6TK.png">
    
    
        
    
    
        <meta property="og:image" content="https://cheese10yun.github.io/assets/images/yun-icon.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90907312-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90907312-1');
    </script>


    

    
        
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5813739623204880" crossorigin="anonymous"></script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Yun Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="저자에 대해 더 알아보기"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
                </a>
                <h4 class="sidebar-profile-name">Yun</h4>
                
                    <h5 class="sidebar-profile-bio"><p>기술 블로그</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="검색"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">검색</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/cheese10yun"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/rss2.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Node Passport를 이용한 Login + Mysql
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2017-01-07T00:00:00+09:00">
	
		    2017/01/07
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>안녕하세요 스타트업에서 근무하고 있는 신입 개발자입니다. 이전 포스팅에서는 데이터베이스 연결 없이 가단 한 문자열로 비교로 Passport를 이용해서 사용자 인증 절차를 진행했었습니다.</p>
<p>이전에 간략하게 데이터베이스 연동도 포스팅했고, 이제 단순 문자열 비교가 아닌 데이터베이스를 활용하여 Passport Login 포스팅을 진행하겠습니다.</p>
<p>블로그를 보고 이해가 안 가시면 <a target="_blank" rel="noopener" href="https://github.com/cheese10yun/node-yun">GitHub Branch develop-passport-mysql</a>를 통해 전체 소스를 보시는 것과 이전 포스팅을 참고하시길 바랍니다.</p>
<p><strong>이번 포스팅에서 다룰 주제는 다음과 같습니다.</strong></p>
<ul>
<li>Login API 설정</li>
<li>bcrypt를 통한 패스워드 비교</li>
<li>JQuery Validate를 통한 Valdation 검사</li>
<li>Passport Login 데이터베이스 비교 로직 추가</li>
</ul>
<h3 id="필수-모듈-설치"><a href="#필수-모듈-설치" class="headerlink" title="필수 모듈 설치"></a>필수 모듈 설치</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install jquery-validation --save</span><br><span class="line">npm install bcrypt --save</span><br></pre></td></tr></table></figure>

<h3 id="API-라우터-설정"><a href="#API-라우터-설정" class="headerlink" title="API 라우터 설정"></a>API 라우터 설정</h3><p><code>app.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> api = <span class="built_in">require</span>(<span class="string">&#x27;./routes/api&#x27;</span>);</span><br><span class="line">...</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;node_modules&#x27;</span>)));</span><br><span class="line">...</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api/v1&#x27;</span>, api);</span><br></pre></td></tr></table></figure>

<p>새로 생성한  <code>api.js</code>를 라우터에 추가하는 작업을 진행합니다. 해당 파일을 require 시키고 라우터에 대한 URL를 지정합니다. <code>app.use(&#39;/api/v1&#39;, api);</code>  이런 식으로 라우터 설정을 진행하게 되면 <code>/ap/v1 URL</code>로 들어오는 클라이언트의 요청은 이곳으로 들어오게 됩니다.</p>
<p>다시 말하면<br><strong>&#x2F;ap&#x2F;v1&#x2F;login</strong><br><strong>&#x2F;ap&#x2F;v1&#x2F;user</strong><br><strong>&#x2F;ap&#x2F;v1&#x2F;…</strong>  </p>
<p>위와 같은 클라이언트의 요청은 모두 api.js 라우터에서 처리하게 됩니다.</p>
<h3 id="필수-모듈-require"><a href="#필수-모듈-require" class="headerlink" title="필수 모듈 require"></a>필수 모듈 require</h3><p><code>app.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="keyword">var</span> mysql_dbc = <span class="built_in">require</span>(<span class="string">&#x27;../db/db_con&#x27;</span>)();</span><br><span class="line"><span class="keyword">var</span> connection = mysql_dbc.<span class="title function_">init</span>();</span><br><span class="line"><span class="keyword">var</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcrypt&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>필요한 모듈을 require 시킵니다. bcrypt 모듈을 통해서 데이터베이스에 암호와 돼있는 패스워드와 로그인 시 입력한 패스워드를 비교 작업을 진행합니다. bcrypts는 다음 포스팅에서 다루겠습니다. 이번 포스팅에서는 정말 간단하게 설명하고 지나가겠습니다.</p>
<h3 id="API-Login-로직"><a href="#API-Login-로직" class="headerlink" title="API Login 로직"></a>API Login 로직</h3><p><code>api.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span></span><br><span class="line">    user_id = req.<span class="property">body</span>.<span class="property">username</span>,</span><br><span class="line">    password =   req.<span class="property">body</span>.<span class="property">password</span>;</span><br><span class="line"></span><br><span class="line">  connection.<span class="title function_">query</span>(<span class="string">&#x27;select *from `user` where `user_id` = ?&#x27;</span>, user_id, <span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err :&#x27;</span> + err);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (result.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        res.<span class="title function_">json</span>(&#123;<span class="attr">success</span>: <span class="literal">false</span>, <span class="attr">msg</span>: <span class="string">&#x27;해당 유저가 존재하지 않습니다.&#x27;</span>&#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!bcrypt.<span class="title function_">compareSync</span>(password, result[<span class="number">0</span>].<span class="property">password</span>)) &#123;</span><br><span class="line">          res.<span class="title function_">json</span>(&#123;<span class="attr">success</span>: <span class="literal">false</span>, <span class="attr">msg</span>: <span class="string">&#x27;비밀번호가 일치하지 않습니다.&#x27;</span>&#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          res.<span class="title function_">json</span>(&#123;<span class="attr">success</span>: <span class="literal">true</span>&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br></pre></td></tr></table></figure>

<p>라우터의 URL 경로를 보시면 &#x2F;login으로 돼있습니다. 이미 app.js에서 &#x2F;api&#x2F;v1 URL로 지정했으니 &#x2F;api&#x2F;v1는 생략하시고 나머지 URL 경로를 입력하시면 됩니다. 즉 위의 UR 경로는 &#x2F;api&#x2F;v1&#x2F;login입니다.</p>
<p>위의 로직은 간단합니다. 로그인폼에서 넘어온 유저의 값으로 쿼리를 보내 해당 값을  result에 가져옵니다. result의length 값이  0이면 해당 유저가 존재하지 않으니 json 타입으로 해당 메시지와 로그인에 결과를 반환시킵니다.</p>
<p>bcrypt의 compareSync 메서드를 통해서 로그인 폼에서 넘어온 패스워드와 데이터베이스의 패스워드가 일치하는지 여부를  판단합니다. 패스워드가 일치하지 않으면 json 타입으로 해당 메시지와 로그인 결과를 반환시킵니다.</p>
<p>참고로 bcrypt 통해서 패스워드 “qwer1234”를 암호화시켰고 그 암호화된 값은 “$2a$10$gpZRmDYkWIfrKkPDfzPGEO.SB39f6qeFQ036yiZ0rdsQQgWeDudBO” 입니다. compareSync메서드는 위에서 말한 두 개의 문자열 값을 비교합니다. bcrypt에 대한 설명은 다음번에 다루겠습니다.</p>
<p>마지막으로 위의 로직인 해당 유저가 존재하고, 패스워드가 맞을 경우 json 타입으로 success에 true를 반환시켜줍니다.</p>
<p>이제 백엔드 작업을 어느 정도 마무리했으니 프런트 엔드 쪽으로 설명하겠습니다.</p>
<h4 id="이전-포스팅에서-작성한-login-hbs-하단에-아래코드를-붙여넣습니다"><a href="#이전-포스팅에서-작성한-login-hbs-하단에-아래코드를-붙여넣습니다" class="headerlink" title="이전 포스팅에서 작성한 login.hbs 하단에 아래코드를 붙여넣습니다."></a>이전 포스팅에서 작성한 login.hbs 하단에 아래코드를 붙여넣습니다.</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-validation/dist/jquery.validate.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;javascripts/login.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>이전 예제에서 설정한 login.hbs 파일에 해당 js를 포함시켜줍니다. validation.js는 npm 모듈로 설치한 validation을 담당해주는 모듈이고 logis.js는 validation를 이용해서 위에서 만든 api.js에게 로그인폼 정보를 넘겨주는 것을 담당합니다.</p>
<p>해당 뷰 파일과 자바스크립트 파일 이름을 동일하게 하는 것이 관리하기 편해서 같은 네임을 갖는 것을 권장드립니다. 참고로 저런 식으로 npm으로 설치한 모듈에 대한 접근을 하시려면 app.js 파일에 아래의 소스를 반드시 작성해야합니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;node_modules&#x27;</span>)));</span><br></pre></td></tr></table></figure>

<p><code>login.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#frm_login&#x27;</span>).<span class="title function_">validate</span>(&#123;</span><br><span class="line">  <span class="attr">onkeyup</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">submitHandler</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: &#123;</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">minlength</span>: <span class="number">6</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">password</span>: &#123;</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">minlength</span>: <span class="number">8</span>,</span><br><span class="line">      <span class="attr">remote</span>: &#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/api/v1/login&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">username</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> $(<span class="string">&#x27;#username&#x27;</span>).<span class="title function_">val</span>();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">dataFilter</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">          <span class="keyword">var</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span><br><span class="line">          <span class="keyword">if</span> (data.<span class="property">success</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;\&quot;&quot;</span> + data.<span class="property">msg</span> + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>jQuery validate는 많이들 사용하실 거 같으니 간략하게 설명하겠습니다. 사용자의 입력값에 대한 유효성 검사는 반드시 해야 할 작업이지만 상당히 귀찮은 작업입니다. 그런 것을 도와주는 라이브러리라고 생각하시면 됩니다.</p>
<p>사용법은 간단합니다. rules 객체에 해당  html input name값으로 객체를 만들고 필요한 설정을 이어 나가면 됩니다.</p>
<p>위에 설정은 username필드는 반드시 입력되어야 하고 최소 길이가 6 이상 이여야 한다는 조건이 설정돼있습니다. 방금 설명한 조건을 만족시키지 않을 경우는 <code>/api/v1/login</code>을 호출하지 않습니다. 이로서 서버는 불필요한 요청을 받지 않아도 되고 클라이언트도 불필요하게 서버에게 요청하지 않고 자신의 username 필드에 제대로 입력하지 않았다는 것을 확인할 수 있습니다.</p>
<p><img src="https://i.imgur.com/2V9a6TK.png"><br><img src="https://i.imgur.com/XKKtAdc.png"></p>
<p>해당 validation에 통화하지 않으면 각각에 맞는 메시지를 화면에 표시합니다. messsage 객체를 통해서 에러 메시지를 설정할 수도 있습니다. 아무것도 설정하지 않으면 영어로 해당  rules에 맞게 에러 메시지가 출력됩니다</p>
<h4 id="login-js-jQeury-validate-remove"><a href="#login-js-jQeury-validate-remove" class="headerlink" title="login.js jQeury validate remove"></a>login.js jQeury validate remove</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">remote</span>: &#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/api/v1/login&#x27;</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> $(<span class="string">&#x27;#username&#x27;</span>).<span class="title function_">val</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">dataFilter</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">success</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;\&quot;&quot;</span> + data.<span class="property">msg</span> + <span class="string">&quot;\&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>password의 객체에 remote가 중요합니다. 위의 소스 중에 remote 부분만 따로 설명드리겠습니다.</p>
<p>패스워드 필드의 rules조건이 충족되면 위에서 만든 api.js의 &#x2F;api&#x2F;v1&#x2F;login URL로 요청을 보내게 됩니다. password 객체에 remote 객체가 있기 때문에 password 값은 자동으로 넘어가게 되고 유저네임의 값은 username 메서드를 통해서 전해지게 됩니다.</p>
<p>즉 위에서 작성한 router.post(‘&#x2F;login’, function (req, res, next) {…} 라우터로 username, password가 전달됩니다. 전달받은 값을 기준으로 로그인 성공 여부와 그에 따른 메시지를 반환시켜줍니다.</p>
<p>dataFilter 메서드는 위에서 반환시켜주는 값을 data 파마미터를 통해서 받습니다. JSON.parse 메서드를 통해서 Object로 변환시켜줍니다.</p>
<p><img src="https://i.imgur.com/MCCndzb.png"><br><img src="https://i.imgur.com/ZtlY3cK.png"></p>
<p>로그인 성공 여부를 판단하고 로그인 실패 시 login api에서 반환시키는 메시지를 출력시킵니다. 로그인이 성공할 경우는 login.hbs의  form action 값인 &#x2F;login으로 전송이 이루어집니다.<br><code>index.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">passport.<span class="title function_">use</span>(<span class="keyword">new</span> <span class="title class_">LocalStrategy</span>(&#123;</span><br><span class="line">  <span class="attr">usernameField</span>: <span class="string">&#x27;username&#x27;</span>,</span><br><span class="line">  <span class="attr">passwordField</span>: <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">  <span class="attr">passReqToCallback</span>: <span class="literal">true</span> <span class="comment">//인증을 수행하는 인증 함수로 HTTP request를 그대로  전달할지 여부를 결정한다</span></span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">req, username, password, done</span>) &#123;</span><br><span class="line">  connection.<span class="title function_">query</span>(<span class="string">&#x27;select *from `user` where `user_id` = ?&#x27;</span>, username, <span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err :&#x27;</span> + err);</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">done</span>(<span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (result.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;해당 유저가 없습니다&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">done</span>(<span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!bcrypt.<span class="title function_">compareSync</span>(password, result[<span class="number">0</span>].<span class="property">password</span>)) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;패스워드가 일치하지 않습니다&#x27;</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">done</span>(<span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;로그인 성공&#x27;</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">done</span>(<span class="literal">null</span>, &#123;</span><br><span class="line">            <span class="attr">user_id</span>: result[<span class="number">0</span>].<span class="property">user_id</span>,</span><br><span class="line">            <span class="attr">nickname</span>: result[<span class="number">0</span>].<span class="property">nickname</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<p>이전 포스팅에서는 문자열 비교로 passport 인증 부분을 데이터베이스를 통한 인증으로 수정하였습니다. 위에서 설명해드렸던 api login 로직과 크게 다르지 않으며 로그인 성공 시에 user_id, nickname을 세션에 저장시킵니다. 이 전에 포스팅했던 passport 로직이 index에 있어 이 곳에서 동일한 작업을 진행하였습니다.</p>
<p><img src="https://i.imgur.com/E3Q7px1.png"></p>
<h3 id="정리하며…"><a href="#정리하며…" class="headerlink" title="정리하며…"></a>정리하며…</h3><p>이번 포스팅은 상대적으로 소스 내용이 길어 다들 이해하셨을지 모르겠습니다. 이해가 안 되시면 깃허브에 있는 전체 소스를 보는 것을 추천드립니다. 깃허브에 있는 프로젝트에 해당 branch 마다 기능을 정리하는 방식으로 조금씩 조금씩 기능을 추가할 계획입니다. 기능은 딱히 통일성은 없고 많이 사용하고, 사내에서 만든 기능들을 추가할 거 같습니다. AWS S3 업로드, Passport 소셜 로그인, Redis 등 다소 통일성은 없으나 어디서나 쓸 수 있는 것들을 간단하게 정리해 나아가겠습니다.</p>
<p>긴 글 읽어주셔서 감사드립니다. 다들 올해도 재미있게 개발할 수 있는 한 해가 되셨으면 합니다.</p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Node/" rel="tag">Node</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2017/01/10/bootstrap-modall/"
                    data-tooltip="Bootstrap Modal 입력값 초기화"
                    aria-label="이전: Bootstrap Modal 입력값 초기화"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2017/01/05/mysql-node/"
                    data-tooltip="Node.JS + Mysql 연동"
                    aria-label="다음: Node.JS + Mysql 연동"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>


<!-- Comment -->
<!--  utteranc comment -->

<script src="https://utteranc.es/client.js"
        repo="cheese10yun/blog-comment"
        issue-term="title"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Yun. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2017/01/10/bootstrap-modall/"
                    data-tooltip="Bootstrap Modal 입력값 초기화"
                    aria-label="이전: Bootstrap Modal 입력값 초기화"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2017/01/05/mysql-node/"
                    data-tooltip="Node.JS + Mysql 연동"
                    aria-label="다음: Node.JS + Mysql 연동"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://cheese10yun.github.io/2017/01/07/passport-mysql/"
                        aria-label="Google+에 공유하기"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
            <h4 id="about-card-name">Yun</h4>
        
            <div id="about-card-bio"><p>기술 블로그</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>

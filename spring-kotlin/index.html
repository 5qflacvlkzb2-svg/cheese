
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="naver-site-verification" content="a37ea649edf26e70c3de94f9cb034f9d6e11de3f" />
    <meta name="generator" content="Yun Blog">
    <title>Kotlin으로 Spring 개발할 때 - Yun Blog</title>
    <meta name="author" content="Yun">
    
        <meta name="keywords" content="Node,Spring,Spring Boot,Spring Batch,Kotlin,기술 블로그,JPA,Mongo,MySQL,OOP,">
    
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg"},"articleBody":"코틀린 기반으로 스프링 프레임워크를 사용하는 경우 다양한 플러그인의 도움으로 보다 쉽게 개발을 진행할 수 있습니다. 어떤 플러그인이 있고 그것이 어떤 역할을 하는지에 대해서 정리해 보았습니다.\nKotlin Plugin#\n1234plugins &#123;    kotlin(&quot;plugin.spring&quot;) version &quot;1.4.32&quot;    kotlin(&quot;plugin.jpa&quot;) version &quot;1.4.32&quot;&#125;\n코틀린 언어로 스프링을 사용하는 경우는 plugin.spring 플러그인은 필수적이고, JPA를 사용한다면 plugin.jpa 또 한 필수적으로 사용하게 됩니다. 각각의 플러그인에 대해서 이야기해보겠습니다.\nplugin.spring 플러그인#\nall-open#\n해당 플러그인을 사용하면 아래 어노테이션이 있으면 all-open을 자동으로 추가시킵니다. 참고로 kotlin-allopen, plugin.spring는 동일한 프로젝트입니다.\n\n@Component\n@Async\n@Transactional\n@Cacheable\n@SpringBootTest\n@Configuration, @Controller, @RestController, @Service, @Repository, @Component\n\n123class Foo &#123;    fun test() &#123;&#125;&#125;\n코틀린에서는 기본적으로 클래스에는 final 키워드가 추가되며, 위 코드도 final 키워드를 생략하더라도 자동으로 추가합니다.\n123public final class Foo public constructor() &#123;    public final fun test(): kotlin.Unit &#123; /* compiled code */ &#125;&#125;\nFoo 클래스를 빌드 하면 위처럼 final 키워드가 붙어 있는 것을 확인할 수 있습니다.\n1234@Transactionalclass Foo &#123;    fun test() &#123;&#125;&#125;\n@Transactional 어노테이션을 붙이고 다시 빌드 해보고 클래스 파일을 살펴보겠습니다.\n123@org.springframework.transaction.annotation.Transactional public open class Foo public constructor() &#123;    public open fun test(): kotlin.Unit &#123; /* compiled code */ &#125;&#125;\nclass, fun 키워드 앞에 open 키워드가 추가된 것을 확인할 수 있습니다. plugin.spring이 위의 어노테이션이 추가된 클래스에는 자동으로 open 키워드를 자동으로 추가합니다. Spring Initializr를 이용해서 프로젝트를 구성하면 plugin.spring 플러그인은 자동 적용됩니다.\n1234allOpen &#123;    annotation(&quot;javax.persistence.Entity&quot;)    ...&#125;\ngradle 설정으로 특정 어노테이션에 대해서 allOpen을 동작 시킬 수 있습니다.\n1234567891011121314@Entity@Table(name = &quot;book&quot;)class Book(    @Column(name = &quot;title&quot;, nullable = false)    var title: String,    @Column(name = &quot;writer&quot;, nullable = false)    var writer: String,    ...) : AuditingEntity() &#123;&#125;\n위 객체를 빌드 해서 클래스 파일을 확인하면 아래와 같습니다.\n123456789@javax.persistence.Entity @javax.persistence.Table public open class Book public constructor(title: kotlin.String, writer: kotlin.String, publisher: kotlin.String, price: java.math.BigDecimal) : com.spring.sample.AuditingEntity &#123;    @field:javax.persistence.Column public open var price: java.math.BigDecimal /* compiled code */    @field:javax.persistence.Column public open var publisher: kotlin.String /* compiled code */    @field:javax.persistence.Column public open var title: kotlin.String /* compiled code */    @field:javax.persistence.Column public open var writer: kotlin.String /* compiled code */&#125;\n특정 어노테이션에 open 키워드를 편리하기 추가할 수 있습니다.\nall-open은 왜 필요할까?#\n\nSpring Boot 2.x 버전부터는 CGLIB Proxy 방식으로 Bean을 관리하고 있습니다. CGLIB Proxy는 Target Class를 상속받아 생성하기 때문에 open으로 상속이 가능한 상태이어야 합니다. 그러기 때문에 all-open 플러그인이 필요합니다.\nno-arg#\nno-arg는 argument가 없는 기본 생성자를 의미합니다. 클래스는 기본 생성자가 기본적으로 생성되며 다른 생성자를 만들면 기본 생성자는 명시적으로 선언하지 않는 이상 사라지게 됩니다.\n1234567891011121314class Bar(val name: String) &#123;    // constructor() : this(&quot;none name&quot;)&#125;// 기본 생성자를 주석한 경우public final class Bar public constructor(name: kotlin.String) &#123;    public final val name: kotlin.String /* compiled code */&#125;// 기본 생성자를 주석 하지 않는 경우public final class Bar public constructor(name: kotlin.String) &#123;    public constructor() &#123; /* compiled code */ &#125;    public final val name: kotlin.String /* compiled code */&#125;\nno-arg는 주로 plugin.jpa 플러그인과 같이 사용됩니다. kotlin-spring 플러그인과 마찬가지로 @Entity, @Embeddable, @MappedSuperclass 어노테이션에 자동으로 동작합니다.\n123456789101112131415161718192021222324252627282930313233343536@Entity@Table(name = &quot;book&quot;)class Book(    @Column(name = &quot;title&quot;, nullable = false)    var title: String,    @Column(name = &quot;writer&quot;, nullable = false)    var writer: String,    @Column(name = &quot;publisher&quot;, nullable = false)    var publisher: String,    @Column(name = &quot;price&quot;, nullable = false)    var price: BigDecimal) : AuditingEntity() &#123;&#125;// 빌드한 클래스를 Decompile 결과public class Book extends AuditingEntity &#123;    ...    public Book(@NotNull String title, @NotNull String writer, @NotNull String publisher, @NotNull BigDecimal price) &#123;      Intrinsics.checkNotNullParameter(title, &quot;title&quot;);      Intrinsics.checkNotNullParameter(writer, &quot;writer&quot;);      Intrinsics.checkNotNullParameter(publisher, &quot;publisher&quot;);      Intrinsics.checkNotNullParameter(price, &quot;price&quot;);      super();      this.title = title;      this.writer = writer;      this.publisher = publisher;      this.price = price;   &#125;   public Book() &#123;   &#125;&#125;\nBook 객체에 기본 생성자가 없지만 plugin.jpa 플러그인으로 인해서 기본 생성자가 생성됩니다.\nplugin.jpa 플러그인#\nno-arg에서 언급했듯이 plugin.jpa 플러그인을 사용 하면 @Entity, @Embeddable, @MappedSuperclass 어노테이션을 사용해면 no-arg생성자(기본 생성자)가 자동으로 생성됩니다.\nno-arg이 왜 필요할까?#\nplugin.jpa 플러그인 없이, 즉 기본 생성자가 없는 상태에서 JPA 아래 테스트 코드를 실행해보겠습니다.\n123456789101112131415161718192021222324252627282930313233@Entity@Table(name = &quot;book&quot;)class Book(    @Column(name = &quot;title&quot;, nullable = false)    var title: String,    @Column(name = &quot;writer&quot;, nullable = false)    var writer: String,    @Column(name = &quot;publisher&quot;, nullable = false)    var publisher: String,    @Column(name = &quot;price&quot;, nullable = false)    var price: BigDecimal) : AuditingEntity() // @Id 필드는 AuditingEntity 객체에 있습니다.@Transactionalinternal class BookTest(    private val bookRepository: BookRepository,) : SpringTestSupport() &#123;    @Test    internal fun `boot save`() &#123;        bookRepository.save(            Book(                title = &quot;title&quot;,                writer = &quot;writer&quot;,                publisher = &quot;publisher&quot;,                price = BigDecimal.TEN            )        )    &#125;&#125;\n\n기본 생성자가 없어 Error가 발생하는 것을 확인할 수 있습니다. Book 클래스 파일을 decompile 해서 코드를 확인해보겠습니다.\n123456789101112131415public class Book extends AuditingEntity &#123;    ...   public Book(@NotNull String title, @NotNull String writer, @NotNull String publisher, @NotNull BigDecimal price) &#123;      Intrinsics.checkNotNullParameter(title, &quot;title&quot;);      Intrinsics.checkNotNullParameter(writer, &quot;writer&quot;);      Intrinsics.checkNotNullParameter(publisher, &quot;publisher&quot;);      Intrinsics.checkNotNullParameter(price, &quot;price&quot;);      super();      this.title = title;      this.writer = writer;      this.publisher = publisher;      this.price = price;   &#125;&#125;\nall-argument생성자는 존재하지만, no-arg생성자는 존재하지 않습니다. Hibernate는 Reflection으로 객체를 생성하기 때문에 protected 이상의 생성자가 필요합니다. 다시 plugin.jpa 플러그인 적용해서 decompile 해보겠습니다.\n123456789101112131415161718public class Book extends AuditingEntity &#123;    ...   public Book(@NotNull String title, @NotNull String writer, @NotNull String publisher, @NotNull BigDecimal price) &#123;      Intrinsics.checkNotNullParameter(title, &quot;title&quot;);      Intrinsics.checkNotNullParameter(writer, &quot;writer&quot;);      Intrinsics.checkNotNullParameter(publisher, &quot;publisher&quot;);      Intrinsics.checkNotNullParameter(price, &quot;price&quot;);      super();      this.title = title;      this.writer = writer;      this.publisher = publisher;      this.price = price;   &#125;   public Book() &#123;   &#125;&#125;\nno-arg생성자가 코드가 있는 것을 확인할 수 있고, 테스트 코드도 정상적으로 동작하는 것을 확인할 수 있습니다.\n\nall-open In JPA#\n123456# build.gradle.ktsallOpen &#123;    annotation(&quot;javax.persistence.Entity&quot;)    annotation(&quot;javax.persistence.MappedSuperclass&quot;)    annotation(&quot;javax.persistence.Embeddable&quot;)&#125;\nplugin.jpa을 사용하면 no-arg @Entity, @Embeddable, @MappedSuperclass 코드에 자동으로 추가되지만 all-open 명시적으로 위처럼 선언해야 합니다.\n123456789101112131415161718192021# allOpen 없는 경우\u001f@javax.persistence.Entity @javax.persistence.Table public final class Book public constructor(title: kotlin.String, writer: kotlin.String, publisher: kotlin.String, price: java.math.BigDecimal) : com.spring.sample.AuditingEntity &#123;    @field:javax.persistence.Column public final var price: java.math.BigDecimal /* compiled code */    @field:javax.persistence.Column public final var publisher: kotlin.String /* compiled code */    @field:javax.persistence.Column public final var title: kotlin.String /* compiled code */    @field:javax.persistence.Column public final var writer: kotlin.String /* compiled code */&#125;# allOpen 있는 경우@javax.persistence.Entity @javax.persistence.Table public open class Book public constructor(title: kotlin.String, writer: kotlin.String, publisher: kotlin.String, price: java.math.BigDecimal) : com.spring.sample.AuditingEntity &#123;    @field:javax.persistence.Column public open var price: java.math.BigDecimal /* compiled code */    @field:javax.persistence.Column public open var publisher: kotlin.String /* compiled code */    @field:javax.persistence.Column public open var title: kotlin.String /* compiled code */    @field:javax.persistence.Column public open var writer: kotlin.String /* compiled code */&#125;\n위 코드의 차이점은 allOpen이 없는 경우 fianl 키워드가 있고, allOpen이 있는 경우 open 키워드가 있습니다. open 키워드가 없으면 Proxy 기반으로 Lazy 로딩을 할 수 없습니다.\n1234567891011121314151617@Entity@Table(name = &quot;book&quot;)class Book(    @Column(name = &quot;title&quot;, nullable = false)    var title: String,    @ManyToOne(fetch = FetchType.LAZY, targetEntity = Order::class)    @JoinColumn(name = &quot;order_id&quot;, nullable = false)    var order: Order) : AuditingEntity()@Entity@Table(name = &quot;orders&quot;)class Order(    @Column(name = &quot;title&quot;, nullable = false)    var number: String) : AuditingEntity()\n@ManyToOne 관계이며, Lazy fetch 전략을 설정했습니다.\n123456789101112@Testinternal fun `lazy loading test`() &#123;    // 데이터 set up    val order = orderRepository.save(Order(&quot;202012-12&quot;))    val book = bookRepository.save(Book(title = &quot;title&quot;, order = order))    // 영속성 컨텍스트 초기화    entityManager.clear()    // lazy loading 이기 때문에 book에 대한 조회 쿼리는 발생하지 않을 것이라고 예상    val findBook = bookRepository.findByIdOrNull(book.id!!)!!&#125;\nLazy 패치 전략을 사용했기 때문에 book에 대한 조회 시 order에 대한 조회가 쿼리가 발생하지 않을 것이라고 예상했지만 결과는 다릅니다.\n\norder에 대한 조회 발생합니다. 디버깅 모드를 활용해서 해당 값을 확인해보겠습니다.\n\nLazy Loading이기 때문에 order는 Proxy 객체이어야 합니다. 하지만 Proxy 객체가 아니라 실제 order 객체를 가지고 있는 것을 확인할 수 있습니다. 그 이유는 Kotlin은 기본적으로 final이기 때문에 Proxy 클래스를 생성하지 못합니다. Proxy 클래스를 생성하기 위해서는 상속이 가능해야 하므로 open이 필요한데 없으니 Proxy 기반으로 Lazy Loading을 진행할 수 없는 것입니다. 그렇다면 allOpen을 적용하고 다시 테스트해보겠습니다.\n\n\nLazy Loading이 정상적으로 동작하고 Proxy 기반으로 order 객체를 가져오는것을 확인할 수 있습니다.\njackson-module-kotlin 모듈#\nSpring Initializr를 이용해서 Spring Web MVC 프로젝트를 생성하게 되면 com.fasterxml.jackson.module:jackson-module-kotlin 디펜던시가 자동으로 추가된다. jackson-module-kotlin는 기존 Jackson으로 deserialize 하기 위해서는 기본 생성자가 반드시 필요합니다. 하지만 코틀린에서 data class의 객체를 deserialize를 진행하게 되면 기본 생성자가 없기 때문에 아래와 같은 예외가 발생합니다.\n1(no Creators, like default construct, exist): cannot deserialize from Object valu...\n12345678910class SampleRequestBody &#123;    private String name;    private int age;// all arguments 생성자는 주석//    public SampleRequestBody(String name, int age) &#123;//        this.name = name;//        this.age = age;//    &#125;&#125;\n위 같은 자바 코드는 all arguments 생성자가 주석인 경우 기본 생성자를 명시적으로 선언하지 않아도 존재하기 때문에 deserialize 진행에 문제가 없습니다. 만약 다른 생성자가 있다면 명시적으로 기본 생성자를 작성하지 않으면 예외가 발생합니다.\n12345678910111213141516171819202122232425262728data class SampleRequestBody(    val name: String,    val age: Int)// 위 data class를 빌드 이후 Decompile 결과public final class SampleRequestBody &#123;   @NotNull   private final String name;   private final int age;   @NotNull   public final String getName() &#123;      return this.name;   &#125;   public final int getAge() &#123;      return this.age;   &#125;   public SampleRequestBody(@NotNull String name, int age) &#123;      Intrinsics.checkNotNullParameter(name, &quot;name&quot;);      super();      this.name = name;      this.age = age;   &#125;   ..&#125;\n코틀린의 data class는 all argument 생성자만 생성하기 때문에 기존 jackson으로 deserialize를 못하고 jackson-module-kotlin을 통해서 단일 생성자로 deserialize를 진행할 수 있습니다. 하지만 최근에는 이 부분도 개선되어 굳이 jackson-module-kotlin 모듈의 도움 없이 기본 생성자가 없이도 deserialize를 진행할 수 있습니다.\nParameterName 이용#\n\nspring-boot-starter-web의 디펜던시를 통해서 jackson-module-parameter-names는 자동으로 추가됩니다. 즉 ParameterName 모듈은 이미 사용할 수 있는 상태입니다. ParameterNameModule 모듈에 대한 자세한 정리는 Jackson으로 파싱한 JSON 속성값을 생성자로 전달하기에 잘 정리되어 있어 한 번 읽어 보시는 것을 권유 드립니다.\n해당 블로그의 내용을 정리하면 다음과 같습니다.\n\n@JsonProperty(&quot;ip&quot;) 방식(Jackson Deserialization Annotations: @JsonCreator 참고) 같은 방식으로 생성자 파라미터와, json 필드명이 일치한다면 따로 속성을 지정하지 않아도 가져올 수 있음\nJDK 8 이전까지는 Reflection만으로는 파라미터 이름을 가져올 수 없었으나 JDK 8 이상의 경우 컴파일 할 때 -parameters 옵션을 붙이면 Reflection API로 파라미터 정보를 가져올 수 있습니다.\nSpring Boot Gradle Plugin 플러그인에서 Java 컴파일의 -parameters 옵션을 자동으로 추가됩니다.\n\n@RequestBody를 통해서 deserialize를 진행할 때 별다른 설정을 하지 않았다면 WebMvcAutoConfiguration 클래스의 정의된 아래의 코드에 의해 결정됩니다.\n123456789101112131415161718192021class WebMvcAutoConfiguration &#123;    ...    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;        this.messageConvertersProvider                .ifAvailable((customConverters) -&gt; converters.addAll(customConverters.getConverters()));    &#125;&#125;public class JacksonAutoConfiguration &#123;    ...    @Configuration(proxyBeanMethods = false)    @ConditionalOnClass(ParameterNamesModule.class)            static class ParameterNamesModuleConfiguration &#123;        @Bean        @ConditionalOnMissingBean        ParameterNamesModule parameterNamesModule() &#123;            return new ParameterNamesModule(JsonCreator.Mode.DEFAULT);        &#125;    &#125;&#125;\nHttpMessageConverter 리스트에 기본으로 추가되는 Jackson에는 ParameterNamesModule이 추가되어 있습니다. 만약 WebMvcConfigurer 인터페이스를 기반으로 extendMessageConverters를 재정의 해서 사용하는 경우에는 ParameterNamesModule 설정을 추가해야 합니다. 결과 적으로 jackson-module-kotlin 모듈 없이 jackson-module-parameter-names 모듈만으로 deserialize를 진행할 수 있습니다.\n참고#\n\nhttps://kotlinlang.org/docs\nWhy does Hibernate require no argument constructor?\n스프링캠프 2019 [Track 1 Session 6] : Kotlin + Spring Data JPA (김태호)\n\nJackson으로 파싱한 JSON 속성값을 생성자로 전달하기\n\n","dateCreated":"2021-05-02T00:00:00+09:00","dateModified":"2025-01-31T20:24:39+09:00","datePublished":"2021-05-02T00:00:00+09:00","description":"코틀린 기반으로 스프링 프레임워크를 사용하는 경우 다양한 플러그인의 도움으로 보다 쉽게 개발을 진행할 수 있습니다. 어떤 플러그인이 있고 그것이 어떤 역할을 하는지에 대해서 정리해 보았습니다.","headline":"Kotlin으로 Spring 개발할 때","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://cheese10yun.github.io/spring-kotlin/"},"publisher":{"@type":"Organization","name":"Yun","sameAs":["https://github.com/cheese10yun"],"image":"yun-icon.jpg","logo":{"@type":"ImageObject","url":"yun-icon.jpg"}},"url":"https://cheese10yun.github.io/spring-kotlin/","keywords":"Spring, Kotlin"}</script>
    <meta name="description" content="코틀린 기반으로 스프링 프레임워크를 사용하는 경우 다양한 플러그인의 도움으로 보다 쉽게 개발을 진행할 수 있습니다. 어떤 플러그인이 있고 그것이 어떤 역할을 하는지에 대해서 정리해 보았습니다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Kotlin으로 Spring 개발할 때">
<meta property="og:url" content="https://cheese10yun.github.io/spring-kotlin/index.html">
<meta property="og:site_name" content="Yun Blog">
<meta property="og:description" content="코틀린 기반으로 스프링 프레임워크를 사용하는 경우 다양한 플러그인의 도움으로 보다 쉽게 개발을 진행할 수 있습니다. 어떤 플러그인이 있고 그것이 어떤 역할을 하는지에 대해서 정리해 보았습니다.">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://github.com/cheese10yun/blog-sample/raw/master/query-dsl/docs/images/result-3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/kotlin-jpa-no-arg-error.png">
<meta property="og:image" content="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/kotlin-jpa-test-code.png">
<meta property="og:image" content="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/kotlin-lazy-query.png">
<meta property="og:image" content="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/jpa-proxy.png">
<meta property="og:image" content="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/jpa-proxy-3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/jpa-proxy-2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/jackson-dependency.png">
<meta property="article:published_time" content="2021-05-01T15:00:00.000Z">
<meta property="article:modified_time" content="2025-01-31T11:24:39.809Z">
<meta property="article:author" content="Yun">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="Kotlin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/cheese10yun/blog-sample/raw/master/query-dsl/docs/images/result-3.png">
    
    
        
    
    
        <meta property="og:image" content="https://cheese10yun.github.io/assets/images/yun-icon.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90907312-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90907312-1');
    </script>


    

    
        
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5813739623204880" crossorigin="anonymous"></script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Yun Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="저자에 대해 더 알아보기"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
                </a>
                <h4 class="sidebar-profile-name">Yun</h4>
                
                    <h5 class="sidebar-profile-bio"><p>기술 블로그</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/cheese10yun"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/rss2.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Kotlin으로 Spring 개발할 때
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2021-05-02T00:00:00+09:00">
	
		    2021/05/02
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>코틀린 기반으로 스프링 프레임워크를 사용하는 경우 다양한 플러그인의 도움으로 보다 쉽게 개발을 진행할 수 있습니다. 어떤 플러그인이 있고 그것이 어떤 역할을 하는지에 대해서 정리해 보았습니다.</p>
<h2><span id="kotlin-plugin">Kotlin Plugin</span><a href="#kotlin-plugin" class="header-anchor">#</a></h2>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    kotlin(<span class="string">&quot;plugin.spring&quot;</span>) version <span class="string">&quot;1.4.32&quot;</span></span><br><span class="line">    kotlin(<span class="string">&quot;plugin.jpa&quot;</span>) version <span class="string">&quot;1.4.32&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>코틀린 언어로 스프링을 사용하는 경우는 <code>plugin.spring</code> 플러그인은 필수적이고, JPA를 사용한다면 <code>plugin.jpa</code> 또 한 필수적으로 사용하게 됩니다. 각각의 플러그인에 대해서 이야기해보겠습니다.</p>
<h2><span id="plugin-spring-peulreogeuin">plugin.spring 플러그인</span><a href="#plugin-spring-peulreogeuin" class="header-anchor">#</a></h2>
<h3><span id="all-open">all-open</span><a href="#all-open" class="header-anchor">#</a></h3>
<p>해당 플러그인을 사용하면 아래 어노테이션이 있으면 <code>all-open</code>을 자동으로 추가시킵니다. 참고로 <code>kotlin-allopen</code>, <code>plugin.spring</code>는 동일한 프로젝트입니다.</p>
<ul>
<li><code>@Component</code></li>
<li><code>@Async</code></li>
<li><code>@Transactional</code></li>
<li><code>@Cacheable</code></li>
<li><code>@SpringBootTest</code></li>
<li><code>@Configuration</code>, <code>@Controller</code>, <code>@RestController</code>, <code>@Service</code>, <code>@Repository</code>, <code>@Component</code></li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">test</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>코틀린에서는 기본적으로 클래스에는 <code>final</code> 키워드가 추가되며, 위 코드도 <code>final</code> 키워드를 생략하더라도 자동으로 추가합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Foo</span> <span class="keyword">public</span> <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">fun</span> <span class="title">test</span><span class="params">()</span></span>: kotlin.<span class="built_in">Unit</span> &#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Foo</code> 클래스를 빌드 하면 위처럼 <code>final</code> 키워드가 붙어 있는 것을 확인할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">test</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Transactional</code> 어노테이션을 붙이고 다시 빌드 해보고 클래스 파일을 살펴보겠습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@org</span>.springframework.transaction.<span class="keyword">annotation</span>.Transactional <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Foo</span> <span class="keyword">public</span> <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">open</span> <span class="function"><span class="keyword">fun</span> <span class="title">test</span><span class="params">()</span></span>: kotlin.<span class="built_in">Unit</span> &#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>class</code>, <code>fun</code> 키워드 앞에 <code>open</code> 키워드가 추가된 것을 확인할 수 있습니다. <code>plugin.spring</code>이 위의 어노테이션이 추가된 클래스에는 자동으로 <code>open</code> 키워드를 자동으로 추가합니다. <a target="_blank" rel="noopener" href="https://start.spring.io/">Spring Initializr</a>를 이용해서 프로젝트를 구성하면 <code>plugin.spring</code> 플러그인은 자동 적용됩니다.</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">allOpen &#123;</span><br><span class="line">    annotation(<span class="string">&quot;javax.persistence.Entity&quot;</span>)</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>gradle</code> 설정으로 특정 어노테이션에 대해서 <code>allOpen</code>을 동작 시킬 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = <span class="string">&quot;book&quot;</span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;title&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> title: String,</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;writer&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> writer: String,</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">) : AuditingEntity() &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 객체를 빌드 해서 클래스 파일을 확인하면 아래와 같습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@javax</span>.persistence.Entity <span class="meta">@javax</span>.persistence.Table <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Book</span> <span class="keyword">public</span> <span class="keyword">constructor</span>(title: kotlin.String, writer: kotlin.String, publisher: kotlin.String, price: java.math.BigDecimal) : com.spring.sample.AuditingEntity &#123;</span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">var</span> price: java.math.BigDecimal <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">var</span> publisher: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">var</span> title: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">var</span> writer: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>특정 어노테이션에 <code>open</code> 키워드를 편리하기 추가할 수 있습니다.</p>
<h3><span id="all-openeun-wae-pilyohalgga">all-open은 왜 필요할까?</span><a href="#all-openeun-wae-pilyohalgga" class="header-anchor">#</a></h3>
<p><img src="https://github.com/cheese10yun/blog-sample/raw/master/query-dsl/docs/images/result-3.png" alt></p>
<p>Spring Boot 2.x 버전부터는 CGLIB Proxy 방식으로 Bean을 관리하고 있습니다. CGLIB Proxy는 Target Class를 상속받아 생성하기 때문에 <code>open</code>으로 상속이 가능한 상태이어야 합니다. 그러기 때문에 <code>all-open</code> 플러그인이 필요합니다.</p>
<h3><span id="no-arg">no-arg</span><a href="#no-arg" class="header-anchor">#</a></h3>
<p><code>no-arg</code>는 argument가 없는 기본 생성자를 의미합니다. 클래스는 기본 생성자가 기본적으로 생성되며 다른 생성자를 만들면 기본 생성자는 명시적으로 선언하지 않는 이상 사라지게 됩니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bar</span>(<span class="keyword">val</span> name: String) &#123;</span><br><span class="line">    <span class="comment">// constructor() : this(&quot;none name&quot;)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기본 생성자를 주석한 경우</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Bar</span> <span class="keyword">public</span> <span class="keyword">constructor</span>(name: kotlin.String) &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">val</span> name: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기본 생성자를 주석 하지 않는 경우</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Bar</span> <span class="keyword">public</span> <span class="keyword">constructor</span>(name: kotlin.String) &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">constructor</span>() &#123; <span class="comment">/* compiled code */</span> &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">val</span> name: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>no-arg</code>는 주로 <code>plugin.jpa</code> 플러그인과 같이 사용됩니다. <code>kotlin-spring</code> 플러그인과 마찬가지로 <code>@Entity</code>, <code>@Embeddable</code>, <code>@MappedSuperclass</code> 어노테이션에 자동으로 동작합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = <span class="string">&quot;book&quot;</span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(</span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;title&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> title: String,</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;writer&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> writer: String,</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;publisher&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> publisher: String,</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;price&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> price: BigDecimal</span><br><span class="line"></span><br><span class="line">) : AuditingEntity() &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 빌드한 클래스를 Decompile 결과</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> <span class="title">extends</span> <span class="title">AuditingEntity</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> Book(<span class="meta">@NotNull</span> String title, <span class="meta">@NotNull</span> String writer, <span class="meta">@NotNull</span> String publisher, <span class="meta">@NotNull</span> BigDecimal price) &#123;</span><br><span class="line">      Intrinsics.checkNotNullParameter(title, <span class="string">&quot;title&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(writer, <span class="string">&quot;writer&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(publisher, <span class="string">&quot;publisher&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(price, <span class="string">&quot;price&quot;</span>);</span><br><span class="line">      <span class="keyword">super</span>();</span><br><span class="line">      <span class="keyword">this</span>.title = title;</span><br><span class="line">      <span class="keyword">this</span>.writer = writer;</span><br><span class="line">      <span class="keyword">this</span>.publisher = publisher;</span><br><span class="line">      <span class="keyword">this</span>.price = price;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> Book() &#123;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Book 객체에 기본 생성자가 없지만 <code>plugin.jpa</code> 플러그인으로 인해서 기본 생성자가 생성됩니다.</p>
<h2><span id="plugin-jpa-peulreogeuin">plugin.jpa 플러그인</span><a href="#plugin-jpa-peulreogeuin" class="header-anchor">#</a></h2>
<p><code>no-arg</code>에서 언급했듯이 <code>plugin.jpa</code> 플러그인을 사용 하면 <code>@Entity</code>, <code>@Embeddable</code>, <code>@MappedSuperclass</code> 어노테이션을 사용해면 <code>no-arg</code>생성자(기본 생성자)가 자동으로 생성됩니다.</p>
<h3><span id="no-argi-wae-pilyohalgga">no-arg이 왜 필요할까?</span><a href="#no-argi-wae-pilyohalgga" class="header-anchor">#</a></h3>
<p><code>plugin.jpa</code> 플러그인 없이, 즉 기본 생성자가 없는 상태에서 JPA 아래 테스트 코드를 실행해보겠습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = <span class="string">&quot;book&quot;</span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(</span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;title&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> title: String,</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;writer&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> writer: String,</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;publisher&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> publisher: String,</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;price&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> price: BigDecimal</span><br><span class="line">) : AuditingEntity() <span class="comment">// @Id 필드는 AuditingEntity 객체에 있습니다.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title class_">BookTest</span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> bookRepository: BookRepository,</span><br><span class="line">) : SpringTestSupport() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `boot save`<span class="params">()</span></span> &#123;</span><br><span class="line">        bookRepository.save(</span><br><span class="line">            Book(</span><br><span class="line">                title = <span class="string">&quot;title&quot;</span>,</span><br><span class="line">                writer = <span class="string">&quot;writer&quot;</span>,</span><br><span class="line">                publisher = <span class="string">&quot;publisher&quot;</span>,</span><br><span class="line">                price = BigDecimal.TEN</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/kotlin-jpa-no-arg-error.png" alt></p>
<p>기본 생성자가 없어 Error가 발생하는 것을 확인할 수 있습니다. Book 클래스 파일을 decompile 해서 코드를 확인해보겠습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> <span class="keyword">extends</span> <span class="title class_">AuditingEntity</span> &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(<span class="meta">@NotNull</span> String title, <span class="meta">@NotNull</span> String writer, <span class="meta">@NotNull</span> String publisher, <span class="meta">@NotNull</span> BigDecimal price)</span> &#123;</span><br><span class="line">      Intrinsics.checkNotNullParameter(title, <span class="string">&quot;title&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(writer, <span class="string">&quot;writer&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(publisher, <span class="string">&quot;publisher&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(price, <span class="string">&quot;price&quot;</span>);</span><br><span class="line">      <span class="built_in">super</span>();</span><br><span class="line">      <span class="built_in">this</span>.title = title;</span><br><span class="line">      <span class="built_in">this</span>.writer = writer;</span><br><span class="line">      <span class="built_in">this</span>.publisher = publisher;</span><br><span class="line">      <span class="built_in">this</span>.price = price;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>all-argument</code>생성자는 존재하지만, <code>no-arg</code>생성자는 존재하지 않습니다. <strong>Hibernate는 Reflection으로 객체를 생성하기 때문에 <code>protected</code> 이상의 생성자가 필요합니다.</strong> 다시 <code>plugin.jpa</code> 플러그인 적용해서 decompile 해보겠습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> <span class="keyword">extends</span> <span class="title class_">AuditingEntity</span> &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(<span class="meta">@NotNull</span> String title, <span class="meta">@NotNull</span> String writer, <span class="meta">@NotNull</span> String publisher, <span class="meta">@NotNull</span> BigDecimal price)</span> &#123;</span><br><span class="line">      Intrinsics.checkNotNullParameter(title, <span class="string">&quot;title&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(writer, <span class="string">&quot;writer&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(publisher, <span class="string">&quot;publisher&quot;</span>);</span><br><span class="line">      Intrinsics.checkNotNullParameter(price, <span class="string">&quot;price&quot;</span>);</span><br><span class="line">      <span class="built_in">super</span>();</span><br><span class="line">      <span class="built_in">this</span>.title = title;</span><br><span class="line">      <span class="built_in">this</span>.writer = writer;</span><br><span class="line">      <span class="built_in">this</span>.publisher = publisher;</span><br><span class="line">      <span class="built_in">this</span>.price = price;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">()</span> &#123;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>no-arg</code>생성자가 코드가 있는 것을 확인할 수 있고, 테스트 코드도 정상적으로 동작하는 것을 확인할 수 있습니다.</p>
<p><img src="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/kotlin-jpa-test-code.png" alt></p>
<h2><span id="all-open-in-jpa">all-open In JPA</span><a href="#all-open-in-jpa" class="header-anchor">#</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># build.gradle.kts</span><br><span class="line">allOpen &#123;</span><br><span class="line">    annotation(&quot;javax.persistence.Entity&quot;)</span><br><span class="line">    annotation(&quot;javax.persistence.MappedSuperclass&quot;)</span><br><span class="line">    annotation(&quot;javax.persistence.Embeddable&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>plugin.jpa</code>을 사용하면 <code>no-arg</code> <code>@Entity</code>, <code>@Embeddable</code>, <code>@MappedSuperclass</code> 코드에 자동으로 추가되지만 <code>all-open</code> 명시적으로 위처럼 선언해야 합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># allOpen 없는 경우</span><br><span class="line"><span class="meta">@javax</span>.persistence.Entity <span class="meta">@javax</span>.persistence.Table <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Book</span> <span class="keyword">public</span> <span class="keyword">constructor</span>(title: kotlin.String, writer: kotlin.String, publisher: kotlin.String, price: java.math.BigDecimal) : com.spring.sample.AuditingEntity &#123;</span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">var</span> price: java.math.BigDecimal <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">var</span> publisher: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">var</span> title: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">var</span> writer: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># allOpen 있는 경우</span><br><span class="line"><span class="meta">@javax</span>.persistence.Entity <span class="meta">@javax</span>.persistence.Table <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Book</span> <span class="keyword">public</span> <span class="keyword">constructor</span>(title: kotlin.String, writer: kotlin.String, publisher: kotlin.String, price: java.math.BigDecimal) : com.spring.sample.AuditingEntity &#123;</span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">var</span> price: java.math.BigDecimal <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">var</span> publisher: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">var</span> title: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@field:javax</span>.persistence.Column <span class="keyword">public</span> <span class="keyword">open</span> <span class="keyword">var</span> writer: kotlin.String <span class="comment">/* compiled code */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 코드의 차이점은 allOpen이 없는 경우 <code>fianl</code> 키워드가 있고, allOpen이 있는 경우 <code>open</code> 키워드가 있습니다. <strong><code>open</code> 키워드가 없으면 Proxy 기반으로 Lazy 로딩을 할 수 없습니다.</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = <span class="string">&quot;book&quot;</span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(</span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;title&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> title: String,</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToOne(fetch = FetchType.LAZY, targetEntity = Order::class)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = <span class="string">&quot;order_id&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> order: Order</span><br><span class="line">) : AuditingEntity()</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = <span class="string">&quot;orders&quot;</span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Order</span>(</span><br><span class="line">    <span class="meta">@Column(name = <span class="string">&quot;title&quot;</span>, nullable = false)</span></span><br><span class="line">    <span class="keyword">var</span> number: String</span><br><span class="line">) : AuditingEntity()</span><br></pre></td></tr></table></figure>
<p><code>@ManyToOne</code> 관계이며, Lazy fetch 전략을 설정했습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">internal</span> <span class="function"><span class="keyword">fun</span> `lazy loading test`<span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 데이터 set up</span></span><br><span class="line">    <span class="keyword">val</span> order = orderRepository.save(Order(<span class="string">&quot;202012-12&quot;</span>))</span><br><span class="line">    <span class="keyword">val</span> book = bookRepository.save(Book(title = <span class="string">&quot;title&quot;</span>, order = order))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 영속성 컨텍스트 초기화</span></span><br><span class="line">    entityManager.clear()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// lazy loading 이기 때문에 book에 대한 조회 쿼리는 발생하지 않을 것이라고 예상</span></span><br><span class="line">    <span class="keyword">val</span> findBook = bookRepository.findByIdOrNull(book.id!!)!!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Lazy 패치 전략을 사용했기 때문에 book에 대한 조회 시 order에 대한 조회가 쿼리가 발생하지 않을 것이라고 예상했지만 결과는 다릅니다.</strong></p>
<p><img src="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/kotlin-lazy-query.png" alt></p>
<p>order에 대한 조회 발생합니다. 디버깅 모드를 활용해서 해당 값을 확인해보겠습니다.</p>
<p><img src="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/jpa-proxy.png" alt></p>
<p>Lazy Loading이기 때문에 order는 Proxy 객체이어야 합니다. <strong>하지만 Proxy 객체가 아니라 실제 order 객체를 가지고 있는 것을 확인할 수 있습니다.</strong> 그 이유는 Kotlin은 기본적으로 <code>final</code>이기 때문에 Proxy 클래스를 생성하지 못합니다. Proxy 클래스를 생성하기 위해서는 상속이 가능해야 하므로 <code>open</code>이 필요한데 없으니 Proxy 기반으로 Lazy Loading을 진행할 수 없는 것입니다. 그렇다면 allOpen을 적용하고 다시 테스트해보겠습니다.</p>
<p><img src="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/jpa-proxy-3.png" alt></p>
<p><img src="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/jpa-proxy-2.png" alt></p>
<p>Lazy Loading이 정상적으로 동작하고 Proxy 기반으로 order 객체를 가져오는것을 확인할 수 있습니다.</p>
<h2><span id="jackson-module-kotlin-modyul">jackson-module-kotlin 모듈</span><a href="#jackson-module-kotlin-modyul" class="header-anchor">#</a></h2>
<p><a target="_blank" rel="noopener" href="https://start.spring.io/">Spring Initializr</a>를 이용해서 <code>Spring Web MVC</code> 프로젝트를 생성하게 되면 <code>com.fasterxml.jackson.module:jackson-module-kotlin</code> 디펜던시가 자동으로 추가된다. <a target="_blank" rel="noopener" href="https://github.com/FasterXML/jackson-module-kotlin">jackson-module-kotlin</a>는 기존 Jackson으로 deserialize 하기 위해서는 기본 생성자가 반드시 필요합니다. 하지만 코틀린에서 <code>data class</code>의 객체를 deserialize를 진행하게 되면 기본 생성자가 없기 때문에 아래와 같은 예외가 발생합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(no Creators, like default construct, exist): cannot deserialize from Object valu...</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SampleRequestBody</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line"><span class="comment">// all arguments 생성자는 주석</span></span><br><span class="line"><span class="comment">//    public SampleRequestBody(String name, int age) &#123;</span></span><br><span class="line"><span class="comment">//        this.name = name;</span></span><br><span class="line"><span class="comment">//        this.age = age;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 같은 자바 코드는 all arguments 생성자가 주석인 경우 기본 생성자를 명시적으로 선언하지 않아도 존재하기 때문에 deserialize 진행에 문제가 없습니다. 만약 다른 생성자가 있다면 명시적으로 기본 생성자를 작성하지 않으면 예외가 발생합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">SampleRequestBody</span>(</span><br><span class="line">    <span class="keyword">val</span> name: String,</span><br><span class="line">    <span class="keyword">val</span> age: <span class="built_in">Int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 위 data class를 빌드 이후 Decompile 결과</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">SampleRequestBody</span> &#123;</span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> int age;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> String getName() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> int getAge() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> SampleRequestBody(<span class="meta">@NotNull</span> String name, int age) &#123;</span><br><span class="line">      Intrinsics.checkNotNullParameter(name, <span class="string">&quot;name&quot;</span>);</span><br><span class="line">      <span class="keyword">super</span>();</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">      <span class="keyword">this</span>.age = age;</span><br><span class="line">   &#125;</span><br><span class="line">   ..</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>코틀린의 <code>data class</code>는 all argument 생성자만 생성하기 때문에 기존 jackson으로 deserialize를 못하고 <code>jackson-module-kotlin</code>을 통해서 단일 생성자로 deserialize를 진행할 수 있습니다. <strong>하지만 최근에는 이 부분도 개선되어 굳이 <code>jackson-module-kotlin</code> 모듈의 도움 없이 기본 생성자가 없이도 deserialize를 진행할 수 있습니다.</strong></p>
<h3><span id="parametername-iyong">ParameterName 이용</span><a href="#parametername-iyong" class="header-anchor">#</a></h3>
<p><img src="https://raw.githubusercontent.com/cheese10yun/spring-kotlin-api/master/docs/jackson-dependency.png" alt></p>
<p><code>spring-boot-starter-web</code>의 디펜던시를 통해서 <code>jackson-module-parameter-names</code>는 자동으로 추가됩니다. 즉 <code>ParameterName</code> 모듈은 이미 사용할 수 있는 상태입니다. ParameterNameModule 모듈에 대한 자세한 정리는 <a target="_blank" rel="noopener" href="https://blog.benelog.net/jackson-with-constructor.html#jsoncreator">Jackson으로 파싱한 JSON 속성값을 생성자로 전달하기</a>에 잘 정리되어 있어 한 번 읽어 보시는 것을 권유 드립니다.</p>
<p>해당 블로그의 내용을 정리하면 다음과 같습니다.</p>
<ol>
<li><code>@JsonProperty(&quot;ip&quot;)</code> 방식(<a target="_blank" rel="noopener" href="https://github.com/cheese10yun/blog-sample/tree/master/jackson">Jackson Deserialization Annotations: @JsonCreator 참고</a>) 같은 방식으로 생성자 파라미터와, json 필드명이 일치한다면 따로 속성을 지정하지 않아도 가져올 수 있음</li>
<li><code>JDK 8</code> 이전까지는 Reflection만으로는 파라미터 이름을 가져올 수 없었으나 <code>JDK 8</code> 이상의 경우 컴파일 할 때 <code>-parameters</code> 옵션을 붙이면 Reflection API로 파라미터 정보를 가져올 수 있습니다.</li>
<li>Spring Boot Gradle Plugin 플러그인에서 Java 컴파일의 <code>-parameters</code> 옵션을 자동으로 추가됩니다.</li>
</ol>
<p><code>@RequestBody</code>를 통해서 deserialize를 진행할 때 별다른 설정을 하지 않았다면 <code>WebMvcAutoConfiguration</code> 클래스의 정의된 아래의 코드에 의해 결정됩니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WebMvcAutoConfiguration</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.messageConvertersProvider</span><br><span class="line">                .ifAvailable((customConverters) -&gt; converters.addAll(customConverters.getConverters()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JacksonAutoConfiguration</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line">    <span class="meta">@ConditionalOnClass(ParameterNamesModule.class)</span></span><br><span class="line">            <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ParameterNamesModuleConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">        ParameterNamesModule <span class="title function_">parameterNamesModule</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ParameterNamesModule</span>(JsonCreator.Mode.DEFAULT);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>HttpMessageConverter</code> 리스트에 기본으로 추가되는 Jackson에는 <code>ParameterNamesModule</code>이 추가되어 있습니다. 만약 <code>WebMvcConfigurer</code> 인터페이스를 기반으로 <code>extendMessageConverters</code>를 재정의 해서 사용하는 경우에는 <code>ParameterNamesModule</code> 설정을 추가해야 합니다. <strong>결과 적으로 <code>jackson-module-kotlin</code> 모듈 없이 <code>jackson-module-parameter-names</code> 모듈만으로 deserialize를 진행할 수 있습니다.</strong></p>
<h2><span id="camgo">참고</span><a href="#camgo" class="header-anchor">#</a></h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/all-open-plugin.html">https://kotlinlang.org/docs</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/2935826/why-does-hibernate-require-no-argument-constructor">Why does Hibernate require no argument constructor?</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Ou_-DFaAUhQ">스프링캠프 2019 [Track 1 Session 6] : Kotlin + Spring Data JPA (김태호)<br>
</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.benelog.net/jackson-with-constructor.html#jsoncreator">Jackson으로 파싱한 JSON 속성값을 생성자로 전달하기</a></li>
</ul>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Kotlin/" rel="tag">Kotlin</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Spring/" rel="tag">Spring</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/spring-transaction/"
                    data-tooltip="Spring 레플리케이션 트랜잭션 처리 방식"
                    aria-label="이전: Spring 레플리케이션 트랜잭션 처리 방식"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/ktlint/"
                    data-tooltip="Ktlint 코드 스타일 검사"
                    aria-label="다음: Ktlint 코드 스타일 검사"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-kotlin/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-kotlin/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>


<!-- Comment -->
<!--  utteranc comment -->

<script src="https://utteranc.es/client.js"
        repo="cheese10yun/blog-comment"
        issue-term="title"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Yun. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/spring-transaction/"
                    data-tooltip="Spring 레플리케이션 트랜잭션 처리 방식"
                    aria-label="이전: Spring 레플리케이션 트랜잭션 처리 방식"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/ktlint/"
                    data-tooltip="Ktlint 코드 스타일 검사"
                    aria-label="다음: Ktlint 코드 스타일 검사"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-kotlin/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-kotlin/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://cheese10yun.github.io/spring-kotlin/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://cheese10yun.github.io/spring-kotlin/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/yun-icon.jpg" alt="저자 이미지"/>
        
            <h4 id="about-card-name">Yun</h4>
        
            <div id="about-card-bio"><p>기술 블로그</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
